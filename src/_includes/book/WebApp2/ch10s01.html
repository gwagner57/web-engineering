<html>
<!-- Mirrored from web-engineering.info/book/WebApp2/ch10s01.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 21 Jul 2023 11:00:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>1.&nbsp;Part-Whole Associations</title><link rel="stylesheet" type="text/css" href="html.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index-2.html" title="Web Applications with JavaScript or Java"><link rel="up" href="ch10.html" title="Chapter&nbsp;10.&nbsp;Special Topics on Associations"><link rel="prev" href="ch10.html" title="Chapter&nbsp;10.&nbsp;Special Topics on Associations"><link rel="next" href="ch10s02.html" title="2.&nbsp;Association Classes"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">1.&nbsp;Part-Whole Associations</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch10.html"><img src="images/prev.svg" alt="Prev"></a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;10.&nbsp;Special Topics on Associations</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="ch10s02.html"><img src="images/next.svg" alt="Next"></a></td></tr></table><hr></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e3641"></a>1.&nbsp;Part-Whole Associations</h2></div></div></div><p>A part-whole association<a class="indexterm" name="d5e3644"></a> represents a relationship between a part type and a whole type. Its instances are part-whole relationships between two objects where one of them is a part of the other (the whole). The UML makes a distinction between two kinds of part-whole associations: <span class="italic">aggregation</span> and <span class="italic">composition</span>. While these two terms are defined in a pretty precise, albeit unsatisfactory, way in the UML, many software developers have a different interpretation following a terminological tradition of the C++ programming community where, unlike the parts of an 'aggregation', the parts of a 'composition' cannot exist independently of the composite that references them.</p><p>We follow the UML and improve their definition of composition by introducing a distinction between two kinds of compositions: those with <span class="italic">separable</span> parts and those with <span class="italic">inseparable</span> parts.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e3652"></a>1.1.&nbsp;Aggregation</h3></div></div></div><p>An aggregation<a class="indexterm" name="d5e3655"></a> is a special form of a part-whole association, where the parts of a whole can be shared with other wholes. For instance, we can model an aggregation between the classes <code class="code">DegreeProgram</code> and <code class="code">Course</code>, as shown in the following diagram, since a course is part of a degree program and a course can be shared among two or more degree programs (e.g. an engineering degree could share a C programming course with a computer science degree).</p><div class="mediaobject"><img src="resources/DegreeProgram-Course-Aggregation.png"></div><p>However, the concept of an aggregation with <span class="bold"><strong><span class="italic">shareable parts</span></strong></span> doesn't mean much, really, so it does not have any implications on how to code the association and many developers therefore prefer not to use the white diamond in their class diagrams, but just model a plain association instead. The UML spec says: "Precise semantics of shared aggregation varies by application area and modeler".</p><p>The <span class="bold"><strong><span class="italic">multiplicity</span></strong></span> of an aggregation's association end at the whole side may be any number (*) because a part may belong to, or <span class="bold"><strong><span class="italic">shared</span></strong></span> among, any number of wholes.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e3670"></a>1.2.&nbsp;Composition</h3></div></div></div><p>It's amazing how much confusion exists about the distinction between the part-whole association concepts <span class="italic">aggregation</span> and <span class="italic">composition</span><a class="indexterm" name="d5e3675"></a>. The main problem is the widespread misunderstanding (even among expert software developers and among the authors of UML) that the concept of composition implies a life-cycle dependency<a class="indexterm" name="d5e3677"></a> between the whole and its parts such that the parts cannot exist without the whole. But this view ignores the fact that there are also cases of part-whole associations with non-shareable parts where the parts can be detached from and survive the destruction of the whole.</p><p>In the UML specification document, the definition of the term "composition" has always implied non-shareable parts, but it has not been clear what is the defining characteristic of "composition", and what is merely an optional characteristic. Even in the UML version 2.5 (as of 2015), after an attempt to improve the definition of the term "composition", it remains still ambiguous and doesn't provide any guidance how to model part-whole associations with non-shareable parts where the parts can be detached from, and survive the destruction of, the whole as opposed to the case where the parts cannot be detached and are destroyed together with the whole. They say:</p><div class="blockquote"><blockquote class="blockquote"><p>If a composite object is deleted, all of its part instances that are objects are deleted with it.</p></blockquote></div><p>But at the same time they also say:</p><div class="blockquote"><blockquote class="blockquote"><p>A part object may be removed from a composite object before the composite object is deleted, and thus not be deleted as part of the composite object.</p></blockquote></div><p>This confusion points to an incompleteness of the UML definition, which does not account for life-cycle dependencies between components and composites. It's therefore important to understand how the UML definition can be enhanced, e.g. by introducing a UML stereotype for &laquo;inseparable&raquo; compositions, or by introducing a constraint keyword <code class="code">inseparable</code> for characterizing the association end at the component side.</p><p>As <a class="link" href="http://martinfowler.com/bliki/AggregationAndComposition.html" target="_top">Martin Fowler has explained</a>, the main issue for characterizing composition relationships is that "an object can only be the part of one composition relationship". This is also explained in the blog post <a class="link" href="http://bellekens.com/2010/12/20/uml-composition-vs-aggregation-vs-association/" target="_top">UML Composition vs Aggregation vs Association</a> by G. Bellekens. In addition to this defining characteristic of a composition (to have <span class="bold"><strong><span class="italic">exclusive</span></strong></span>, or <span class="bold"><strong><span class="italic">non-shareable</span></strong></span>, parts), a composition may also come with a life-cycle dependency between the composite and its components. In fact, there are two kinds of such dependencies:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Whenever a component <span class="bold"><strong><span class="italic">must always be attached</span></strong></span> to a composite, or, in other words, when it has a <span class="bold"><strong><span class="italic">mandatory composite</span></strong></span>, as expressed by the "exactly one" multiplicity at the composite side of the composition line, then it must either be re-used in (or re-attached to) another composite, or destroyed, when its current composite is destroyed. This is exemplified by the composition between <code class="code">Person</code> and <code class="code">Heart</code>, shown in the diagram below. A heart is either destroyed or transplanted to another person, when its owner has died.</p></li><li class="listitem"><p>Whenever a component <span class="bold"><strong><span class="italic">must not be detached</span></strong></span> from its composite, or, in other words, when it is <span class="bold"><strong><span class="italic">inseparable</span></strong></span>, then, and only then, the component has to be destroyed, when its composite is destroyed. An example of such a composition with inseparable parts is the composition between <code class="code">Person</code> and <code class="code">Brain</code>.</p></li></ol></div><div class="mediaobject"><img src="resources/PartWhole-Composition-Inseparabale.png"></div><p>In summary, the life-cycle dependency created by inseparable parts only applies to specific cases of composition, but not in general. It is, therefore, not a defining characteristic. The UML spec states: "A part may be removed from a composite instance before the composite instance is deleted, and thus not be deleted as part of the composite instance."</p><p>When such a life-cycle dependency applies, it represents a special form of <span class="italic">Existential Dependency</span>, which implies the CASCADE deletion policy discussed in <a class="xref" href="ch01s02.html" title="2.&nbsp;Referential Integrity">Section&nbsp;2</a>.</p><p>In the example of a <code class="code">Car</code>-<code class="code">Engine</code> composition, as shown in the following diagram, it's clearly the case that the engine can be detached from the car before the car is destroyed, in which case the engine is not destroyed and can be re-used. This is implied by the <span class="bold"><strong><span class="italic">zero or one</span></strong></span> multiplicity at the composite side of the composition line.</p><div class="mediaobject"><img src="resources/Car-Engine-Composition.png"></div><p>The <span class="bold"><strong><span class="italic">multiplicity</span></strong></span> of a composition's association end at the composite side is either 1 or 0..1, depending on the fact if components have a mandatory composite or not. Of course, the fact that a component is inseparable implies that it has a mandatory composite, and consequently the composite's multiplicity must be 1.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e3729"></a>1.3.&nbsp;Example</h3></div></div></div><p>As an example of a part-whole association, we consider the association between textbooks and their chapters. Normally, a chapter of a textbook cannot be reused in another book without revisions (e.g., because it may reference other parts of the textbook). Also, it doesn't make sense to allow having textbook chapters that are not part of a textbook. We therefore model this association as an inseparable composition, as shown in the following diagram.</p><div class="mediaobject"><img src="resources/Book-Chapter_DesM.png"></div><p>An object class representing an inseparable component type, like <code class="code">Chapter</code>, does not need to have a standard identifier attribute because there is no need for inseparable component objects to be referenced independently of their composite object. For referencing inseparable component objects, a composite key that is composed of the primary key of the composite type and a suitable (relatively unique) attribute of the component type is used For instance, a textbook chapter is referenced by a combination of the textbook's ISBN and the chapter's sequence number.</p><p>Since <code class="code">Chapter</code> objects, as inseparable components of <code class="code">Textbook</code> objects, cannot continue to exist when their <code class="code">Textbook</code> object ceases to exist, we need to use the CASCADE deletion policy, requiring to delete all associated chapters along with deleting a textbook, in the implementation of the <span class="italic">Delete <code class="code">Textbook</code></span> operation.</p><p>An inseparable component type does not require its own CRUD data management user interfaces. Rather, all its CRUD operations are provided within the data management user interfaces of its composite type. For instance, creating, retrieving, updating and deleting textbook chapters is done within the user interfaces for managing textbook data.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch10.html"><img src="images/prev.svg" alt="Prev"></a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch10.html"><img src="images/up.svg" alt="Up"></a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="ch10s02.html"><img src="images/next.svg" alt="Next"></a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;10.&nbsp;Special Topics on Associations&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index-2.html"><img src="images/home.svg" alt="Home"></a></td><td width="40%" align="right" valign="top">&nbsp;2.&nbsp;Association Classes</td></tr></table></div></body>
<!-- Mirrored from web-engineering.info/book/WebApp2/ch10s01.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 21 Jul 2023 11:00:16 GMT -->
</html>
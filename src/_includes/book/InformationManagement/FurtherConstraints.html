<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="role-ebook-page">
<!-- Mirrored from web-engineering.info/book/InformationManagement/FurtherConstraints.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 21 Jul 2023 11:02:27 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head><meta charset="UTF-8" /><title>5.4. Add Further Integrity Constraints</title><link href="_res/pageNavigation.css" rel="stylesheet" type="text/css" /><link href="_res/ebook.css" rel="stylesheet" type="text/css" /><link href="_res/icons/index.html" type="inode/directory" /></head><body><header class="page-navigation"><table><tr><td class="page-navigation-to-first"><a href="InformationManagement.html"><span class="page-navigation-to-first-icon" title="First page
Information Management"></span></a></td><td class="page-navigation-to-previous"><a href="StandardIdAttributes.html"><span class="page-navigation-to-previous-icon" title="Previous page
5.3. Uniqueness Constraints and Standard ID Attributes"></span></a></td><td class="page-navigation-previous"><span>5.3. Uniqueness Constraints and Standard ID Attributes</span></td><td class="page-navigation-current"><span>5.4. Add Further Integrity Constraints</span> <span class="page-navigation-current-page">(29 / 42)</span></td><td class="page-navigation-next"><span>5.5. Questions and Exercises</span></td><td class="page-navigation-to-next"><a href="Questions-Exercises-2.html"><span class="page-navigation-to-next-icon" title="Next page
5.5. Questions and Exercises"></span></a></td><td class="page-navigation-to-last"><a href="_index.html"><span class="page-navigation-to-last-icon" title="Last page
Index"></span></a></td></tr></table></header><main><section class="role-section1" id="FurtherConstraints"><h2 class="role-section1-title"><span class="role-label"><span class="role-number">5.4</span>. </span>Add Further Integrity Constraints</h2><p>In the conceptual information model, we express multiplicity constraints and mandatory value constraints, because they are related to business rules. In addition to these types of constraints, there are also constraints that have a more technical meaning, and do not have much business meaning. </p><p>Integrity constraints (or simply <em>constraints</em>) are logical conditions on the data of an IS. They may take many different forms. The most important type of constraints, <b><i>property constraints</i></b>, define conditions on the admissible property values of an object. They are defined for an entity type (or class) such that they apply to all entities of that type. We focus on the most important cases of property constraints: </p><dl><dt><span class="term">String Length Constraints</span></dt><dd><p>require that the length of a string value for an attribute is less than a certain maximum number, or greater than a minimum number.</p></dd><dt><span class="term">Interval Constraints</span></dt><dd><p>require that the value of a numeric attribute must be in a specific interval.</p></dd><dt><span class="term">Pattern Constraints</span></dt><dd><p>require that a string attribute's value must match a certain pattern defined by a regular expression.</p></dd><dt><span class="term">Cardinality Constraints</span></dt><dd><p>apply to multi-valued properties, only, and require that the cardinality of a multi-valued property's value set is not less than a given minimum cardinality or not greater than a given maximum cardinality.</p></dd><dt><span class="term">Referential Integrity Constraints</span></dt><dd><p>require that the values of a reference property refer to an existing object in the range of the reference property.</p></dd><dt><span class="term">Frozen Value Constraints</span></dt><dd><p>require that the value of a property must not be changed after it has been assigned initially.</p></dd></dl><p>The visual language of UML class diagrams supports defining integrity constraints either in a special way for special cases (like with predefined keywords), or, in the general case, with the help of <em>invariants</em>, which are conditions expressed either in plain English or in the <span class="emphasis"><em>Object Constraint Language (OCL)</em></span> and shown in a special type of rectangle attached to the model element concerned. We use UML class diagrams for modeling constraints in <em>design models</em> in a way that is independent of a specific programming language or technology platform.</p><section><h4>String Length Constraints</h4><p>The length of a string value for a property such as the title of a book may have to be constrained, typically rather by a maximum length, but possibly also by a minimum length. In an SQL table definition, a maximum string length can be specified in parenthesis appended to the SQL datatype <code>CHAR</code> or <code>VARCHAR</code>, as in <code>VARCHAR(50)</code>.</p><p>UML does not define any special way of expressing string length constraints in class diagrams. Of course, we always have the option to use an <span class="italic">invariant</span> for expressing any kind of constraint, but it seems preferable to use a simpler form of expressing these property constraints. One option is to append a maximum length, or both a minimum and a maximum length, in parenthesis to the datatype name, like so </p><div class="informalfigure"><img alt="???" src="_res/Book_withStringLengthConstraint_1.svg" /></div><p>Another option is to use min/max constraint keywords in the property modifier list:</p><div class="informalfigure"><img alt="???" src="_res/Book_withStringLengthConstraint_2.svg" /></div></section><section><h4>Interval Constraints</h4><p>An interval constraint requires that an attribute's value must be in a specific interval, which is specified by a minimum value or a maximum value, or both. Such a constraint can be defined for any attribute having an ordered type, but normally we define them only for numeric datatypes or calendar datatypes. For instance, we may want to define an interval constraint requiring that the <code>age</code> attribute value must be in the interval [25,70]. In a class diagram, we can define such a constraint by using the property modifiers <code>min</code> and <code>max</code>, as shown for the <code>age</code> attribute of the <code>Driver</code> class in the following diagram.</p><div class="informalfigure"><img alt="???" src="_res/Driver_ExampleModelWithIntervalConstraint.svg" /></div><p>In an SQL table creation statement, an interval constraint is expressed in a table column definition by appending a suitable <code>CHECK</code> clause to the column definition as in the following example: </p><pre>CREATE TABLE drivers(
  name  VARCHAR NOT NULL,
  age   INTEGER <span class="bold"><strong>CHECK (age &gt;= 25 AND age &lt;= 70)</strong></span>
)</pre><p>In JavaScript, we can code an interval constraint in the following way:</p><pre>Driver.checkAge = function (a) {
  if (a &lt; 25 || a &gt; 70) {
    return &quot;Age must be between 25 and 70!&quot;;
  } else return &quot;&quot;;
};</pre><p>In Java EE, we express this interval constraint by adding the annotations <code>Min(0)</code> and <code>Max(120)</code> to the property <code>age</code> in the following way:</p><pre>@Entity
public class Driver {
  @NotNull
  private String name;
  <span class="bold"><strong>@Min(25) </strong></span><span class="bold"><strong>@Max(70)</strong></span>
  private int age;
} </pre><p>The corresponding ASP.NET Data Annotation is <code>Range(25,70)</code> as shown in</p><pre>public class Driver{
  [Required]
  public string name { get; set; }
  [<span class="bold"><strong>Range(25,70)</strong></span>]
  public int age { get; set; }
} </pre></section><section><h4>Pattern Constraints</h4><p>A pattern constraint requires that a string attribute's value must match a certain pattern, typically defined by a <span class="italic">regular expression</span>. For instance, for the object type <code>Book</code> we define an <code>isbn</code> attribute with the datatype <code>String</code> as its range and add a pattern constraint requiring that the <code>isbn</code> attribute value must be a 10-digit string or a 9-digit string followed by &quot;X&quot; to the <code>Book</code> class rectangle shown in the following diagram.</p><div class="informalfigure"><img alt="???" src="_res/Book_ExampleModelWithPatternConstraint.svg" /></div><p>In an SQL table creation statement, a pattern constraint is expressed in a table column definition by appending a suitable <code>CHECK</code> clause to the column definition as in the following example:</p><pre>CREATE TABLE books(
  isbn   VARCHAR(10) NOT NULL <span class="bold"><strong>CHECK (isbn ~ '^\d{9}(\d|X)$')</strong></span>,
  title  VARCHAR(50) NOT NULL
)</pre><p>The <code>~</code> (tilde) symbol denotes the regular expression matching predicate and the regular expression <code>^\d{9}(\d|X)$</code> follows the syntax of the POSIX standard (see, e.g., the <a class="link" href="http://www.postgresql.org/docs/9.0/static/functions-matching.html">PostgreSQL documentation</a>).</p><p>In JavaScript, we can code a pattern constraint by using the built-in regular expression function <code>test</code>, as illustrated in the following example:</p><pre>Person.checkIsbn = function (id) {
  if (!/\b\d{9}(\d|X)\b/.test( id)) {
    return &quot;The ISBN must be a 10-digit string or a 9-digit string followed by 'X'!&quot;;
  } else return &quot;&quot;;
};</pre><p>In Java EE, this pattern constraint for <code>isbn</code> is expressed with the Bean Validation annotation <code>Pattern</code> in the following way:</p><pre>@Entity
public class Book {
  @NotNull
  @<span class="bold"><strong>Pattern(regexp=&quot;^\\(\d{9}(\d|X))$&quot;)</strong></span>
  private String isbn;
  @NotNull
  private String title;
} </pre><p>The corresponding ASP.NET Data Annotation is <code>RegularExpression</code> as shown in</p><pre>public class Book{
  [Required]
  [<span class="bold"><strong>RegularExpression(@&quot;^(\d{9}(\d|X))$&quot;)</strong></span>]
  public string isbn { get; set; }
  public string title { get; set; }
}</pre></section><section><h4>Cardinality Constraints</h4><p>A cardinality constraint requires that the cardinality of a multi-valued property's value set is not less than a given <b><i>minimum cardinality</i></b> or not greater than a given <b><i>maximum cardinality</i></b>. In UML, cardinality constraints are called <b><i>multiplicity constraints</i></b>, and minimum and maximum cardinalities are expressed with the lower bound and the upper bound of the multiplicity expression, as shown in the following diagram, which contains two examples of properties with cardinality constraints.</p><div class="informalfigure"><img alt="???" src="_res/CardinalityConstraintsExamples.svg" /></div><p>The attribute definition <code>nickNames[0..3]</code> in the class <code>Person</code> specifies a minimum cardinality of 0 and a maximum cardinality of 3, with the meaning that a person may have no nickname or at most 3 nicknames. The reference property definition <code>members[3..5]</code> in the class <code>Team</code> specifies a minimum cardinality of 3 and a maximum cardinality of 5, with the meaning that a team must have at least 3 and at most 5 members.</p><p>It's not obvious how cardinality constraints could be checked in an SQL database, as there is no explicit concept of cardinality constraints in SQL, and the generic form of constraint expressions in SQL, assertions, are not supported by available DBMSs. However, it seems that the best way to implement a minimum (or maximum) cardinality constraint is an on-delete (or on-insert) trigger that tests the number of rows with the same reference as the deleted (or inserted) row.</p><p>In JavaScript, we can code a cardinality constraint validation for a multi-valued property by testing the size of the property's value set, as illustrated in the following example:</p><pre>Person.checkNickNames = function (nickNames) {
  if (nickNames.length &gt; 3) {
    return &quot;There must be no more than 3 nicknames!&quot;;
  } else return &quot;&quot;;
};</pre><p>In Java EE, using Bean Validation annotations, we can specify</p><pre><span class="bold"><strong>@Size( max=3)</strong></span> 
List&lt;String&gt; <span class="bold">nickNames</span><span class="bold"><strong>
@Size( min=3, max=5)</strong></span> 
List&lt;Person&gt; <span class="bold">members</span></pre></section></section></main><footer class="page-navigation"><table><tr><td class="page-navigation-to-first"><a href="InformationManagement.html"><span class="page-navigation-to-first-icon" title="First page
Information Management"></span></a></td><td class="page-navigation-to-previous"><a href="StandardIdAttributes.html"><span class="page-navigation-to-previous-icon" title="Previous page
5.3. Uniqueness Constraints and Standard ID Attributes"></span></a></td><td class="page-navigation-previous"><span>5.3. Uniqueness Constraints and Standard ID Attributes</span></td><td class="page-navigation-current"><span>5.4. Add Further Integrity Constraints</span> <span class="page-navigation-current-page">(29 / 42)</span></td><td class="page-navigation-next"><span>5.5. Questions and Exercises</span></td><td class="page-navigation-to-next"><a href="Questions-Exercises-2.html"><span class="page-navigation-to-next-icon" title="Next page
5.5. Questions and Exercises"></span></a></td><td class="page-navigation-to-last"><a href="_index.html"><span class="page-navigation-to-last-icon" title="Last page
Index"></span></a></td></tr></table></footer></body>
<!-- Mirrored from web-engineering.info/book/InformationManagement/FurtherConstraints.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 21 Jul 2023 11:02:28 GMT -->
</html>
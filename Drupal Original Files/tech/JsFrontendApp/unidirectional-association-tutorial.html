<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" vocab="http://schema.org/" typeof="TechArticle WebPage">

<!-- Mirrored from web-engineering.info/tech/JsFrontendApp/unidirectional-association-tutorial.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 21 Jul 2023 10:45:13 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset="UTF-8" />
  <title>Plain JavaScript App with Unidirectional Associations</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="description" content="A tutorial about developing front-end web application with unidirectional association management using plain JavaScript" />  
  <meta property="learningResourceType" content="Tutorial"/>
  <meta property="proficiencyLevel" content="Advanced"/>
  <meta property="keywords" content="JavaScript web app, JS web app, front-end web app, MVC web app, web app development tutorial, reference property, association, UML association, unidirectional association"/>
  <meta property="isPartOf" content="../../index.html"/>
  <meta property="specialty" content="../../WebAppEngineering.html"/>
  <link rel="stylesheet" type="text/css" href="../docbook.css" />
</head>
<body property="articleBody">
 <aside>
  <nav>
   <ul>
   <li><a href="4-UnidirectionalAssociationApp/index.html"><button type="button">Run the app</button></a></li>
   <li><a href="4-UnidirectionalAssociationApp.zip"><button type="button">Get the code</button></a></li>
   </ul>
  </nav>
  <div id="supportUs">
   <p>Please support <em>web-engineering.info</em> and buy our e-book <a href="https://gumroad.com/l/YyWka">Building Front-End Web Apps with Plain JavaScript</a>.</p>
   <a href="https://gumroad.com/l/YyWka"><img src="book-cover-new_169x270.jpg" width="169" height="270"/></a>
  </div>
 </aside>
 <div lang="en" class="book"><div class="titlepage"><div><div>
   <h3 class="kicker" style="color:grey"><em>Understanding</em> and <code>Implementing</code> Information Management Concepts and Techniques</h3>
   <h1 class="title"><a name="d5e1"></a>JavaScript Front-End Web App Tutorial Part 4: Managing Unidirectional Associations</h1></div><div>
   <h2 class="subtitle"><img style="float:right; margin-left:1em" property="thumbnailUrl" src="4-UnidirectionalAssociationApp/favicon.svg" width="120" 
   title="Icon made by Lorc under CC BY 3.0. Available on http://game-icons.net">Learn how to manage unidirectional associations between object types, such as the associations assigning publishers and authors to books</h2></div>
  <div><div class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Gerd</span> <span class="surname">Wagner</span></h3><code class="email">&lt;<a class="email" href="../../cdn-cgi/l/email-protection.html#62254c3503050c071022004f16174c0607"><span class="__cf_email__" data-cfemail="74335a2315131a110634165900015a1011">[email&#160;protected]</span></a>&gt;</code></div></div></div><div><p class="releaseinfo">Warning: This tutorial manuscript may still contain errors and may still be
      incomplete in certain respects. Please report any issue to Gerd Wagner at
      <a href="../../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="f7b0d9a09690999285b795da8382d99392">[email&#160;protected]</a>.</p></div><div><p class="releaseinfo">This tutorial is also available in the following formats: <a class="link" href="unidirectional-association-tutorial.pdf" target="_top">PDF</a>.
       You may <a class="link" href="4-UnidirectionalAssociationApp/index.html" target="_top">run the example app</a> from our
      server, or <a class="link" href="4-UnidirectionalAssociationApp.zip" target="_top">download it as a ZIP archive
        file</a>. See also our <a class="link" href="../../index.html" target="_top">Web Engineering
        project page</a>.</p></div><div><p class="copyright">Copyright &copy; 2014-2022 Gerd Wagner</p></div><div><div class="legalnotice"><a name="d5e28"></a><p>This tutorial article, along with any associated source code, is licensed under <a class="link" href="http://www.codeproject.com/info/cpol10.aspx" target="_top">The Code Project Open License
          (CPOL)</a>, implying that the associated code is provided "as-is", can be modified to
        create derivative works, can be redistributed, and can be used in commercial applications,
        but the article must not be distributed or republished without the author's consent.</p></div></div><div><p class="pubdate">2022-05-18</p></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="preface"><a href="#d5e31">Foreword</a></span></dt><dt><span class="chapter"><a href="#chapUnidirAssoc">1. Reference Properties and Unidirectional Associations</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e218">1. References and Reference Properties</a></span></dt><dt><span class="section"><a href="#chRefPropUniAss_sectRefIntegrity">2. Referential Integrity</a></span></dt><dt><span class="section"><a href="#d5e350">3. Modeling Reference Properties as Unidirectional
    Associations</a></span></dt><dt><span class="section"><a href="#d5e442">4. Representing Unidirectional Associations as Reference
    Properties</a></span></dt><dt><span class="section"><a href="#sectAddingDirectionality">5. Adding Directionality to a Non-Directed Association</a></span></dt><dt><span class="section"><a href="#d5e522">6. Our Running Example</a></span></dt><dt><span class="section"><a href="#sectElimUnidirAssoc">7. Eliminating Unidirectional Associations</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e547">7.1. The basic elimination procedure</a></span></dt><dt><span class="section"><a href="#d5e617">7.2. Eliminating associations from the design model</a></span></dt></dl></dd><dt><span class="section"><a href="#sectRefPropCtrls">8. Rendering Reference Properties in the User Interface</a></span></dt><dt><span class="section"><a href="#d5e832">9. Quiz Questions</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e836">9.1. Question 1: Meaning of "one-to-one"</a></span></dt><dt><span class="section"><a href="#d5e848">9.2. Question 2: When to Check Referential Integrity</a></span></dt><dt><span class="section"><a href="#d5e862">9.3. Question 3: Meaning of "Functional"</a></span></dt><dt><span class="section"><a href="#d5e874">9.4. Question 4: Object Destruction Dependency</a></span></dt><dt><span class="section"><a href="#d5e913">9.5. Question 5: Rendering a Single-Valued Reference Property</a></span></dt><dt><span class="section"><a href="#d5e935">9.6. Question 6: Expressing a Functionality Type</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chJsUnidirFunAss">2. Unidirectional Functional Associations in Plain
  JS</a></span></dt><dd><dl><dt><span class="section"><a href="#sectImplemSingleRefProp">1. Implementing Single-Valued Reference Properties</a></span></dt><dt><span class="section"><a href="#secUnidirFunAss">2. Make a JS Class Model</a></span></dt><dt><span class="section"><a href="#d5e1052">3. New Issues</a></span></dt><dt><span class="section"><a href="#d5e1088">4. Code the Model</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e1091">4.1. Summary</a></span></dt><dt><span class="section"><a href="#d5e1107">4.2. Code each model class as a JS class</a></span></dt><dt><span class="section"><a href="#d5e1138">4.3. Code the property checks</a></span></dt><dt><span class="section"><a href="#d5e1173">4.4. Code the property setters</a></span></dt><dt><span class="section"><a href="#d5e1180">4.5. Choose and implement a deletion policy</a></span></dt><dt><span class="section"><a href="#d5e1206">4.6. Serialization functions</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e1222">5. Code the View</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e1316">5.1. Setting up the <span class="italic">Retrieve/List
      All</span> user interface</a></span></dt><dt><span class="section"><a href="#d5e1326">5.2. Setting up the <span class="italic">Create</span> and
      <span class="italic">Update</span> user interfaces</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e1357">6. Quiz Questions</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e1359">6.1. Question 1: Single-valued reference property</a></span></dt><dt><span class="section"><a href="#d5e1378">6.2. Question 2: Implementing the CASCADE deletion policy</a></span></dt><dt><span class="section"><a href="#d5e1392">6.3. Question 3: JS class model</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#d5e1416">3. Unidirectional Non-Functional Associations in Plain
  JS</a></span></dt><dd><dl><dt><span class="section"><a href="#sectImplemMultiRefProp">1. Implementing Multi-Valued Reference Properties</a></span></dt><dt><span class="section"><a href="#d5e1468">2. Make a JS Class Model</a></span></dt><dt><span class="section"><a href="#d5e1511">3. New issues</a></span></dt><dt><span class="section"><a href="#d5e1558">4. Code the Model</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e1561">4.1. Summary</a></span></dt><dt><span class="section"><a href="#d5e1587">4.2. Code the add and remove operations</a></span></dt><dt><span class="section"><a href="#d5e1612">4.3. Choose and implement a deletion policy</a></span></dt><dt><span class="section"><a href="#d5e1636">4.4. Serialization functions</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e1659">5. Code the View</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e1661">5.1. Setting up the <span class="italic">Retrieve/List
      All</span> user interface</a></span></dt><dt><span class="section"><a href="#d5e1676">5.2. Selecting associated objects in the <span class="italic">Create</span> user interface</a></span></dt><dt><span class="section"><a href="#d5e1711">5.3. Selecting associated objects in the <span class="italic">Update</span> user interface</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e1766">6. Points of Attention</a></span></dt><dt><span class="section"><a href="#d5e1775">7. Quiz Questions</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e1777">7.1. Question 1: Collection-valued properties</a></span></dt><dt><span class="section"><a href="#d5e1799">7.2. Question 2: Implementing the CASCADE deletion policy</a></span></dt><dt><span class="section"><a href="#d5e1813">7.3. Question 3: JS class model</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e1837">8. Practice Project</a></span></dt></dl></dd></dl></div><div class="list-of-figures"><p><b>List of Figures</b></p><dl><dt>1.1. <a href="#figCommitteChairRefProp">A committee has a club member as chair expressed by the reference
      property <code class="code">chair</code></a></dt><dt>1.2. <a href="#figCommitteChairAssEnd">An association end with a "dot"</a></dt><dt>1.3. <a href="#figUnidirAssocAsRefProp">Representing unidirectional associations as reference
      properties</a></dt><dt>1.4. <a href="#figCommitteChairDomM">A model of a non-directed association between Committee and
      ClubMember</a></dt><dt>1.5. <a href="#figBidirectionalCommitteClubmemberAssoc">Modeling a bidirectional association between Committee and
          ClubMember</a></dt><dt>1.6. <a href="#figPublisherBookIDM">The Publisher-Book information design model with a unidirectional
      association</a></dt><dt>1.7. <a href="#figPublisherBookAuthorIDM">The Publisher-Book-Author information design model with two
      unidirectional associations</a></dt><dt>1.8. <a href="#figChairedCommitte">Turning a functional association end into a reference
        property</a></dt><dt>1.9. <a href="#figPolygonPoint">Turning a non-functional association end into a multi-valued
          reference property</a></dt><dt>1.10. <a href="#figPublBookAFM">An OO class model for <code class="code">Publisher</code> and
        <code class="code">Book</code></a></dt><dt>1.11. <a href="#figPublBookAuthAFM">An OO class model for the classes Book, Publisher and
        Author</a></dt><dt>1.12. <a href="#d5e827">A multi-selection widget showing two associated authors</a></dt><dt>2.1. <a href="#PublBookJsM">A JS class model defining the classes <code class="code">Book</code> and
        <code class="code">Publisher</code></a></dt><dt>3.1. <a href="#figMovieUnidirAssApp">Two unidirectional associations between <code class="code">Movie</code> and
      <code class="code">Person</code>.</a></dt></dl></div><div class="list-of-tables"><p><b>List of Tables</b></p><dl><dt>3.1. <a href="#d5e1872">Movies</a></dt><dt>3.2. <a href="#d5e1900">People</a></dt></dl></div><div class="preface"><div class="titlepage"><div><div><h1 class="title"><a name="d5e31"></a>Foreword</h1></div></div></div><p>This tutorial is Part 4 of our series of <a class="link" href="../../JsFrontendApp.html" target="_top">six
    tutorials</a> about model-based development of front-end web
    applications with plain JavaScript. It shows how to build a web app that
    takes care of the three object types <code class="code">Book</code>,
    <code class="code">Publisher</code> and <code class="code">Author</code> as well as of two
    unidirectional associations: </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>the association between the classes <code class="code">Book</code> and
          <code class="code">Publisher</code> assigning a publisher to a book,</p></li><li class="listitem"><p>the association between the classes <code class="code">Book</code> and
          <code class="code">Author</code> assigning one or more authors to a book.</p></li></ol></div><p>The app supports the four standard data management operations
    (<span class="bold"><strong>C</strong></span>reate/<span class="bold"><strong>R</strong></span>ead/<span class="bold"><strong>U</strong></span>pdate/<span class="bold"><strong>D</strong></span>elete). It
    extends the example app of part 2 by adding code for handling the
    <span class="bold"><strong>unidirectional functional</strong></span> (many-to-one)
    association between <code class="code">Book</code> and <code class="code">Publisher</code>, and the
    <span class="bold"><strong>unidirectional non-functional</strong></span>
    (many-to-many) association between <code class="code">Book</code> and
    <code class="code">Author</code>. The other parts of the tutorial are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="minimal-tutorial.html" target="_top">Part
        1</a>: Building a <span class="bold"><strong>minimal</strong></span>
        app.</p></li><li class="listitem"><p><a class="link" href="validation-tutorial.html" target="_top">Part
        2</a>: Handling <span class="bold"><strong>constraint
        validation</strong></span>.</p></li><li class="listitem"><p><a class="link" href="enumeration-tutorial.html" target="_top">Part
        3</a>: Dealing with <span class="bold"><strong>enumerations</strong></span>.</p></li><li class="listitem"><p><a class="link" href="bidirectional-association-tutorial.html" target="_top">Part
        5</a>: Managing <span class="bold"><strong>bidirectional
        associations</strong></span>, such as the associations between books and
        publishers and between books and authors, not only assigning authors
        and a publisher to a book, but also the other way around, assigning
        books to authors and to publishers.</p></li><li class="listitem"><p><a class="link" href="subtyping-tutorial.html" target="_top">Part
        6</a>: Handling <span class="bold"><strong>subtype</strong></span>
        (inheritance) relationships between object types.</p></li></ul></div><p>You may also want to take a look at our open access book <a class="link" href="../../JsFrontendApp-Book.html" target="_top">Building
    Front-End Web Apps with Plain JavaScript</a>, which includes all parts
    of the tutorial in one document, dealing with multiple object types
    ("books", "publishers" and "authors") and taking care of constraint
    validation, enumeration attributes, associations and
    subtypes/inheritance.</p></div><div lang="" class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chapUnidirAssoc"></a>Chapter&nbsp;1.&nbsp;Reference Properties and Unidirectional Associations</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#d5e218">1. References and Reference Properties</a></span></dt><dt><span class="section"><a href="#chRefPropUniAss_sectRefIntegrity">2. Referential Integrity</a></span></dt><dt><span class="section"><a href="#d5e350">3. Modeling Reference Properties as Unidirectional
    Associations</a></span></dt><dt><span class="section"><a href="#d5e442">4. Representing Unidirectional Associations as Reference
    Properties</a></span></dt><dt><span class="section"><a href="#sectAddingDirectionality">5. Adding Directionality to a Non-Directed Association</a></span></dt><dt><span class="section"><a href="#d5e522">6. Our Running Example</a></span></dt><dt><span class="section"><a href="#sectElimUnidirAssoc">7. Eliminating Unidirectional Associations</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e547">7.1. The basic elimination procedure</a></span></dt><dt><span class="section"><a href="#d5e617">7.2. Eliminating associations from the design model</a></span></dt></dl></dd><dt><span class="section"><a href="#sectRefPropCtrls">8. Rendering Reference Properties in the User Interface</a></span></dt><dt><span class="section"><a href="#d5e832">9. Quiz Questions</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e836">9.1. Question 1: Meaning of "one-to-one"</a></span></dt><dt><span class="section"><a href="#d5e848">9.2. Question 2: When to Check Referential Integrity</a></span></dt><dt><span class="section"><a href="#d5e862">9.3. Question 3: Meaning of "Functional"</a></span></dt><dt><span class="section"><a href="#d5e874">9.4. Question 4: Object Destruction Dependency</a></span></dt><dt><span class="section"><a href="#d5e913">9.5. Question 5: Rendering a Single-Valued Reference Property</a></span></dt><dt><span class="section"><a href="#d5e935">9.6. Question 6: Expressing a Functionality Type</a></span></dt></dl></dd></dl></div><p>A property defined for an object type, or class, is called a <span class="bold"><strong><span class="italic">reference
  property</span></strong></span><a class="indexterm" name="d5e86"></a> if its values are <span class="italic">references</span> that reference an object of another, or
  of the same, type. For instance, the class <code class="code">Committee</code> shown in
  <a class="xref" href="#figCommitteChairRefProp" title="Figure&nbsp;1.1.&nbsp;A committee has a club member as chair expressed by the reference property chair">Figure&nbsp;1.1</a> below
  has a reference property <code class="code">chair</code>, the values of which are
  references to objects of type <code class="code">ClubMember</code>.</p><p>An <span class="bold"><strong><span class="italic">association</span></strong></span><a class="indexterm" name="d5e96"></a> between object types classifies relationships between objects
  of those types. For instance, the association <span class="italic">Committee</span>-<span class="bold"><strong>has</strong></span>-<span class="italic">ClubMember</span>-<span class="bold"><strong>as-chair</strong></span>, which is visualized as a connection line in
  the class diagram shown in <a class="xref" href="#figCommitteChairAssEnd" title="Figure&nbsp;1.2.&nbsp;An association end with a &#34;dot&#34;">Figure&nbsp;1.2</a> below, classifies the relationships <span class="underline">FinanceCommittee</span>-<span class="underline"><span class="bold"><strong>has</strong></span></span>-<span class="underline">PeterMiller</span>-<span class="underline"><span class="bold"><strong>as-chair</strong></span></span>, <span class="underline">RecruitmentCommittee</span>-<span class="underline"><span class="bold"><strong>has</strong></span></span>-<span class="underline">SusanSmith</span>-<span class="underline"><span class="bold"><strong>as-chair</strong></span></span> and <span class="underline">AdvisoryCommittee</span>-<span class="underline"><span class="bold"><strong>has</strong></span></span>-<span class="underline">SarahAnderson</span>-<span class="underline"><span class="bold"><strong>as-chair</strong></span></span>, where
  the objects <span class="underline">PeterMiller</span>, <span class="underline">SusanSmith</span> and <span class="underline">SarahAnderson</span> are of type
  <code class="code">ClubMember</code>, and the objects <span class="underline">FinanceCommittee</span>, <span class="underline">RecruitmentCommittee</span> and <span class="underline">AdvisoryCommittee</span> are of type
  <code class="code">Committee</code>. An association as a set of relationships can be
  represented as a table like so:</p><div class="informaltable"><table frame="border" rules="all"><thead><tr>
        <th colspan="2"><span class="italic">Committee</span>-<span class="bold"><strong>has</strong></span>-<span class="italic">ClubMember</span>-<span class="bold"><strong>as-chair</strong></span></th>
      </tr></thead><tbody><tr>
        <td>Finance Committee</td>

        <td>Peter Miller</td>
      </tr><tr>
        <td>Recruitment Committee</td>

        <td>Susan Smith</td>
      </tr><tr>
        <td>Advisory Committee</td>

        <td>Sarah Anderson</td>
      </tr></tbody></table></div><p>Reference properties correspond to a special form of associations,
  namely to <span class="italic"><span class="bold"><strong>unidirectional</strong></span> binary
  associations</span><a class="indexterm" name="d5e150"></a>. While a binary association does, in general, not need to be
  directional, a reference property represents a binary association that is
  directed from the property's domain class (where it is defined) to its range
  class.</p><p>In general, associations are <span class="bold"><strong><span class="italic">relationship types</span></strong></span> with two or more
  <span class="bold"><strong><span class="italic">object
  types</span></strong></span> participating in them. An association between
  two object types is called <span class="bold"><strong><span class="italic">binary</span></strong></span>. In this <span class="phrase">tutorial</span> we only discuss binary associations.
  For simplicity, we just say 'association' when we actually mean 'binary
  association'.</p><p>While individual relationships (such as <span class="underline">FinanceCommittee</span>-<span class="underline"><span class="bold"><strong>has</strong></span></span>-<span class="underline">PeterMiller</span>-<span class="underline"><span class="bold"><strong>as-chair</strong></span></span>) are important information items
  in business communication and in information systems, associations (such as
  <span class="italic">Committee</span>-<span class="bold"><strong>has</strong></span>-<span class="italic">ClubMember</span>-<span class="bold"><strong>as-chair</strong></span>) are important elements of <span class="italic">information models</span>. Consequently, software
  applications have to implement them in a proper way, typically as part of
  their <span class="italic">model</span> layer within a <span class="italic">model-view-controller</span> (MVC) architecture.
  Unfortunately, many application development frameworks lack the required
  support for dealing with associations.</p><p>In mathematics, associations have been formalized in an abstract way
  as sets of uniform tuples, called <span class="italic">relations</span>. In <span class="italic">Entity-Relationship (ER)</span> modeling, which is the
  classical information modeling approach in information systems and software
  engineering, objects are called <span class="italic">entities</span>,
  and associations are called <span class="italic">relationship
  types</span>. The <span class="italic">Unified Modeling Language
  (UML)</span> includes the <span class="italic">UML Class
  Diagram</span> language for information modeling. In UML, object types
  are called <span class="italic">classes</span>, relationship types
  are called <span class="italic">associations</span>, and individual
  relationships are called "links". These three terminologies are summarized
  in the following table:</p><div class="informaltable"><table frame="border" rules="all"><thead><tr>
        <th>Our preferred term(s)</th>

        <th>UML</th>

        <th>ER Diagrams</th>

        <th>Mathematics</th>
      </tr></thead><tbody><tr>
        <td>object</td>

        <td>object</td>

        <td>entity</td>

        <td>individual</td>
      </tr><tr>
        <td>object type (class)</td>

        <td>class</td>

        <td>entity type</td>

        <td>unary relation</td>
      </tr><tr>
        <td>relationship</td>

        <td>link</td>

        <td>relationship</td>

        <td>tuple</td>
      </tr><tr>
        <td>association (relationship type)</td>

        <td>association</td>

        <td>relationship type</td>

        <td>relation</td>
      </tr><tr>
        <td>functional association</td>

        <td></td>

        <td>one-to-one, many-to-one or one-to-many relationship type</td>

        <td>function</td>
      </tr></tbody></table></div><p>We first discuss reference properties, which implicitly represent
  unidirectional binary associations in an "association-free" class model (a
  model without any explicit association element).</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e218"></a>1.&nbsp;References and Reference Properties</h2></div></div></div><p>A reference<a class="indexterm" name="d5e221"></a> can be either <span class="italic">human-readable</span> or an <span class="italic">internal object reference</span>. Human-readable
    references refer to identifiers that are used in human communication, such
    as the unique names of astronomical bodies, the ISBN of books and the
    employee numbers of the employees of a company. Internal object references
    refer to the computer memory addresses of OOP objects, thus providing an
    efficient mechanism for accessing objects in the main memory of a
    computer.</p><p>Some languages, like SQL and XML, only support human-readable, but
    not internal references. In SQL, human-readable references are called
    <span class="italic">foreign keys</span>, and the identifiers they
    refer to are called <span class="italic">primary keys</span>. In
    XML, human-readable references are called <span class="italic">ID
    references</span> and the corresponding attribute type is
    <code class="code">IDREF</code>.</p><p>Objects in an OO program can be referenced either with the help of
    human-readable references (such as integer codes) or with internal object
    references, which are preferable for accessing objects efficiently in main
    memory. Following the XML terminology, we call human-readable references
    <span class="italic">ID references</span>. We follow the standard
    naming convention for ID reference properties where an ID reference
    property defined in a class <code class="code">A</code> and referencing objects of
    class <code class="code">B</code> has the name <code class="code">b_id</code> using the suffix
    <code class="code">_id</code>. When we store persistent objects in the form of records
    or table rows, we need to convert internal object references, stored in
    properties like <code class="code">publisher</code>, to ID references, stored in
    properties like <code class="code">publisher_id</code>. This conversion is performed as
    part of the serialization of the object by assigning the standard
    identifier value of the referenced object to the ID reference property of
    the referencing object.</p><p>In OO languages, a property is defined for an object type, or class,
    which is its <span class="italic">domain</span>. The values of a
    property are either <span class="italic">data values</span> from
    some datatype, in which case the property is called an <span class="bold"><strong><span class="italic">attribute</span></strong></span><a class="indexterm" name="d5e243"></a>, or they are <span class="italic">object
    references</span> referencing an object from some class, in which case
    the property is called a <span class="bold"><strong><span class="italic">reference property</span></strong></span><a class="indexterm" name="d5e248"></a>. For instance, the class <code class="code">Committee</code> shown in
    <a class="xref" href="#figCommitteChairRefProp" title="Figure&nbsp;1.1.&nbsp;A committee has a club member as chair expressed by the reference property chair">Figure&nbsp;1.1</a> below
    has an attribute <code class="code">name</code> with range <code class="code">String</code>, and a
    reference property <code class="code">chair</code> with range
    <code class="code">ClubMember</code>.</p><div class="figure"><a name="figCommitteChairRefProp"></a><p class="title"><b>Figure&nbsp;1.1.&nbsp;A committee has a club member as chair expressed by the reference
      property <code class="code">chair</code></b></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="400"><tr><td><img src="../fig/CommitteeChair_AFM.svg" width="400" alt="A committee has a club member as chair expressed by the reference property chair"></td></tr></table></div></div></div><br class="figure-break"><p>Object-oriented programming languages, such as JavaScript, PHP, Java
    and C#, directly support the concept of <span class="italic">reference
    properties</span>, which are properties whose range is not a <span class="italic">datatype</span> but a <span class="italic">reference
    type</span>, or <span class="italic">class</span>, and whose
    values are object references to instances of that class.</p><p>By default, the multiplicity of a property is <code class="code">1</code>, which
    means that the property is <span class="bold"><strong><span class="italic">mandatory</span></strong></span> and <span class="bold"><strong><span class="italic">functional</span></strong></span> (or,
    in other words, <span class="italic">single-valued</span>), having
    <span class="bold"><strong><span class="italic">exactly
    one</span></strong></span> value, like the property <code class="code">chair</code> in
    class <code class="code">Committee</code> shown in <a class="xref" href="#figCommitteChairRefProp" title="Figure&nbsp;1.1.&nbsp;A committee has a club member as chair expressed by the reference property chair">Figure&nbsp;1.1</a>. When a
    functional property is <span class="bold"><strong><span class="italic">optional</span></strong></span> (not mandatory), it has the
    multiplicity <code class="code">0..1</code>, which means that the property's minimum
    cardinality is 0 and its maximum cardinality is 1.</p><p>A reference property can be either <span class="bold"><strong><span class="italic">single-valued</span></strong></span><a class="indexterm" name="d5e285"></a> (<span class="italic">functional</span>) or
    <span class="bold"><strong><span class="italic">multi-valued</span></strong></span><a class="indexterm" name="d5e291"></a> (<span class="italic">non-functional</span>). For
    instance, the reference property <code class="code">Committee::chair</code> shown in
    <a class="xref" href="#figCommitteChairRefProp" title="Figure&nbsp;1.1.&nbsp;A committee has a club member as chair expressed by the reference property chair">Figure&nbsp;1.1</a> is
    single-valued, since it assigns a unique club member as chair to a club.
    An example of a <span class="italic">multi-valued</span> reference
    property is provided by the property <code class="code">Book::authors</code> shown in
    <a class="xref" href="#figPublBookAuthAFM" title="Figure&nbsp;1.11.&nbsp;An OO class model for the classes Book, Publisher and Author">Figure&nbsp;1.11</a>
    below.</p><p>Normally, the collection value of a multi-valued reference property
    is a <span class="emphasis"><em>set</em></span> of references, implying that the order of
    the references does not matter. In certain cases, however, the order
    matters and, consequently, the collection value of such a multi-valued
    reference property is an <span class="emphasis"><em>ordered set</em></span> of references,
    typically implemented as a list. Only rarely, the collection value of a
    multi-valued reference property may be a, possibly ordered,
    <span class="emphasis"><em>multi-set</em></span> (also called
    <span class="emphasis"><em>bag</em></span>).</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="chRefPropUniAss_sectRefIntegrity"></a>2.&nbsp;Referential Integrity</h2></div></div></div><p>References are important information items in our application's
    database. However, they are only meaningful, when their <span class="italic">referential integrity</span><a class="indexterm" name="d5e309"></a> is maintained by the app. This requires that for any
    reference, there is a referenced object in the database. Consequently, any
    reference property <code class="code">p</code> with domain class <code class="code">C</code> and
    range class <code class="code">D</code> comes with a <span class="italic">referential integrity constraint</span> that has to be
    checked whenever </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>a new object of type <code class="code">C</code> is created,</p></li><li class="listitem"><p>the value of <code class="code">p</code> is changed for some object of type
          <code class="code">C</code>,</p></li><li class="listitem"><p>an object of type <code class="code">D</code> is destroyed.</p></li></ol></div><p>A referential integrity constraint also implies two <span class="italic">change dependencies</span>:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>An <span class="bold"><strong><span class="italic">object
          creation dependency</span></strong></span><a class="indexterm" name="d5e333"></a>: an object with a reference to another object can
          only be created after the referenced object has been created.</p></li><li class="listitem"><p>An <span class="bold"><strong><span class="italic">object
          destruction dependency</span></strong></span><a class="indexterm" name="d5e339"></a>: an object that is referenced by another object can
          only be destroyed after</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>the referencing object(s) is (are) destroyed first; this
                approach can be called the <span class="emphasis"><em>CASCADE deletion
                policy</em></span>, or</p></li><li class="listitem"><p>the reference in the referencing object is either
                dropped (the <span class="emphasis"><em>DROP-REFERENCE deletion
                policy</em></span>) or replaced by another reference.</p></li></ol></div><p>For every reference property in our app's model
          classes, we have to choose, which of these two possible <span class="italic">deletion policies</span> applies.</p></li></ol></div><p>In certain cases, we may want to relax this strict regime
    and allow creating objects that have non-referencing values for an ID
    reference property, but we do not consider such cases.</p><p>Typically, object creation dependencies are managed in the user
    interface by not allowing the user to enter a value of an ID reference
    property, but only to select one from a list of all existing target
    objects.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e350"></a>3.&nbsp;Modeling Reference Properties as Unidirectional
    Associations</h2></div></div></div><p>A reference property (such as <code class="code">chair</code> in the example
    shown in <a class="xref" href="#figCommitteChairRefProp" title="Figure&nbsp;1.1.&nbsp;A committee has a club member as chair expressed by the reference property chair">Figure&nbsp;1.1</a> above) can be modeled in a UML class diagram
    in the form of an <span class="bold"><strong><span class="italic">association end</span></strong></span><a class="indexterm" name="d5e357"></a> owned by its domain class, which is visualized with the
    help of a small filled circle (also called a "dot"). This requires to
    connect the domain class and the range class of the reference property
    with an association line, place an <span class="italic">ownership
    dot</span><a class="indexterm" name="d5e360"></a> at the end of this line at the range class side, and
    annotate this association end with the property name and with a
    multiplicity symbol, as shown in <a class="xref" href="#figCommitteChairAssEnd" title="Figure&nbsp;1.2.&nbsp;An association end with a &#34;dot&#34;">Figure&nbsp;1.2</a> below for the case of our example. In this way
    we get a <span class="bold"><strong><span class="italic">unidirectional
    association</span></strong></span>, the <span class="bold"><strong><span class="italic">source</span></strong></span> class of which is the
    property's <span class="bold"><strong><span class="italic">domain</span></strong></span> and the <span class="bold"><strong><span class="italic">target</span></strong></span> class of
    which is the property's <span class="bold"><strong><span class="italic">range</span></strong></span>.</p><p>The fact that an association end is <span class="italic">owned</span> by the class at the other end, as visually
    expressed by the <span class="italic">association end ownership
    dot</span> at the association end <code class="code">chair</code> in the example
    shown in <a class="xref" href="#figCommitteChairAssEnd" title="Figure&nbsp;1.2.&nbsp;An association end with a &#34;dot&#34;">Figure&nbsp;1.2</a> below, implies that the association end
    represents a reference property. In the example of <a class="xref" href="#figCommitteChairAssEnd" title="Figure&nbsp;1.2.&nbsp;An association end with a &#34;dot&#34;">Figure&nbsp;1.2</a>, the
    represented reference property is
    <code class="code">Committee</code>::<code class="code">chair</code> having <code class="code">ClubMember</code>
    as range. Such an association, with only one association end ownership
    dot, is <span class="italic">unidirectional</span> in the sense
    that it allows `navigation&acute; (object access) in one direction only: from
    the class at the opposite side of the dot (the <span class="italic">source</span> class) to the class where the dot is
    placed (the <span class="italic">target</span> class).</p><div class="figure"><a name="figCommitteChairAssEnd"></a><p class="title"><b>Figure&nbsp;1.2.&nbsp;An association end with a "dot"</b></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="400"><tr><td><img src="../fig/CommitteeChair_DesM.svg" width="400" alt="An association end with a &#34;dot&#34;"></td></tr></table></div></div></div><br class="figure-break"><p>Thus, the two diagrams shown in <a class="xref" href="#figCommitteChairRefProp" title="Figure&nbsp;1.1.&nbsp;A committee has a club member as chair expressed by the reference property chair">Figure&nbsp;1.1</a> and <a class="xref" href="#figCommitteChairAssEnd" title="Figure&nbsp;1.2.&nbsp;An association end with a &#34;dot&#34;">Figure&nbsp;1.2</a> express
    essentially equivalent models. When a reference property, like
    <code class="code">chair</code> in <a class="xref" href="#figCommitteChairRefProp" title="Figure&nbsp;1.1.&nbsp;A committee has a club member as chair expressed by the reference property chair">Figure&nbsp;1.1</a>, is modeled by an association end with a
    "dot", then the property's multiplicity is attached to the association
    end. Since in a design model, all association ends need to have a
    multiplicity, we also have to define a multiplicity for the other end at
    the side of the <code class="code">Committee</code> class, which represents the inverse
    of the property. This multiplicity (of the inverse property) is not
    available in the original property description in the model shown in <a class="xref" href="#figCommitteChairRefProp" title="Figure&nbsp;1.1.&nbsp;A committee has a club member as chair expressed by the reference property chair">Figure&nbsp;1.1</a>, so it has
    to be added according to the intended semantics of the association. It can
    be obtained by answering the question "is it mandatory that any
    <code class="code">ClubMember</code> is the <code class="code">chair</code> of a
    <code class="code">Committee</code>?" for finding the minimum cardinality and the
    question "can a <code class="code">ClubMember</code> be the <code class="code">chair</code> of more
    than one <code class="code">Committee</code>?" for finding the maximum
    cardinality.</p><p>When the value of a property is a set of values from its range, the
    property is <span class="bold"><strong><span class="italic">non-functional</span></strong></span> and its multiplicity is
    either <code class="code">0..*</code> or <code class="code">n..*</code> where n &gt; 0. Instead of
    <code class="code">0..*</code>, which means "neither mandatory nor functional", we can
    simply write the asterisk symbol <code class="code">*</code>. The association shown in
    <a class="xref" href="#figCommitteChairAssEnd" title="Figure&nbsp;1.2.&nbsp;An association end with a &#34;dot&#34;">Figure&nbsp;1.2</a> assigns
    at most one object of type <code class="code">ClubMember</code> as chair to an object
    of type <code class="code">Committee</code>. Consequently, it's an example of a
    <span class="bold"><strong><span class="italic">functional
    association</span></strong></span><a class="indexterm" name="d5e416"></a>.</p><p>An overview about the different cases of functionality of an
    association is provided in the following table: </p><div class="informaltable"><a name="tblFunctionalityTypes"></a><table frame="border" rules="all"><thead><tr>
            <th>Functionality type</th>

            <th>Meaning</th>
          </tr></thead><tbody><tr>
            <td>one-to-one</td>

            <td>both functional and inverse functional</td>
          </tr><tr>
            <td>many-to-one</td>

            <td>functional</td>
          </tr><tr>
            <td>one-to-many</td>

            <td>inverse functional</td>
          </tr><tr>
            <td>many-to-many</td>

            <td>neither functional nor inverse functional</td>
          </tr></tbody></table></div><p>Notice that the directionality and the functionality type<a class="indexterm" name="d5e439"></a> of an association are independent of each other. So, a
    unidirectional association can be either functional (one-to-one or
    many-to-one), or non-functional (one-to-many or many-to-many).</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e442"></a>4.&nbsp;Representing Unidirectional Associations as Reference
    Properties</h2></div></div></div><p>A unidirectional association<a class="indexterm" name="d5e445"></a> between a source and a target class can be represented as a
    reference property of the source class. This is illustrated in <a class="xref" href="#figUnidirAssocAsRefProp" title="Figure&nbsp;1.3.&nbsp;Representing unidirectional associations as reference properties">Figure&nbsp;1.3</a> below for
    two unidirectional associations: a many-to-one and a many-to-many
    association.</p><div class="figure"><a name="figUnidirAssocAsRefProp"></a><p class="title"><b>Figure&nbsp;1.3.&nbsp;Representing unidirectional associations as reference
      properties</b></p><div class="figure-contents"><div class="informaltable"><table frame="void"><tbody><tr>
            <td><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="350"><tr><td><img src="../fig/Publisher-Book-Author_Unidir_DesM.svg" width="350" alt="Representing unidirectional associations as reference properties"></td></tr></table></div></td>
          </tr><tr>
            <td align="center"><div class="mediaobject"><img src="../fig/Downarrow.svg" alt="Representing unidirectional associations as reference properties"></div></td>
          </tr><tr>
            <td><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="380"><tr><td><img src="../fig/Publisher-Book-Author_Unidir_AFM.svg" width="380" alt="Representing unidirectional associations as reference properties"></td></tr></table></div></td>
          </tr></tbody></table></div></div></div><br class="figure-break"><p>Notice that, in a way, we have eliminated the two explicit
    associations and replaced them with corresponding reference properties
    resulting in a class model that can be coded with a classical OOP language
    in a straightforward way. OOP languages do not support associations as
    first class citizens. They do not have a language element for defining
    associations. Consequently, an OOP class design model, which we call
    <span class="bold"><strong><span class="italic">OO class
    model</span></strong></span>, must not contain any explicit
    association.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sectAddingDirectionality"></a>5.&nbsp;Adding Directionality to a Non-Directed Association</h2></div></div></div><p>When we make an information model in the form of a UML class
    diagram, we typically end up with a model containing one or more
    associations that do not have any ownership defined for their ends, as,
    for instance, in <a class="xref" href="#figCommitteChairDomM" title="Figure&nbsp;1.4.&nbsp;A model of a non-directed association between Committee and ClubMember">Figure&nbsp;1.4</a> below. When there is no ownership dot at
    either end of an association, such as in this example, this means that the
    model does not specify how the association is to be represented (or
    realized) with the help of reference properties. Such an association does
    not have any direction. According to the UML 2.5 specification, the ends
    of such an association are "owned" by itself, and not by any of the
    classes participating in it.</p><div class="figure"><a name="figCommitteChairDomM"></a><p class="title"><b>Figure&nbsp;1.4.&nbsp;A model of a non-directed association between Committee and
      ClubMember</b></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="500"><tr><td><img src="../fig/CommitteeChair_DomM.svg" width="500" alt="A model of a non-directed association between Committee and ClubMember"></td></tr></table></div></div></div><br class="figure-break"><p>An information design model that contains an association without
    association end ownership dots is acceptable as a <span class="italic">relational database</span> design model, but it is
    incomplete as a design model for OOP languages.</p><p>For instance, the model of <a class="xref" href="#figCommitteChairDomM" title="Figure&nbsp;1.4.&nbsp;A model of a non-directed association between Committee and ClubMember">Figure&nbsp;1.4</a> provides a relational database design with two
    entity tables, <code class="code">committees</code> and <code class="code">clubmembers</code>, and a
    separate one-to-one relationship table
    <code class="code">committee_has_clubmember_as_chair</code>. But it does not provide a
    design for Java classes, since it does not specify how the association is
    to be implemented with the help of reference properties.</p><p>There are three options how to turn an information design model of a
    non-directed association<a class="indexterm" name="d5e488"></a> (without any association end ownership dots) into an
    information design model where all associations are either unidirectional
    or bidirectional: we can place an ownership dot at either end or at both
    ends of the association. Each of these three options defines a different
    way how to represent, or implement, the association with the help of
    reference properties. So, for the association shown in <a class="xref" href="#figCommitteChairDomM" title="Figure&nbsp;1.4.&nbsp;A model of a non-directed association between Committee and ClubMember">Figure&nbsp;1.4</a> above, we have
    the following options:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Place an ownership dot at the <code class="code">chair</code> association
        end, leading to the model shown in <a class="xref" href="#figCommitteChairAssEnd" title="Figure&nbsp;1.2.&nbsp;An association end with a &#34;dot&#34;">Figure&nbsp;1.2</a> above,
        which can be transformed into the OO class model shown in <a class="xref" href="#figCommitteChairRefProp" title="Figure&nbsp;1.1.&nbsp;A committee has a club member as chair expressed by the reference property chair">Figure&nbsp;1.1</a>
        above.</p></li><li class="listitem"><p>Place an ownership dot at the <code class="code">chairedCommittee</code>
        association end, leading to the completed models shown in <a class="xref" href="#figChairedCommitte" title="Figure&nbsp;1.8.&nbsp;Turning a functional association end into a reference property">Figure&nbsp;1.8</a> below.</p></li><li class="listitem"><p>Make the association bidirectional by placing ownership dots at
        both association ends, as shown in <a class="xref" href="#figBidirectionalCommitteClubmemberAssoc" title="Figure&nbsp;1.5.&nbsp;Modeling a bidirectional association between Committee and ClubMember">Figure&nbsp;1.5</a> with the meaning that the association is
        implemented in a redundant manner by a pair of mutually inverse
        reference properties <code class="code">Committee</code>::<code class="code">chair</code> and
        <code class="code">ClubMember</code>::<code class="code">chairedCommittee</code>, as discussed
        in <span class="phrase">the next part of our
        tutorial.</span></p><div class="figure"><a name="figBidirectionalCommitteClubmemberAssoc"></a><p class="title"><b>Figure&nbsp;1.5.&nbsp;Modeling a bidirectional association between Committee and
          ClubMember</b></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="500"><tr><td><img src="../fig/CommitteeChair_DesM3.svg" width="500" alt="Modeling a bidirectional association between Committee and ClubMember"></td></tr></table></div></div></div><br class="figure-break"></li></ol></div><p>So, whenever we have modeled an association, we have to make a
    choice, which of its ends represents a reference property and will
    therefore be marked with an ownership dot. It can be either one, or both.
    This decision also implies a decision about the <span class="italic">navigability</span><a class="indexterm" name="d5e517"></a> of the association. When an association end represents a
    reference property, this implies that it is navigable (via this
    property).</p><p>In the case of a functional association that is not one-to-one, the
    simplest design is obtained by defining the direction of the association
    according to its functionality, placing the association end ownership dot
    at the association end with the multiplicity <code class="code">0..1</code> or
    <code class="code">1</code>. For a non-directed one-to-one or many-to-many association,
    we can choose the direction as we like, that is, we can place the
    ownership dot at either association end.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e522"></a>6.&nbsp;Our Running Example</h2></div></div></div><p>The model shown in <a class="xref" href="#figPublisherBookIDM" title="Figure&nbsp;1.6.&nbsp;The Publisher-Book information design model with a unidirectional association">Figure&nbsp;1.6</a> below (about publishers and books) serves as
    our running example for a unidirectional functional association. Notice
    that it contains the unidirectional many-to-one association <span class="italic">Book</span>-<span class="bold"><strong>has</strong></span>-<span class="italic">Publisher</span>.</p><div class="figure"><a name="figPublisherBookIDM"></a><p class="title"><b>Figure&nbsp;1.6.&nbsp;The Publisher-Book information design model with a unidirectional
      association</b></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="400"><tr><td><img src="../fig/Publisher-Book_DesM.svg" width="400" alt="The Publisher-Book information design model with a unidirectional association"></td></tr></table></div></div></div><br class="figure-break"><p>We may also have to deal with a multi-valued reference property
    representing a unidirectional non-functional association. For instance,
    the unidirectional many-to-many association between <code class="code">Book</code> and
    <code class="code">Author</code> shown in <a class="xref" href="#figPublisherBookAuthorIDM" title="Figure&nbsp;1.7.&nbsp;The Publisher-Book-Author information design model with two unidirectional associations">Figure&nbsp;1.7</a> below, models a multi-valued reference
    property <code class="code">authors</code>.</p><div class="figure"><a name="figPublisherBookAuthorIDM"></a><p class="title"><b>Figure&nbsp;1.7.&nbsp;The Publisher-Book-Author information design model with two
      unidirectional associations</b></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="380"><tr><td><img src="../fig/Publisher-Book-Author_Unidir_DesM.svg" width="380" alt="The Publisher-Book-Author information design model with two unidirectional associations"></td></tr></table></div></div></div><br class="figure-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sectElimUnidirAssoc"></a>7.&nbsp;Eliminating Unidirectional Associations</h2></div></div></div><p>Since classical OO programming languages do not support associations
    as first class citizens, but only classes and reference properties
    representing unidirectional associations, we have to eliminate all
    explicit associations from general information design models for obtaining
    OO class models.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e547"></a>7.1.&nbsp;The basic elimination procedure</h3></div></div></div><p>The starting point of our restricted <span class="bold"><strong><span class="italic">association
      elimination</span></strong></span><a class="indexterm" name="d5e552"></a> procedure is an information design model with various
      kinds of unidirectional associations, such as the model shown in <a class="xref" href="#figPublisherBookIDM" title="Figure&nbsp;1.6.&nbsp;The Publisher-Book information design model with a unidirectional association">Figure&nbsp;1.6</a> above. If the
      model still contains any non-directional associations, we first have to
      turn them into directional ones by making a decision on the ownership of
      their ends, as discussed in <a class="xref" href="#sectAddingDirectionality" title="5.&nbsp;Adding Directionality to a Non-Directed Association">Section&nbsp;5</a>.</p><p>A unidirectional association<a class="indexterm" name="d5e558"></a> connecting a source with a target class is replaced with
      a corresponding reference property in its source class having
      </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>the same name as the association end, if there is any,
            otherwise it is set to the name of the target class (possibly
            pluralized, if the reference property is multi-valued);</p></li><li class="listitem"><p>the target class as its range;</p></li><li class="listitem"><p>the same multiplicity as the target association end,</p></li><li class="listitem"><p>a uniqueness constraint if the unidirectional association is
            inverse functional.</p></li></ol></div><p>This replacement procedure is illustrated for the case of a
      unidirectional one-to-one association in <a class="xref" href="#figChairedCommitte" title="Figure&nbsp;1.8.&nbsp;Turning a functional association end into a reference property">Figure&nbsp;1.8</a> below, where
      the uniqueness constraint of the reference property
      <code class="code">chairedCommittee</code> is expressed by the <code class="code">{key}</code>
      property modifier.</p><div class="figure"><a name="figChairedCommitte"></a><p class="title"><b>Figure&nbsp;1.8.&nbsp;Turning a functional association end into a reference
        property</b></p><div class="figure-contents"><div class="informaltable"><table frame="void"><tbody><tr>
              <td><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="500"><tr><td><img src="../fig/CommitteeChair_DesM2.svg" width="500" alt="Turning a functional association end into a reference property"></td></tr></table></div></td>
            </tr><tr>
              <td align="center"><div class="mediaobject"><img src="../fig/Downarrow.svg" alt="Turning a functional association end into a reference property"></div></td>
            </tr><tr>
              <td><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="480"><tr><td><img src="../fig/CommitteeChair_AFM2.svg" width="480" alt="Turning a functional association end into a reference property"></td></tr></table></div></td>
            </tr></tbody></table></div></div></div><br class="figure-break"><p>For the case of a unidirectional one-to-many association, <a class="xref" href="#figPolygonPoint" title="Figure&nbsp;1.9.&nbsp;Turning a non-functional association end into a multi-valued reference property">Figure&nbsp;1.9</a> below provides an
      illustration of the association elimination procedure. Here, the
      non-functional association end at the target class <code class="code">Point</code> is
      turned into a corresponding reference property with name
      <code class="code">points</code> obtained as the pluralized form of the target class
      name.</p><div class="figure"><a name="figPolygonPoint"></a><p class="title"><b>Figure&nbsp;1.9.&nbsp;Turning a non-functional association end into a multi-valued
          reference property</b></p><div class="figure-contents"><div class="informaltable"><table frame="void"><tbody><tr>
              <td><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="370"><tr><td><img src="../fig/Polygon-Point_DesM.svg" width="370"></td></tr></table></div></td>
            </tr><tr>
              <td align="center"><div class="mediaobject"><img src="../fig/Downarrow.svg"></div></td>
            </tr><tr>
              <td><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="320"><tr><td><img src="../fig/Polygon-Point_AFM.svg" width="320"></td></tr></table></div></td>
            </tr></tbody></table></div></div></div><br class="figure-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e617"></a>7.2.&nbsp;Eliminating associations from the design model</h3></div></div></div><p>In the case of our running example, the <span class="italic">Publisher</span>-<span class="italic">Book</span>-<span class="italic">Author</span>
      information design model, we have to replace both unidirectional
      associations with suitable reference properties. In the first step, we
      replace the many-to-one association <span class="italic">Book</span>-<span class="bold"><strong>has</strong></span>-<span class="italic">Publisher</span>
      in the model of <a class="xref" href="#figPublisherBookIDM" title="Figure&nbsp;1.6.&nbsp;The Publisher-Book information design model with a unidirectional association">Figure&nbsp;1.6</a> with a functional reference property
      <code class="code">publisher</code> in the class <code class="code">Book</code>, resulting in the
      OO class model<a class="indexterm" name="d5e629"></a> shown in <a class="xref" href="#figPublBookAFM" title="Figure&nbsp;1.10.&nbsp;An OO class model for Publisher and Book">Figure&nbsp;1.10</a>.</p><div class="figure"><a name="figPublBookAFM"></a><p class="title"><b>Figure&nbsp;1.10.&nbsp;An OO class model for <code class="code">Publisher</code> and
        <code class="code">Book</code></b></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="400"><tr><td><img src="../fig/Publisher-Book_AFM.svg" width="400" alt="An OO class model for Publisher and Book"></td></tr></table></div></div></div><br class="figure-break"><p>Notice that since the target association end of the <span class="italic">Book</span>-<span class="bold"><strong>has</strong></span>-<span class="italic">Publisher</span>
      association has the multiplicity <code class="code">0..1</code>, we have to declare
      the new property <code class="code">publisher</code> as optional by defining its
      multiplicity to be <code class="code">0..1</code>.</p><p>The meaning of this OO class model and its reference property
      <code class="code">publisher</code> can be illustrated by a sample data population
      for the two model classes <code class="code">Book</code> and <code class="code">Publisher</code>
      as presented in the following tables:</p><div class="informaltable"><table frame="box" rules="all"><thead><tr>
              <th colspan="2">Publisher</th>
            </tr><tr>
              <th>Name</th>

              <th>Address</th>
            </tr></thead><tbody><tr>
              <td>Bantam Books</td>

              <td>New York, USA</td>
            </tr><tr>
              <td>Basic Books</td>

              <td>New York, USA</td>
            </tr></tbody></table></div><p> </p><div class="informaltable"><table frame="box" rules="all"><thead><tr>
              <th colspan="4">Book</th>
            </tr><tr>
              <th>ISBN</th>

              <th>Title</th>

              <th>Year</th>

              <th>Publisher</th>
            </tr></thead><tbody><tr>
              <td>0553345842</td>

              <td>The Mind's I</td>

              <td>1982</td>

              <td>Bantam Books</td>
            </tr><tr>
              <td>1463794762</td>

              <td>The Critique of Pure Reason</td>

              <td>2011</td>

              <td></td>
            </tr><tr>
              <td>1928565379</td>

              <td>The Critique of Practical Reason</td>

              <td>2009</td>

              <td></td>
            </tr><tr>
              <td>0465030793</td>

              <td>I Am A Strange Loop</td>

              <td>2000</td>

              <td>Basic Books</td>
            </tr></tbody></table></div><p>Notice that the values of the "Publisher" column of the <span class="italic">Book</span> table are unique names that reference a
      row of the <span class="italic">Publisher</span> table. The
      "Publisher" column may not have a value for certain rows due to the fact
      that the corresponding reference property <code class="code">publisher</code> is
      optional.</p><p>In the second step, we replace the many-to-many association
      <span class="italic">Book</span>-<span class="bold"><strong>has</strong></span>-<span class="italic">Author</span> in
      the model of <a class="xref" href="#figPublisherBookAuthorIDM" title="Figure&nbsp;1.7.&nbsp;The Publisher-Book-Author information design model with two unidirectional associations">Figure&nbsp;1.7</a> with a multi-valued reference property
      <code class="code">authors</code> in the class <code class="code">Book</code>, resulting in the OO
      class model<a class="indexterm" name="d5e706"></a> shown in <a class="xref" href="#figPublBookAuthAFM" title="Figure&nbsp;1.11.&nbsp;An OO class model for the classes Book, Publisher and Author">Figure&nbsp;1.11</a>.</p><div class="figure"><a name="figPublBookAuthAFM"></a><p class="title"><b>Figure&nbsp;1.11.&nbsp;An OO class model for the classes Book, Publisher and
        Author</b></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="400"><tr><td><img src="../fig/Publisher-Book-Author_Unidir_AFM.svg" width="400" alt="An OO class model for the classes Book, Publisher and Author"></td></tr></table></div></div></div><br class="figure-break"><p>The meaning of this OO class model and its reference properties
      <code class="code">Book</code>::<code class="code">publisher</code> and
      <code class="code">Book</code>::<code class="code">authors</code> can be illustrated by sample
      data populations for the three model classes:</p><div class="informaltable"><table frame="box" rules="all"><thead><tr>
            <th colspan="2">Publisher</th>
          </tr><tr>
            <th>Name</th>

            <th>Address</th>
          </tr></thead><tbody><tr>
            <td>Bantam Books</td>

            <td>New York, USA</td>
          </tr><tr>
            <td>Basic Books</td>

            <td>New York, USA</td>
          </tr></tbody></table></div><div class="informaltable"><table frame="box" rules="all"><thead><tr>
            <th colspan="5">Book</th>
          </tr><tr>
            <th>ISBN</th>

            <th>Title</th>

            <th>Year</th>

            <th>Authors</th>

            <th>Publisher</th>
          </tr></thead><tbody><tr>
            <td>0553345842</td>

            <td>The Mind's I</td>

            <td>1982</td>

            <td>1, 2</td>

            <td>Bantam Books</td>
          </tr><tr>
            <td>1463794762</td>

            <td>The Critique of Pure Reason</td>

            <td>2011</td>

            <td>3</td>

            <td></td>
          </tr><tr>
            <td>1928565379</td>

            <td>The Critique of Practical Reason</td>

            <td>2009</td>

            <td>3</td>

            <td></td>
          </tr><tr>
            <td>0465030793</td>

            <td>I Am A Strange Loop</td>

            <td>2000</td>

            <td>2</td>

            <td>Basic Books</td>
          </tr></tbody></table></div><div class="informaltable"><table frame="box" rules="all"><thead><tr>
            <th colspan="2">Author</th>
          </tr><tr>
            <th>Author ID</th>

            <th>Name</th>
          </tr></thead><tbody><tr>
            <td>1</td>

            <td>Daniel Dennett</td>
          </tr><tr>
            <td>2</td>

            <td>Douglas Hofstadter</td>
          </tr><tr>
            <td>3</td>

            <td>Immanuel Kant</td>
          </tr></tbody></table></div><p>After the platform-independent OO class model has been completed,
      one or more platform-specific implementation models, for a choice of
      specific implementation platforms, can be derived from it. Examples of
      types of platform-specific implementation models are <span class="italic">JS class models</span>, <span class="italic">Java
      Entity class models</span> and <span class="italic">SQL table
      models</span>.</p><p>A platform-specific implementation model can still be expressed in
      the form of a UML class diagram, but it contains only modeling elements
      that can be directly coded in the chosen platform. Thus, for any
      platform considered, two guidelines are needed: 1) how to make the
      platform-specific implementation model, and 2) how to code this
      model.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sectRefPropCtrls"></a>8.&nbsp;Rendering Reference Properties in the User Interface</h2></div></div></div><p>The widgets used for data input and output in a (CRUD) data
    management user interface (UI) normally correspond to properties defined
    in a model class of an app. We have to distinguish between (various types
    of) <span class="italic">input fields</span> corresponding to
    (various kinds of) <span class="italic">attributes</span>, and
    <span class="italic">choice widgets</span> (such as <span class="italic">selection lists</span>) corresponding to <span class="italic">enumeration attributes</span> or to <span class="italic">reference properties</span>. Representing reference
    properties in the UI with <code class="code">select</code> controls, instead of
    <code class="code">input</code> fields, prevents the user from entering invalid ID
    references, so it takes care of <span class="italic">referential
    integrity</span>.</p><p>In general, a <span class="bold"><strong><span class="italic">single-valued reference
    property</span></strong></span><a class="indexterm" name="d5e805"></a> can be rendered as a single-selection list in the UI, no
    matter how many objects populate the reference property's range, from
    which one specific choice is to be made. If the cardinality of the
    reference property's range is sufficiently small (say, not greater than
    7), then we can also use a <span class="italic">radio button
    group</span> instead of a selection list.</p><p>A <span class="bold"><strong><span class="italic">multi-valued
    reference property</span></strong></span><a class="indexterm" name="d5e812"></a> can be rendered as a multiple-selection list in the UI.
    However, the corresponding multiple-<code class="code">select</code> control of HTML is
    not really usable as soon as there are many (say, more than 20) different
    options to choose from because the way it renders the choice is visually
    too scattered. In the special case of having only a few (say, no more than
    7) options, we can also use a checkbox group instead of a
    multiple-selection list. But for the general case of having in the UI a
    list containing all associated objects chosen from the reference
    property's range class, we need to develop a special UI widget that allows
    to add (and remove) objects to (and from) a list of chosen objects.</p><p>Such a <span class="italic"><span class="bold"><strong>multi-selection
    widget</strong></span></span><a class="indexterm" name="d5e819"></a> consists of</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>an HTML list element containing the selected (associated)
        objects, where each list item has a push button for removing the
        object from the selection;</p></li><li class="listitem"><p>a single-<code class="code">select</code> control that, in combination with a
        push button, allows to add a new associated object from the range
        class of the multi-valued reference property.</p></li></ol></div><div class="figure"><a name="d5e827"></a><p class="title"><b>Figure&nbsp;1.12.&nbsp;A multi-selection widget showing two associated authors</b></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="486"><tr style="height: 182px"><td><img src="../fig/Multiple-Choice-Widget.png" height="182" alt="A multi-selection widget showing two associated authors"></td></tr></table></div></div></div><br class="figure-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e832"></a>9.&nbsp;Quiz Questions</h2></div></div></div><p>If you would like to look up the answers for the following quiz
    questions, you can check our <a class="link" href="../../forum/14.html" target="_top">discussion forum</a>.
    If you don't find an answer in the forum, you may create a post asking for
    an answer to a particular question.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e836"></a>9.1.&nbsp;Question 1: Meaning of "one-to-one"</h3></div></div></div><p>What does it mean to say that an association is "one-to-one"? It
      means that it is (select one):</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>O Bidirectional</p></li><li class="listitem"><p>O Both functional and total</p></li><li class="listitem"><p>O Functional</p></li><li class="listitem"><p>O Both functional and inverse functional</p></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e848"></a>9.2.&nbsp;Question 2: When to Check Referential Integrity</h3></div></div></div><p>A referential integrity constraint for a reference property p with
      domain class C and range class D has to be checked whenever (select one
      or many):</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>&#9744; An object of type C is destroyed.</p></li><li class="listitem"><p>&#9744; The value of p is changed for some object of type C.</p></li><li class="listitem"><p>&#9744; A new object of type C is created.</p></li><li class="listitem"><p>&#9744; An object of type D is destroyed.</p></li><li class="listitem"><p>&#9744; A new object of type D is created.</p></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e862"></a>9.3.&nbsp;Question 3: Meaning of "Functional"</h3></div></div></div><p>A unidirectional binary association is functional if and only if
      (select one):</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>O Each object of the source class is linked to at most one
          object of the target class.</p></li><li class="listitem"><p>O Each object of the target class is linked to at most one
          object of the source class.</p></li><li class="listitem"><p>O Each object of the source class is linked to at least one
          object of the target class.</p></li><li class="listitem"><p>O Each object of the source class is linked to exactly one
          object of the target class.</p></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e874"></a>9.4.&nbsp;Question 4: Object Destruction Dependency</h3></div></div></div><p>Assume that we have an object type <code class="code">B</code> with a standard
      identifier attribute <code class="code">id</code> and an object type <code class="code">A</code>
      with an ID reference attribute <code class="code">b_id</code> referencing
      <code class="code">B::id</code>. Further, assume that there is an object
      <code class="code">b</code> of type <code class="code">B</code> with <code class="code">b.id = 11</code> and an
      object <code class="code">a</code> of type <code class="code">A</code> referencing <code class="code">b</code>
      with <code class="code">a.b_id = 11</code>. Which of the following statements are
      correct? Select one or many:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>&#9744; The object <code class="code">b</code> can be destroyed when the ID
          reference in object <code class="code">a</code> is unassigned (by setting
          <code class="code">a.b_id</code> to <code class="code">undefined</code> in JS or to
          <code class="code">null</code> in Java) and there is no other object that
          references <code class="code">b</code>.</p></li><li class="listitem"><p>&#9744; The object <code class="code">a</code> can only be destroyed when
          <code class="code">b</code> has been destroyed before.</p></li><li class="listitem"><p>&#9744; The object <code class="code">b</code> can be destroyed when the ID
          reference in object <code class="code">a</code> is reset to another object of
          type <code class="code">B</code>, e.g. by setting <code class="code">a.b_id = 7</code> and
          there is no other object that references <code class="code">b</code>.</p></li><li class="listitem"><p>&#9744; The object <code class="code">b</code> can be destroyed when
          <code class="code">a</code> has been destroyed before.</p></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e913"></a>9.5.&nbsp;Question 5: Rendering a Single-Valued Reference Property</h3></div></div></div><p>Which of the following statements about a <span class="italic"><span class="bold"><strong>single-valued</strong></span> reference
      property</span> <span class="italic">p</span> and how it
      should be rendered in a web user interface by a suitable form control
      are correct? Select one or many:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>&#9744; An adequate rendering is obtained by using an
          <code class="code">input</code> control with <code class="code">type="text"</code>.</p></li><li class="listitem"><p>&#9744; If the cardinality of <span class="italic">p</span>'s
          range is not greater than 7, it can be rendered by a <span class="italic">check button group</span>.</p></li><li class="listitem"><p>&#9744; If the cardinality of <span class="italic">p</span>'s
          range is not greater than 7, it can be rendered by a <span class="italic">radio button group</span>.</p></li><li class="listitem"><p>&#9744; It can always be rendered by a single-<code class="code">select</code>
          control.</p></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e935"></a>9.6.&nbsp;Question 6: Expressing a Functionality Type</h3></div></div></div><p>Which of the following terms can be used for expressing that an
      association is neither functional nor inverse functional?</p><p>O one-to-one&#8195;O one-to-many&#8195;O many-to-one&#8195;O many-to-many</p></div></div></div><div lang="" class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chJsUnidirFunAss"></a>Chapter&nbsp;2.&nbsp;Implementing Unidirectional Functional Associations with Plain
  JS</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#sectImplemSingleRefProp">1. Implementing Single-Valued Reference Properties</a></span></dt><dt><span class="section"><a href="#secUnidirFunAss">2. Make a JS Class Model</a></span></dt><dt><span class="section"><a href="#d5e1052">3. New Issues</a></span></dt><dt><span class="section"><a href="#d5e1088">4. Code the Model</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e1091">4.1. Summary</a></span></dt><dt><span class="section"><a href="#d5e1107">4.2. Code each model class as a JS class</a></span></dt><dt><span class="section"><a href="#d5e1138">4.3. Code the property checks</a></span></dt><dt><span class="section"><a href="#d5e1173">4.4. Code the property setters</a></span></dt><dt><span class="section"><a href="#d5e1180">4.5. Choose and implement a deletion policy</a></span></dt><dt><span class="section"><a href="#d5e1206">4.6. Serialization functions</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e1222">5. Code the View</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e1316">5.1. Setting up the <span class="italic">Retrieve/List
      All</span> user interface</a></span></dt><dt><span class="section"><a href="#d5e1326">5.2. Setting up the <span class="italic">Create</span> and
      <span class="italic">Update</span> user interfaces</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e1357">6. Quiz Questions</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e1359">6.1. Question 1: Single-valued reference property</a></span></dt><dt><span class="section"><a href="#d5e1378">6.2. Question 2: Implementing the CASCADE deletion policy</a></span></dt><dt><span class="section"><a href="#d5e1392">6.3. Question 3: JS class model</a></span></dt></dl></dd></dl></div><p>The three example apps that we have discussed
  in previous parts of this tutorial, the <span class="italic">minimal
  app</span>, the <span class="italic">validation app</span>, and
  the <span class="italic">enumeration app</span>, have been limited to
  managing the data of one object type only. A real app, however, has to
  manage the data of several object types, which are typically related to each
  other in various ways. In particular, there may be <span class="bold"><strong><span class="italic">associations</span></strong></span> and
  <span class="bold"><strong><span class="italic">subtype</span></strong></span>
  (inheritance) relationships between object types. Handling associations and
  subtype relationships are advanced issues in software application
  engineering. They are often not sufficiently discussed in text books and not
  well supported by application development frameworks.</p><p>A unidirectional <span class="italic">functional</span>
  association is either one-to-one or many-to-one. In both cases such an
  association is represented, or implemented, with the help of a <span class="italic">single-valued</span> reference property.</p><p>In this chapter, we show</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>how to derive a plain JS class model from an OO class model with
        single-valued reference properties representing <span class="italic">unidirectional functional
        associations</span>,</p></li><li class="listitem"><p>how to code the JS class model in the form of plain JavaScript
        model classes,</p></li><li class="listitem"><p>how to write the view and controller code based on the model
        code.</p></li></ol></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sectImplemSingleRefProp"></a>1.&nbsp;Implementing Single-Valued Reference Properties</h2></div></div></div><p>When coding a class, the ES2015 feature of <span class="italic">function parameter destructuring</span> allows using a
    single constructor parameter that is a record with a simplified syntax for
    defining its fields. We make use of this new feature for obtaining a
    simplified class definition syntax illustrated by the following
    example:</p><pre class="programlisting">class <span class="bold"><strong>Book</strong></span> {
  constructor ({isbn, title, year, ...}) {
    this.isbn = isbn;
    this.title = title;
    this.year = year;
    ...
  }
  ...
}</pre><p>A single-valued reference property, such as the property
    <code class="code">publisher</code> of the object type <code class="code">Book</code>, allows
    storing internal references to objects of another type, such as
    <code class="code">Publisher</code>. When creating a new object, the constructor
    function needs to have a parameter for allowing to assign a suitable value
    to the reference property. In a typed programming language, such as Java,
    we would have to take a decision if this value is expected to be an
    (internal) object reference or an (external) ID reference. In JavaScript,
    however, we can take a more flexible approach and allow using either of
    them, as shown in the following example:</p><pre class="programlisting">class <span class="bold"><strong>Book</strong></span> {
  constructor ({isbn, title, year,
      publisher, publisher_id}) {
    ...
    // assign object reference or ID reference
    if (publisher || publisher_id)  {
      this.publisher = publisher || publisher_id;
    }
    ...
  }
  ...
}</pre><p>Notice that the record parameter's <code class="code">publisher</code> field
    represents a JS object reference while its <code class="code">publisher_id</code> field
    represents an ID reference. In JavaScript, we can use a disjunctive
    expression like <code class="code">expr1 || expr2</code> for getting the value of the
    first expression, if it is defined (and not 0), or else the value of the
    second expression. We handle the resulting ambiguity in the property
    setter by checking the type of the argument as shown in the following code
    fragment:</p><pre class="programlisting"><span class="bold"><strong>set publisher</strong></span>(p) {
  var publisher_id = "";
  // p can be an ID reference or an object reference 
  publisher_id = (typeof p !==  "object") ? p : p.name;
  ...
  this._publisher = Publisher.instances[ publisher_id];
  ...
}</pre><p>Notice that the <code class="code">name</code> of a publisher is used as an ID
    reference, since it is the standard ID of the <code class="code">Publisher</code>
    class.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="secUnidirFunAss"></a>2.&nbsp;Make a JS Class Model</h2></div></div></div><p>The starting point for making a JS class model<a class="indexterm" name="d5e986"></a> is an OO class model like the one shown in <a class="xref" href="#figPublBookAFM" title="Figure&nbsp;1.10.&nbsp;An OO class model for Publisher and Book">Figure&nbsp;1.10</a>.</p><p>We now show how to derive a JS class model from this OO class model
    in four steps. For each class in the OO class model:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Add a &laquo;get/set&raquo; stereotype to all (non-derived) single-valued
        properties, implying that they have implicit getters and setters.
        Recall that in the setter, the corresponding check operation is
        invoked and the property is only set, if the check does not detect any
        constraint violation.</p></li><li class="listitem"><p>Create a <span class="bold"><strong>check</strong></span> operation for
        each (non-derived) property in order to have a central place for
        implementing <span class="italic"><span class="bold"><strong>property
        constraints</strong></span></span>. For a standard ID attribute (such
        as <code class="code">Book::isbn</code>), two or three check operations are
        needed:</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>A basic check operation, like <code class="code">checkIsbn</code>, for
              checking all syntactic constraints, but not the <span class="italic">mandatory value</span> and the <span class="italic">uniqueness</span> constraints.</p></li><li class="listitem"><p>A standard ID check operation, like
              <code class="code">checkIsbnAsId</code>, for checking the <span class="italic">mandatory value</span> and <span class="italic">uniqueness</span> constraints that are implied
              by a standard ID attribute.</p></li><li class="listitem"><p>If other classes have a reference property that references
              the class under consideration, add an <span class="italic">ID
              reference</span> check operation for checking the <span class="italic">referential integrity</span> constraint
              imposed on <span class="italic">ID reference</span> (or
              <span class="italic">foreign key</span>) attributes. For
              instance, since the <code class="code">Book::publisher</code> property
              references <code class="code">Publisher</code> objects, we need a
              <code class="code">checkNameAsIdRef</code> operation in the
              <code class="code">Publisher</code> class.</p></li></ol></div><p>For a reference property, such as
        <code class="code">Book::publisher</code>, the check operation,
        <code class="code">Book.checkPublisher</code>, has to check the implied <span class="italic">referential integrity constraint</span> by invoking
        <code class="code">Publisher.checkNameAsIdRef</code>, and possibly also a <span class="italic">mandatory value constraint</span>, if the property
        is mandatory.</p></li></ol></div><p>This leads to the following JS class model for <code class="code">Book</code>,
    where the class-level ('static') methods are shown underlined:</p><div class="informaltable"><table frame="void"><tbody><tr>
          <td><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="150"><tr><td><img src="../fig/Book-Unidir-Func_AFM.svg" width="150"></td></tr></table></div></td>

          <td><div class="mediaobject"><img src="../fig/Rightarrow.png"></div></td>

          <td><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="300"><tr><td><img src="../fig/Book-Unidir-Func_JsM.svg" width="300"></td></tr></table></div></td>
        </tr></tbody></table></div><p>We have to perform a similar transformation also for the class
    <code class="code">Publisher</code>. This gives us the complete JS class model derived
    from the above OO class model, as depicted in the following class
    diagram.</p><div class="figure"><a name="PublBookJsM"></a><p class="title"><b>Figure&nbsp;2.1.&nbsp;A JS class model defining the classes <code class="code">Book</code> and
        <code class="code">Publisher</code></b></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="300"><tr><td><img src="../fig/Publisher-Book_JsM.svg" width="300"></td></tr></table></div></div></div><br class="figure-break"></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e1052"></a>3.&nbsp;New Issues</h2></div></div></div><p>Compared to the validation and enumeration apps discussed in <span class="phrase"><a class="link" href="validation-tutorial.html" target="_top">Part
    2</a> and <a class="link" href="enumeration-tutorial.html" target="_top">Part
    3</a> of our tutorial</span> , we have to deal with a number of
    new technical issues:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>In the <span class="italic">model</span> code we now have
        to take care of <span class="bold"><strong><span class="italic">reference properties</span></strong></span> that
        require</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>maintaining <span class="italic"><span class="bold"><strong>referential integrity</strong></span></span>;</p></li><li class="listitem"><p>choosing and implementing one of the two possible deletion
            policies discussed in <a class="xref" href="#chRefPropUniAss_sectRefIntegrity" title="2.&nbsp;Referential Integrity">Section&nbsp;2</a> for managing the corresponding object
            destruction dependency in the <code class="code">destroy</code> method of the
            property's range class;</p></li><li class="listitem"><p>conversion between internal object references and external
            ID references in the serialization functions
            <code class="code">toString()</code> and <code class="code">toJSON()</code>, as well as in
            the constructor function.</p></li></ol></div></li><li class="listitem"><p>In the <span class="italic">user interface
        ("view")</span> code we now have to take care of</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>showing information about associated objects in the
              <span class="italic">Retrieve/List</span> use
              case;</p></li><li class="listitem"><p>allowing to select an object from a list of all existing
              instances of the association's target class and add it to, or
              remove an object from, a list of associated objects, in the
              <span class="italic">Create</span> and <span class="italic">Update</span> use cases.</p></li></ol></div></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e1088"></a>4.&nbsp;Code the Model</h2></div></div></div><p>The JS class model can be directly coded for getting the JS model
    classes of our app.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1091"></a>4.1.&nbsp;Summary</h3></div></div></div><p>Code each class of the JS class model as a JS class with implicit
      getters and setters:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Code the property check functions in the form of class-level
          ('static') methods. Take care that all constraints of a property as
          specified in the JS class model are properly coded in the property
          checks.</p></li><li class="listitem"><p>For each single-valued property, code the specified get and
          set methods such that in each setter, the corresponding property
          check is invoked and the property is only set/unset, if the check
          does not detect any constraint violation.</p></li><li class="listitem"><p>Write the code of the serialization functions
          <code class="code">toString()</code> and <code class="code">toJSON()</code>.</p></li><li class="listitem"><p>Take care of deletion dependencies in the <code class="code">destroy</code>
          method.</p></li></ol></div><p>These steps are discussed in more detail in the following
      sections.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1107"></a>4.2.&nbsp;Code each model class as a JS class</h3></div></div></div><p>Each class <code class="code">C</code> of the JS class model is coded as a JS
      class with the same name <code class="code">C</code> and a constructor having a
      single record parameter, which specifies a field for each (non-derived)
      property of the class. The range of these properties can be indicated in
      a comment. In the case of a reference property the range is another
      model class.</p><p>In the constructor body, we assign the fields of the record
      parameter to corresponding properties. These property assignments invoke
      the corresponding <span class="italic">setter</span>
      methods.</p><p>For instance, the <code class="code">Publisher</code> class from the JS class
      model is coded in the following way:</p><pre class="programlisting">class <span class="bold"><strong>Publisher</strong></span> {
  constructor ({name, address}) {
    this.name = name;  // string
    this.address = address;  // string
  }
  ...
};</pre><p>Since the setters may throw constraint violation exceptions, the
      constructor function, and any setter, should be called in a try-catch
      block where the catch clause takes care of logging suitable error
      messages.</p><p>For each model class <code class="code">C</code>, we define a class-level
      property <code class="code">C.instances</code> representing the collection of all
      <code class="code">C</code> instances managed by the application in the form of an
      entity table (a map of records). This property is initially set to an
      empty map <code class="code">{}</code>. For instance, in the case of the model class
      <code class="code">Publisher</code>, we define:</p><pre class="programlisting">Publisher.<span class="bold"><strong>instances</strong></span> = {};</pre><p>The <code class="code">Book</code> class from the JS class model is coded in a
      similar way:</p><pre class="programlisting">class <span class="bold"><strong>Book</strong></span> {
  constructor ({isbn, title, year, authors, authorIdRefs, 
      publisher, publisher_id}) {
    this.isbn = isbn;  // string
    this.title = title;  // string
    this.year = year;  // integer
    this.authors = authors || authorIdRefs;  // Array
    if (publisher || publisher_id) {
      this.publisher = publisher || publisher_id;  // ref|string
    }
  }
  ...
}</pre><p>Notice that the <code class="code">Book</code> constructor can be invoked
      either with object references <code class="code">authors</code> and
      <code class="code">publisher</code> or with ID references <code class="code">authorIdRefs</code>
      and <code class="code">publisher_id</code> (the type hint "ref|string" means that the
      property's range is either an object reference or a string). This
      approach makes using the <code class="code">Book</code> constructor more flexible and
      more robust.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1138"></a>4.3.&nbsp;Code the property checks</h3></div></div></div><p>Take care that all constraints of a property as specified in the
      JS class model are properly coded in its check function, as explained in
      <span class="phrase"><a class="link" href="validation-tutorial.html" target="_top">Part
      2</a> of tour tutorial</span>  . Recall that
      constraint violation (or validation error) classes are defined in the
      module file <code class="filename">lib/errorTypes.mjs</code>.</p><p>For instance, for the <code class="code">Publisher.checkName</code> function we
      obtain the following code:</p><pre class="programlisting">class <span class="bold"><strong>Publisher</strong></span> {
  ...
  static <span class="bold"><strong>checkName</strong></span>(n) {
    if (n === undefined) {
      return new NoConstraintViolation();  // not mandatory
    } else {
      if (typeof n !== "string" || n.trim() === "") {
        return new RangeConstraintViolation(
		    "The name must be a non-empty string!");
      } else {
        return new NoConstraintViolation();
      }
    }
  }
  static <span class="bold"><strong>checkNameAsId</strong></span>(n) {...}
  ...
}</pre><p>Notice that, since the <code class="code">name</code> attribute is the standard
      ID attribute of <code class="code">Publisher</code>, we only check syntactic
      constraints in <code class="code">checkName</code>, and check the mandatory value and
      uniqueness constraints in <code class="code">checkNameAsId</code>, which invokes
      <code class="code">checkName</code>:</p><pre class="programlisting">static <span class="bold"><strong>checkNameAsId</strong></span>( n) {
  var validationResult = Publisher.checkName(n);
  if ((validationResult instanceof NoConstraintViolation)) {
    if (!n) {
      return new MandatoryValueConstraintViolation(
          "A publisher name is required!");
    } else if (Publisher.instances[n]) {
      return UniquenessConstraintViolation(
          "There is already a publisher record with this name!");
    }
  } 
  return validationResult;
}</pre><p>If we have to deal with ID references (foreign keys) in other
      classes, we need to provide a further check function, called
      <code class="code">checkNameAsIdRef</code>, for checking the referential integrity
      constraint:</p><pre class="programlisting">static <span class="bold"><strong>checkNameAsIdRef</strong></span>(n) {
  var validationResult = Publisher.checkName(n);
  if ((validationResult instanceof NoConstraintViolation) &amp;&amp;
      n !== undefined) {
    if (!Publisher.instances[n]) {
      validationResult = new ReferentialIntegrityConstraintViolation(
          "There is no publisher record with this name!");
    }
  }
  return validationResult;
}</pre><p>The condition <code class="code">!Publisher.instances[n]</code> checks if there
      is no publisher object with the given name <code class="code">n</code>, and then
      creates a <code class="code">validationResult</code> object as an instance of the
      exception class <span class="italic">ReferentialIntegrityConstraintViolation</span>. The
      <code class="code">Publisher.checkNameAsIdRef</code> function is called by the
      <code class="code">Book.checkPublisher</code> function:</p><pre class="programlisting">class <span class="bold"><strong>Book</strong></span> {
  ...
  static <span class="bold"><strong>checkPublisher</strong></span>( publisher_id) {
    var validationResult = null;
    if (publisher_id === undefined || publisher_id === "") {
      validationResult = new NoConstraintViolation();  // optional
    } else {
      // invoke foreign key constraint check
      validationResult = <span class="bold"><strong>Publisher.checkNameAsIdRef</strong></span>( publisher_id);
    }
    return validationResult;
  }
  ...
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1173"></a>4.4.&nbsp;Code the property setters</h3></div></div></div><p>In the setters, the corresponding check function is called and the
      property is only set, if the check does not detect any constraint
      violation. In the case of a reference property, we allow invoking the
      setter either with an object reference or with an ID reference. The
      resulting ambiguity is resolved by testing if the argument provided in
      the invocation of the setter is an object or not. For instance, the
      <code class="code">publisher</code> setter is coded in the following way:</p><pre class="programlisting">class <span class="bold"><strong>Book</strong></span> {
  ...
  set <span class="bold"><strong>publisher</strong></span>( p) {
    if (!p) {  // unset publisher
      delete this._publisher;
    } else {
      // p can be an ID reference or an object reference
      const publisher_id = (typeof p !== "object") ? p : p.name;
      const validationResult = Book.checkPublisher( publisher_id);
      if (validationResult instanceof NoConstraintViolation) {
        // create the new publisher reference
        this._publisher = Publisher.instances[ publisher_id];
      } else {
        throw validationResult;
      }
    }
  }
  ...
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1180"></a>4.5.&nbsp;Choose and implement a deletion policy</h3></div></div></div><p>For any reference property, we have to choose and implement one of
      the two possible deletion policies discussed in <a class="xref" href="#chRefPropUniAss_sectRefIntegrity" title="2.&nbsp;Referential Integrity">Section&nbsp;2</a>
      for managing the corresponding object destruction dependency in the
      <code class="code">destroy</code> method of the property's range class. In our case,
      when deleting a record of a publisher <span class="emphasis"><em>p</em></span>, we have to
      choose between </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>deleting all records of books published by
            <span class="emphasis"><em>p</em></span> (<span class="italic">Existential
            Dependency</span>);</p></li><li class="listitem"><p>dropping the reference to <span class="emphasis"><em>p</em></span> from all
            books published by <span class="emphasis"><em>p</em></span> (<span class="italic">Existential Independence</span>).</p></li></ol></div><p>Assuming that books do not existentially depend on their
      publishers, we choose the second option. This is shown in the following
      code of the <code class="code">Publisher.destroy</code> method where for all
      concerned <code class="code">book</code> objects the property
      <code class="code">book.publisher</code> is cleared (by deleting its property-value
      slot):</p><pre class="programlisting">Publisher.<span class="bold"><strong>destroy</strong></span> = function (name) {
  // delete all references to this publisher in book objects
  for (const key of Object.keys( Book.instances)) {
    const book = Book.instances[key];
    if (book.publisher.name === name) {
      <span class="bold"><strong>delete book._publisher</strong></span>;  // delete the proporty-value slot
    }
  }
  // delete the publisher object
  <span class="bold"><strong>delete Publisher.instances[name]</strong></span>;
  console.log(`Publisher ${name} deleted.`);
};</pre><p>Notice that the deletion of all references to the deleted
      publisher is performed in a sequential scan through all book objects,
      which may be inefficient when there are many of them. It would be much
      more efficient when each publisher object would hold a list of
      references to all books published by this publisher. Creating and
      maintaining such a list would make the association between books and
      their publisher <span class="italic">bidirectional</span>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1206"></a>4.6.&nbsp;Serialization functions</h3></div></div></div><p>In the case of a reference property, like
      <code class="code">Book::publisher</code>, the serialization function
      <code class="code">Book::toString()</code> has to show a human-readable identifier of
      the referenced object, like <code class="code">this.publisher.name</code>:</p><pre class="programlisting"><span class="bold"><strong>toString</strong></span>() {
  var bookStr = `Book{ ISBN: ${this.isbn}, title: ${this.title},` +
      `year: ${this.year}`;
  if (this.publisher) bookStr += `, publisher: ${<span class="bold"><strong>this.publisher.name</strong></span>}`;
  return `${bookStr}, authors: ${Object.keys( this.authors).join(",")} }`;
}</pre><p>The object-to-storage conversion function
      <code class="code">Book::toJSON()</code>, which is automatically invoked by the
      built-in JSON.stringify function, converts typed JS objects with object
      references to corresponding (untyped) record objects with ID references.
      This includes deleting the underscore prefix for obtaining the
      corresponding record field name:</p><pre class="programlisting"><span class="bold"><strong>toJSON</strong></span>() {
  var rec = {};
  for (const p of Object.keys( this)) {
    // copy only property slots with underscore prefix
    if (p.charAt(0) !== "_") continue;
    switch (p) {
    case "_publisher":
      // convert object reference to ID reference
      if (this._publisher) rec.<span class="bold"><strong>publisher_id</strong></span> = this._publisher.name;
      break;
    default:
      // remove underscore prefix
      rec[p.substr(1)] = this[p];
    }
  }
  return rec;
}</pre><p>The inverse conversion, from untyped record objects with ID
      references to corresponding typed objects with object references, is
      performed by the <code class="code">Book</code> constructor, which tolerates both ID
      references and object references as arguments for setting reference
      properties.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e1222"></a>5.&nbsp;Code the View</h2></div></div></div><p>The user interface (UI) consists of a start page
    <code class="filename">index.html</code> that allows navigating to data management
    UI pages, one for each object type (in our example,
    <code class="filename">books.html</code> and <code class="filename">publishers.html</code>),
    and one data management UI code file for each object type (in our example,
    <code class="filename">books.mjs</code> and <code class="filename">publishers.mjs</code>).
    Each data management UI page contains 5 sections: a <span class="italic">Manage</span> section, like <span class="italic">Manage books</span>, with a menu for choosing a CRUD use
    case, and a section for each CRUD use case, like <span class="italic">Retrieve/list all books</span>, <span class="italic">Create book</span>, <span class="italic">Update
    book</span> and <span class="italic">Delete book</span>, such
    that only one of them is displayed at any time (by setting the CSS
    property <code class="code">display:none</code> for all others).</p><p>Each UI code file for managing the data of an object type O has the
    following parts (code blocks):</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Import classes, datatypes and utility procedures.</p></li><li class="listitem"><p>Load the required data from the database.</p></li><li class="listitem"><p>Set up a few general, use-case-independent UI elements.</p></li><li class="listitem"><p><span class="italic">Retrieve O</span>: add an event
        listener for the menu item <span class="italic">Retrieve
        all</span> in the Manage UI for creating, and activating, the
        table view in the Retrieve UI.</p></li><li class="listitem"><p><span class="italic">Create O</span>: add event
        listeners</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>for the menu item <span class="italic">Create</span>
            in the Manage UI for populating the Create UI's choice
            widgets,</p></li><li class="listitem"><p>for responsive constraint validation per input field,</p></li><li class="listitem"><p>for the <span class="italic">Save</span> button for
            creating a new O record.</p></li></ol></div></li><li class="listitem"><p><span class="italic">Update O</span>: add event
        listeners</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>for the menu item <span class="italic">Update</span>
            in the Manage UI for populating the Update UI's
            <code class="code">select</code> element, which allows selecting the O record
            to be updated,</p></li><li class="listitem"><p>for O selection events (more precisely, for
            <code class="code">change</code> events of the <code class="code">select</code> field) for
            filling out the Update UI's fields with the property values of the
            selected O,</p></li><li class="listitem"><p>for responsive constraint validation per input field,</p></li><li class="listitem"><p>for the <span class="italic">Save</span> button for
            updating an existing O record.</p></li></ol></div></li><li class="listitem"><p><span class="italic">Delete O</span>: add event
        listeners</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>for the menu item <span class="italic">Delete</span>
            in the Manage UI for populating the Update UI's
            <code class="code">select</code> element, which allows selecting the O record
            to be updated,</p></li><li class="listitem"><p>for O selection events (more precisely, for
            <code class="code">change</code> events of the <code class="code">select</code> field) for
            filling out the Delete UI's fields with the property values of the
            selected O,</p></li><li class="listitem"><p>for the <span class="italic">Delete</span> button for
            deleting an existing O record.</p></li></ol></div></li></ol></div><p>For instance, in <code class="filename">books.mjs</code>, for managing book
    data, we have the following first three code blocks:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Import classes, datatypes and utility procedures:</p><pre class="programlisting">import Author from "../m/Author.mjs";
import Publisher from "../m/Publisher.mjs";
import Book from "../m/Book.mjs";
import { fillSelectWithOptions, createListFromMap, 
    createMultipleChoiceWidget } from "../../lib/util.mjs";</pre></li><li class="listitem"><p>Load data:</p><pre class="programlisting">Author.retrieveAll();
Publisher.retrieveAll();
Book.retrieveAll();</pre></li><li class="listitem"><p>Set up general, use-case-independent UI elements:</p><pre class="programlisting">// set up back-to-menu buttons for all CRUD UIs
for (const btn of document.querySelectorAll("button.back-to-menu")) {
  btn.addEventListener("click", refreshManageDataUI);
}
// neutralize the submit event for all CRUD UIs
for (const frm of document.querySelectorAll("section &gt; form")) {
  frm.addEventListener("submit", function (e) {
    e.preventDefault();
    frm.reset();
  });
}
// save data when leaving the page
window.addEventListener("beforeunload", Book.saveAll);</pre></li></ol></div><p>In <code class="filename">books.html</code>, there is the following menu for
    choosing a CRUD operation:</p><pre class="programlisting">&lt;section id="Book-M" class="UI-Page"&gt;
  &lt;h1&gt;Manage book data&lt;/h1&gt;
  &lt;ul class="menu"&gt;
	&lt;li&gt;&lt;button type="button" id="RetrieveAndListAll"&gt;<span class="bold"><strong>Retrieve</strong></span>/list 
            all book records&lt;/button&gt;&lt;/li&gt;
	&lt;li&gt;&lt;button type="button" id="Create"&gt;<span class="bold"><strong>Create</strong></span> 
          a new book record&lt;/button&gt;&lt;/li&gt;
	&lt;li&gt;&lt;button type="button" id="Update"&gt;<span class="bold"><strong>Update</strong></span> 
            a book record&lt;/button&gt;&lt;/li&gt;
	&lt;li&gt;&lt;button type="button" id="Delete"&gt;<span class="bold"><strong>Delete</strong></span> 
            a book record&lt;/button&gt;&lt;/li&gt;
  &lt;/ul&gt;
  &lt;div class="button"&gt;&lt;a href="index.html"&gt;Back to Main menu&lt;/a&gt;&lt;/div&gt;
&lt;/section&gt;</pre><p>For each of these CRUD buttons we add an event listener that takes
    care of setting up the corresponding UI. For instance, for "Retrieve/list
    all", we have the following code in <code class="filename">books.mjs</code>:</p><pre class="programlisting">document.getElementById("<span class="bold"><strong>RetrieveAndListAll</strong></span>")
    .addEventListener("click", function () {
  document.getElementById("Book-M").style.display = "none";
  document.getElementById("Book-R").style.display = "block";
  ...  // set up the UI for Retrieve/list all
});</pre><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1316"></a>5.1.&nbsp;Setting up the <span class="italic">Retrieve/List
      All</span> user interface</h3></div></div></div><p>In our example, we have only one reference property,
      <code class="code">Book::publisher</code>, which is functional and optional. For
      showing information about the publisher of a book in the view table of
      the <span class="italic">Retrieve/list all</span> user interface,
      the corresponding cell in the HTML table is filled with the name of the
      publisher, if there is any (in <code class="filename">books.mjs</code>):</p><pre class="programlisting">const tableBodyEl = document.
      querySelector("section#Book-R &gt; table &gt; tbody");
tableBodyEl.innerHTML = "";  // drop old content
for (const key of Object.keys( Book.instances)) {
  const book = Book.instances[key];
  const row = tableBodyEl.insertRow();
  row.insertCell().textContent = book.isbn;
  row.insertCell().textContent = book.title;
  row.insertCell().textContent = book.year;
  // if the book has a publisher, show its name
  row.insertCell().textContent =
    book.publisher ? <span class="bold"><strong>book.publisher.name</strong></span> : "";
}</pre><p>For a multi-valued reference property, the table cell would have
      to be filled with a list of all associated objects referenced by the
      property.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1326"></a>5.2.&nbsp;Setting up the <span class="italic">Create</span> and
      <span class="italic">Update</span> user interfaces</h3></div></div></div><p>For allowing to select associated objects in the <span class="italic">Create</span> and <span class="italic">Update</span> user interfaces, a selection list (i.e.,
      a HTML <code class="code">select</code> element) is populated with
      <code class="code">option</code> elements formed from the instances of the associated
      object type with the help of a utility method
      <code class="code">fillSelectWithOptions</code>. The <code class="code">select</code> element is
      defined in the <code class="filename">books.html</code> view file:</p><pre class="programlisting">&lt;section id="Book-C" class="UI-Page"&gt;
 &lt;h1&gt;Public Library: Create a new book record&lt;/h1&gt;
 &lt;form&gt;
  ... 
  &lt;div class="select-one"&gt;
   &lt;label&gt;Publisher: &lt;<span class="bold"><strong>select</strong></span> name="selectPublisher"&gt;&lt;/select&gt;&lt;/label&gt;
  &lt;/div&gt;
  ...
 &lt;/form&gt;
&lt;/section&gt;</pre><p>The <span class="italic">Create</span> UI is set up by
      populating a selection list for selecting the publisher with the help of
      a utility method <code class="code">fillSelectWithOptions</code> as shown in the
      following program listing:</p><pre class="programlisting">const createFormEl = document.querySelector("section#Book-C &gt; form");
const selectPublisherEl = createFormEl.selectPublisher;
document.getElementById("<span class="bold"><strong>Create</strong></span>").addEventListener("click", function () {
  document.getElementById("Book-M").style.display = "none";
  document.getElementById("Book-C").style.display = "block";
  // set up a single selection list for selecting a publisher
  <span class="bold"><strong>fillSelectWithOptions</strong></span>( selectPublisherEl, <span class="bold"><strong>Publisher.instances</strong></span>, "name");
  createFormEl.reset();
});
// set up event handlers for responsive constraint validation
...
// handle Save button click events
createFormEl["commit"].addEventListener("click", function () {
  ...
});</pre><p>When the user pushes the <span class="italic">Save</span>
      button, all form control values, including the value of the
      <code class="code">select</code> field, are copied to a <code class="code">slots</code> record,
      which is used as the argument for invoking the <code class="code">add</code> method
      after all form fields have been checked for validity, as shown in the
      following program listing:</p><pre class="programlisting">// handle Save button click events
createFormEl["commit"].addEventListener("click", function () {
  const <span class="bold"><strong>slots</strong></span> = {
    isbn: createFormEl.isbn.value,
    title: createFormEl.title.value,
    year: createFormEl.year.value,
    publisher_id: createFormEl.selectPublisher.value
  };
  // check all input fields and show error messages
  createFormEl.isbn.setCustomValidity(
      Book.checkIsbnAsId( slots.isbn).message);
  // save the input data only if all form fields are valid
  if (createFormEl.checkValidity()) {
    <span class="bold"><strong>Book.add</strong></span>( slots);
  }
});</pre><p>The code for setting up the <span class="italic">Update</span> user interface is similar.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e1357"></a>6.&nbsp;Quiz Questions</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1359"></a>6.1.&nbsp;Question 1: Single-valued reference property</h3></div></div></div><p>Consider the single-valued reference property
      <code class="code">Committee</code>::<code class="code">chair</code>, which holds a reference to
      an instance of the class <code class="code">ClubMember</code>. Which of the following
      JS code fragments represents the preferred implementation of the setter
      for this property? Select one:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>O</p><pre class="programlisting">set chair(c) {
  const clubMember_id = (typeof c !==  "object") ? c : c.memberId;
  this._chair = ClubMember.instances[clubMember_id];
}</pre></li><li class="listitem"><p>O</p><pre class="programlisting">set chair(c) {
  const clubMember_id = c.memberId;
  this._chair = ClubMember.instances[clubMember_id];
}</pre></li><li class="listitem"><p>O</p><pre class="programlisting">set chair(c) {
  const clubMember_id = c;
  this._chair = ClubMember.instances[clubMember_id];
}</pre></li><li class="listitem"><p>O</p><pre class="programlisting">set chair(c) {
  this._chair = c;
}</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1378"></a>6.2.&nbsp;Question 2: Implementing the CASCADE deletion policy</h3></div></div></div><p>Making the assumption that books existentially depend on their
      publishers, implying a CASCADE deletion policy, which of the following
      <code class="code">Publisher.destroy</code> methods correctly implements the implied
      deletion policy? Select one:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>O</p><pre class="programlisting">Publisher.destroy = function (name) {
  for (const key of Object.keys( Book.instances)) {
    const book = Book.instances[key];
    if (book.publisher.name === name) {
      delete book._publisher;
    }
  }
  delete Publisher.instances[name];
};</pre></li><li class="listitem"><p>O</p><pre class="programlisting">Publisher.destroy = function (name) {
  for (const key of Object.keys( Book.instances)) {
    const book = Book.instances[key];
    if (book.publisher.name === name) {
      delete Book.instances[key];
    }
  }
  delete Publisher.instances[name];
};</pre></li><li class="listitem"><p>O</p><pre class="programlisting">Publisher.destroy = function (name) {
  for (const key of Object.keys( Book.instances)) {
    const book = Book.instances[key];
    if (book.publisher.name === name) {
      book.publisher = undefined;
    }
  }
  delete Publisher.instances[name];
};</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1392"></a>6.3.&nbsp;Question 3: JS class model</h3></div></div></div><p>Consider the following OO class model:</p><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="350"><tr><td><img src="../fig/quiz/UnidirAssoc/JsM1/q.svg" width="350"></td></tr></table></div><p>Which is the correct JS class model for the <code class="code">Committee</code>
      class derived from the above model? Select one:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>O</p><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="290"><tr><td><img src="../fig/quiz/UnidirAssoc/JsM1/f1.svg" width="290"></td></tr></table></div></li><li class="listitem"><p>O</p><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="300"><tr><td><img src="../fig/quiz/UnidirAssoc/JsM1/c.svg" width="300"></td></tr></table></div></li><li class="listitem"><p>O</p><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="290"><tr><td><img src="../fig/quiz/UnidirAssoc/JsM1/f2.svg" width="290"></td></tr></table></div></li></ol></div></div></div></div><div lang="" class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d5e1416"></a>Chapter&nbsp;3.&nbsp;Implementing Unidirectional Non-Functional Associations with Plain
  JS</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#sectImplemMultiRefProp">1. Implementing Multi-Valued Reference Properties</a></span></dt><dt><span class="section"><a href="#d5e1468">2. Make a JS Class Model</a></span></dt><dt><span class="section"><a href="#d5e1511">3. New issues</a></span></dt><dt><span class="section"><a href="#d5e1558">4. Code the Model</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e1561">4.1. Summary</a></span></dt><dt><span class="section"><a href="#d5e1587">4.2. Code the add and remove operations</a></span></dt><dt><span class="section"><a href="#d5e1612">4.3. Choose and implement a deletion policy</a></span></dt><dt><span class="section"><a href="#d5e1636">4.4. Serialization functions</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e1659">5. Code the View</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e1661">5.1. Setting up the <span class="italic">Retrieve/List
      All</span> user interface</a></span></dt><dt><span class="section"><a href="#d5e1676">5.2. Selecting associated objects in the <span class="italic">Create</span> user interface</a></span></dt><dt><span class="section"><a href="#d5e1711">5.3. Selecting associated objects in the <span class="italic">Update</span> user interface</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e1766">6. Points of Attention</a></span></dt><dt><span class="section"><a href="#d5e1775">7. Quiz Questions</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e1777">7.1. Question 1: Collection-valued properties</a></span></dt><dt><span class="section"><a href="#d5e1799">7.2. Question 2: Implementing the CASCADE deletion policy</a></span></dt><dt><span class="section"><a href="#d5e1813">7.3. Question 3: JS class model</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e1837">8. Practice Project</a></span></dt></dl></div><p>A unidirectional non-functional association is either <span class="italic">one-to-many</span> or <span class="italic">many-to-many</span>. In both cases such an association is
  represented, or implemented, with the help of a <span class="italic">multi-valued</span> reference property.</p><p>In this chapter, we show</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>how to derive a JS class model from an OO class model with
        <span class="italic">multi-valued reference properties</span>
        representing <span class="italic">unidirectional non-functional
        associations</span>,</p></li><li class="listitem"><p>how to code the JS class model in the form of JavaScript model
        classes,</p></li><li class="listitem"><p>how to write the view and controller code based on the model
        code.</p></li></ol></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sectImplemMultiRefProp"></a>1.&nbsp;Implementing Multi-Valued Reference Properties</h2></div></div></div><p>A multi-valued reference property, such as the property
    <code class="code">Book</code>::<code class="code">authors</code>, allows storing a collection of
    references to objects of some type, such as <code class="code">Author</code> objects.
    When creating a new object of type <code class="code">Book</code>, the constructor
    function needs to have a parameter for providing a suitable value for this
    property. We can allow this value to be either a collection of internal
    object references or of ID references, as shown in the following
    example:</p><pre class="programlisting">class <span class="bold"><strong>Book</strong></span> {
  constructor ({isbn, title, year, authors, authorIdRefs, 
      publisher, publisher_id}) {
    this.isbn = isbn;
    this.title = title;
    this.year = year;
    // assign object reference or ID reference
    this.authors = authors || authorIdRefs;
    if (publisher || publisher_id) {
      this.publisher = publisher || publisher_id;
    }
  }
  ...
}</pre><p>Notice that the constructor's parameter record is expected to
    contain either an <code class="code">authors</code> or an <code class="code">authorIdRefs</code>
    slot. The JavaScript expression <code class="code">authors||authorIdRefs</code>, using
    the disjunction operator <code class="code">||</code>, evaluates to a map
    <code class="code">authors</code>, if there is a slot with name <code class="code">authors</code>,
    or to an array <code class="code">authorIdRefs</code>, otherwise. We handle the
    resulting ambiguity in the property setter by checking the type of the
    argument as shown in the following code fragment:</p><pre class="programlisting">set <span class="bold"><strong>authors</strong></span>( a) {
  this._authors = {};
  if (Array.isArray(a)) {  // array of IdRefs
    for (const idRef of a) {
      this.<span class="bold"><strong>addAuthor</strong></span>( idRef);
    }
  } else {  // map of IdRefs to object references
    for (const idRef of Object.keys( a)) {
      this.<span class="bold"><strong>addAuthor</strong></span>( a[idRef]);
    }
  }
}</pre><p>In JS, a collection-valued reference property can be implemented in
    two ways:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>having an array list (a JS array) of object references as its
        value,</p></li><li class="listitem"><p>having a map as its value, such that the values of the object's
        standard ID attribute are the keys, which are mapped to internal JS
        object references.</p></li></ol></div><p>We prefer using maps for implementing <span class="italic">set-valued</span> reference properties since they
    guarantee that each element is unique, while with an array we would have
    to prevent duplicate elements. Also, an element of a map can be easily
    deleted (with the help of the <code class="code">delete</code> operator), while this
    requires more effort in the case of an array. However, for implementing
    <span class="italic">ordered</span> or <span class="italic">non-unique</span> association ends corresponding to
    <span class="italic">ordered-collection</span>-valued or
    <span class="emphasis"><em>multi-set</em></span>-valued (or <span class="emphasis"><em>bag</em></span>-valued)
    reference properties, we use JS arrays.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e1468"></a>2.&nbsp;Make a JS Class Model</h2></div></div></div><p>Our starting point for making a JS class model is the following OO
    class model:</p><div class="informalfigure"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="350"><tr><td><img src="../fig/Publisher-Book-Author_Unidir_AFM.svg" width="350"></td></tr></table></div></div><p>This model contains, in addition to the single-valued reference
    property <code class="code">Book</code>::<code class="code">publisher</code> representing the
    unidirectional many-to-one association <span class="italic">Book</span>-<span class="bold"><strong>has</strong></span>-<span class="italic">Publisher</span>,
    the multi-valued reference property
    <code class="code">Book</code>::<code class="code">authors</code> representing the unidirectional
    many-to-many association <span class="italic">Book</span>s-<span class="bold"><strong>have</strong></span>-<span class="italic">Authors</span>.</p><p>For deriving a JS class model from the OO class model we have to
    follow the same steps as in <a class="xref" href="#secUnidirFunAss" title="2.&nbsp;Make a JS Class Model">Section&nbsp;2</a> and, in addition, we have to take care of
    multi-valued reference properties, such as
    <code class="code">Book</code>::<code class="code">authors</code>, for which we</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>create a class-level <span class="italic"><span class="bold"><strong>check</strong></span></span> operation, such as
        <code class="code">checkAuthor</code>, which is responsible for checking the
        corresponding <span class="italic">referential integrity
        constraint</span> for the references to be added to the property's
        collection;</p></li><li class="listitem"><p>create an <span class="bold"><strong>add</strong></span> operation, such
        as <code class="code">addAuthor</code>, for adding a reference to the
        collection;</p></li><li class="listitem"><p>create a <span class="bold"><strong>remove</strong></span> operation, such
        as <code class="code">removeAuthor</code>, for removing a reference from the
        collection.</p></li></ol></div><p>This leads to the following JS class model<a class="indexterm" name="d5e1506"></a>:</p><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="700"><tr><td><img src="../fig/Publisher-Book-Author_Unidir_JsM.svg" width="700"></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e1511"></a>3.&nbsp;New issues</h2></div></div></div><p>Compared to dealing with a functional association, as discussed in
    the previous chapter, we now have to deal with the following new technical
    issues:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>In the <span class="italic">model</span> code we now have
        to take care of <span class="bold"><strong><span class="italic">multi-valued reference properties</span></strong></span>
        that require implementing</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>an <span class="italic"><span class="bold"><strong>add</strong></span></span> and a <span class="italic"><span class="bold"><strong>remove</strong></span></span>
            method, such as <code class="code">addAuthor</code> and
            <code class="code">removeAuthor</code>, as well as a <span class="italic"><span class="bold"><strong>setter</strong></span></span>
            method for assigning a set of object references with the help of
            the add method, possibly converting ID references to object
            references; all three methods may need to check <span class="italic">cardinality constraints</span>, if there are
            any;</p></li><li class="listitem"><p>a class-level <span class="italic"><span class="bold"><strong>check</strong></span></span> operation, such as
            <code class="code">checkAuthor</code>, which has to invoke the corresponding
            <span class="emphasis"><em>check...AsIdRef</em></span> method of the property's
            range class for checking the property's implicit <span class="italic">referential integrity constraint</span>;</p></li><li class="listitem"><p>converting a collection of object references to a collection
            of ID references in the object-to-storage conversion function
            <code class="code">toJSON</code>.</p></li></ol></div></li><li class="listitem"><p>In the <span class="italic">user interface
        ("view")</span> code we now have to take care of</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>showing information about a set of associated objects in the
            property's column of the table view of the <span class="italic">Retrieve/list all</span> use case; the simplest
            approach is showing a comma-separated list of ID references,
            possibly combined with corresponding names; alternatively, HTML
            lists can be rendered in the property's table data cells;</p></li><li class="listitem"><p>allowing to select a set of associated objects from a list
            of all existing instances of the property's range class in the
            <span class="italic">Create</span> and <span class="italic">Update</span> use cases.</p></li></ol></div><p>The last issue, allowing to select a set of associated objects
        from a list of all instances of some class, can, in general, not be
        solved with the help of an HTML multiple-<code class="code">select</code> form
        control because of its poor usability. Whenever the set of selectable
        options is greater than a certain threshold (defined by the number of
        options that can be seen on the screen without scrolling), the
        multiple-<code class="code">select</code> element is no longer usable, and an
        alternative <span class="bold"><strong><span class="italic">multi-selection widget</span></strong></span> has to be
        used.</p></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e1558"></a>4.&nbsp;Code the Model</h2></div></div></div><p>Notice that, for simplicity, we do not include the code for all
    constraint validation checks shown in the JS class model in the code of
    the example app.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1561"></a>4.1.&nbsp;Summary</h3></div></div></div><p>Code each class of the JS class model as an ES6 class with
      implicit getters and setters:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Code the property checks in the form of class-level ('static')
          methods. Take care that all constraints of a property as specified
          in the JS class model are properly coded in the property
          checks.</p></li><li class="listitem"><p>For each single-valued property, code the specified getter and
          setter such that in each setter, the corresponding property check is
          invoked and the property is only set/unset, if the check does not
          detect any constraint violation.</p></li><li class="listitem"><p><span class="bold"><strong>For each multi-valued property, code its
          add and remove operations, as well as the specified get/set
          operations</strong></span>:</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p><span class="bold"><strong>Code the add/remove operations as
              (instance-level) methods that invoke the corresponding property
              checks.</strong></span></p></li><li class="listitem"><p><span class="bold"><strong>Code the setter such that it invokes
              the add operation for each item of the collection to be
              assigned.</strong></span></p></li></ol></div></li><li class="listitem"><p>Write the code of the serialization functions
          <code class="code">toString()</code> and <code class="code">toJSON()</code>.</p></li><li class="listitem"><p>Take care of deletion dependencies in the <code class="code">destroy</code>
          method.</p></li></ol></div><p>These steps are discussed in more detail in the following
      sections.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1587"></a>4.2.&nbsp;Code the add and remove operations</h3></div></div></div><p>For the multi-valued reference property
      <code class="code">Book</code>::<code class="code">authors</code>, we need to code the operations
      <code class="code">addAuthor</code> and <code class="code">removeAuthor</code>. Both operations
      accept one parameter denoting an author either by ID reference (the
      author ID as integer or string) or by an object reference. The code of
      <code class="code">addAuthor</code> is as follows:</p><pre class="programlisting"><span class="bold"><strong>addAuthor</strong></span>( a) {
  // a can be an ID reference or an object reference
  const author_id = (typeof a !== "object") ? parseInt( a) : a.authorId;
  const validationResult = Book.checkAuthor( author_id);
  if (validationResult instanceof NoConstraintViolation) {
    // add the new author reference
    const key = String( author_id);
    this._authors[key] = Author.instances[key];
  } else {
    throw validationResult;
  }
}</pre><p>In the <code class="code">removeAuthor</code> method, the author reference is
      first checked and, if no constraint violation is detected, the
      corresponding entry in the map <code class="code">this._authors</code> is
      deleted:</p><pre class="programlisting"><span class="bold"><strong>removeAuthor</strong></span>( a) {
  // a can be an ID reference or an object reference
  const author_id = (typeof a !== "object") ? 
      parseInt( a) : a.authorId;
  const validationResult = Book.checkAuthor( author_id);
  if (validationResult instanceof NoConstraintViolation) {
    // delete the author reference
    <span class="bold"><strong>delete</strong></span> this._authors[author_id];
  } else {
    throw validationResult;
  }
}</pre><p>For assigning an array of ID references, or a map of object
      references, to the property <code class="code">Book</code>::<code class="code">authors</code>, the
      setter for the <code class="code">authors</code> property adds them one by one with
      the help of <code class="code">addAuthor</code>:</p><pre class="programlisting"><span class="bold"><strong>set authors</strong></span>( a) {
  this._authors = {};
  if (Array.isArray(a)) {  // array of IdRefs
    for (let idRef of a) {
      this.<span class="bold"><strong>addAuthor</strong></span>( idRef);
    }
  } else {  // map of IdRefs to object references
    for (let idRef of Object.keys( a)) {
      this.<span class="bold"><strong>addAuthor</strong></span>( a[idRef]);
    }
  }
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1612"></a>4.3.&nbsp;Choose and implement a deletion policy</h3></div></div></div><p>For the reference property
      <code class="code">Book</code>::<code class="code">authors</code>, we have to choose and implement
      a deletion policy<a class="indexterm" name="d5e1617"></a> in the <code class="code">destroy</code> method of the
      <code class="code">Author</code> class. We have to choose between </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>deleting all books (co-)authored by the deleted author
            (reflecting the logic of <span class="italic">Existential
            Dependency</span>);</p></li><li class="listitem"><p>dropping from all books (co-)authored by the deleted author
            the reference to the deleted author (reflecting the logic of
            <span class="italic">Existential
            Independence</span>).</p></li></ol></div><p>For simplicity, we go for the second option. This is shown in the
      following code of the static <code class="code">Author.destroy</code> method where
      for all concerned <code class="code">book</code> objects the author reference
      <code class="code">book.authors[authorId]</code> is dropped:</p><pre class="programlisting">Author.<span class="bold"><strong>destroy</strong></span> = function (authorId) {
  const author = Author.instances[authorId];
  // delete all dependent book records
  for (const isbn of Object.keys( Book.instances)) {
    const book = Book.instances[isbn];
    if (book.authors[authorId]) <span class="bold"><strong>delete book.authors[authorId]</strong></span>;
  }
  // delete the author object
  <span class="bold"><strong>delete Author.instances[authorId]</strong></span>;
  console.log("Author " + author.name + " deleted.");
};</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1636"></a>4.4.&nbsp;Serialization functions</h3></div></div></div><p>We need two serialization functions:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="code">toString()</code> for converting an object to a
          human-readable string representation that can be used for showing an
          object in a user interface, and</p></li><li class="listitem"><p><code class="code">toJSON()</code> for converting a typed object to a
          corresponding record that can be saved in a persistent
          datastore.</p></li></ol></div><p>In both cases, internal object references are converted to ID
      references.</p><p>The <code class="code">Book</code>::<code class="code">toString()</code> function creates a
      string representation that typically contains the relevant properties
      only. The simplest method for showing a set of associated objects, like
      the authors of a book, is creating a comma-separated list of IDs with
      <code class="code">Object.keys( this.authors).join(",")</code> as in the following
      program listing:</p><pre class="programlisting"><span class="bold"><strong>toString</strong></span>() {
  var bookStr = `Book{ ISBN: ${this.isbn}, title: ${this.title},` +
      `year: ${this.year}`;
  if (this.publisher) bookStr += `, publisher: ${this.publisher.name}`;
  return `${bookStr}, authors: ${Object.keys( this.authors).join(",")} }`;
}</pre><p>The object-to-storage conversion function
      <code class="code">Book</code>::<code class="code">toJSON()</code>, which is automatically invoked
      by JavaScript's built-in JSON.stringify function when it encounters an
      object of type <code class="code">Book</code>, converts typed JS objects with object
      references to corresponding (untyped) record objects with ID references.
      This includes deleting the underscore prefix for obtaining the
      corresponding record field name:</p><pre class="programlisting"><span class="bold"><strong>toJSON</strong></span>() {
  var rec = {};
  for (const p of Object.keys( this)) {
    // copy only property slots with underscore prefix
    if (p.charAt(0) !== "_") continue;
    switch (p) {
    case "_publisher":
      // convert object reference to ID reference
      if (this._publisher) rec.publisher_id = this._publisher.name;
      break;
    case "_authors":
      // convert map of object references to list of ID references
      rec.authorIdRefs = [];
      for (const authorIdStr of Object.keys( this.authors)) {
        rec.authorIdRefs.push( parseInt( authorIdStr));
      }
      break;
    default:
      // remove underscore prefix
      rec[p.substr(1)] = this[p];
    }
  }
  return rec;
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e1659"></a>5.&nbsp;Code the View</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1661"></a>5.1.&nbsp;Setting up the <span class="italic">Retrieve/List
      All</span> user interface</h3></div></div></div><p>For showing information about the authors of a book in the view
      table of the <span class="italic">Retrieve/List All</span> user
      interface, the corresponding cell in the HTML table is filled (in
      <code class="filename">v/books.mjs</code>) with a list of the names of all
      authors with the help of the utility function
      <code class="code">createListFromMap</code>:</p><pre class="programlisting">const tableBodyEl = document.querySelector("section#Book-R&gt;table&gt;tbody");
tableBodyEl.innerHTML = "";  // drop old content
for (const key of Object.keys( Book.instances)) {
  const book = Book.instances[key];
  // create list of authors for this book
  const <span class="bold"><strong>authListEl = createListFromMap( book.authors, "name")</strong></span>;
  const row = tableBodyEl.insertRow();
  row.insertCell().textContent = book.isbn;
  row.insertCell().textContent = book.title;
  row.insertCell().textContent = book.year;
  <span class="bold"><strong>row.insertCell().appendChild( authListEl)</strong></span>;
  // if the book has a publisher, show its name
  row.insertCell().textContent =
      book.publisher ? book.publisher.name : "";
}</pre><p>The utility function <code class="code">createListFromMap</code> (in
      <code class="filename">lib/util.mjs</code>) has the following code:</p><pre class="programlisting">function <span class="bold"><strong>createListFromMap</strong></span>( entityTbl, displayProp) {
  const listEl = document.createElement("ul");
  // delete old contents
  listEl.innerHTML = "";
  // create list items from object property values
  for (const key of Object.keys( entityTbl)) {
    const listItemEl = document.createElement("li");
    listItemEl.textContent = entityTbl[key][displayProp];
    listEl.appendChild( listItemEl);
  }
  return listEl;
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1676"></a>5.2.&nbsp;Selecting associated objects in the <span class="italic">Create</span> user interface</h3></div></div></div><p>For allowing to select multiple authors to be associated with the
      currently edited book in the <span class="italic">Create</span>
      user interface, a multiple selection list (a <code class="code">select</code> element
      with the <code class="code">multiple</code> attribute set to
      <code class="code">"multiple"</code>), as shown in the HTML code below (from
      <code class="filename">books.html</code>), is populated with the instances of the
      associated object type. </p><pre class="programlisting">&lt;section id="Book-C" class="UI-Page"&gt;
 &lt;h1&gt;Public Library: Create a new book record&lt;/h1&gt;
 &lt;form&gt;
  ... 
  &lt;div class="select-one"&gt;
   &lt;label&gt;Publisher: &lt;select name="selectPublisher"&gt;&lt;/select&gt;&lt;/label&gt;
  &lt;/div&gt;
  &lt;div class="select-many"&gt;
   &lt;label&gt;<span class="bold"><strong>Authors</strong></span>: 
    &lt;<span class="bold"><strong>select</strong></span> name="selectAuthors" <span class="bold"><strong>multiple="multiple"</strong></span>&gt;&lt;/select&gt;
   &lt;/label&gt;
  &lt;/div&gt;
  ...
 &lt;/form&gt;
&lt;/section&gt;</pre><p>The <span class="italic">Create</span> UI is set up by
      populating selection lists for selecting the authors and the publisher
      with the help of a utility method <code class="code">fillSelectWithOptions</code> as
      shown in the following program listing (from
      <code class="filename">v/books.mjs</code>):</p><pre class="programlisting">const createFormEl = document.querySelector("section#Book-C &gt; form"),
      selectAuthorsEl = createFormEl["selectAuthors"],
      selectPublisherEl = createFormEl["selectPublisher"];
document.getElementById("create").addEventListener("click", function () {
  // set up a single selection list for selecting a publisher
  <span class="bold"><strong>fillSelectWithOptions</strong></span>( selectPublisherEl, <span class="bold"><strong>Publisher.instances</strong></span>, "name");
  // set up a multiple selection list for selecting authors
  <span class="bold"><strong>fillSelectWithOptions</strong></span>( selectAuthorsEl, <span class="bold"><strong>Author.instances</strong></span>,
      "authorId", {displayProp: "name"});
  document.getElementById("Book-M").style.display = "none";
  document.getElementById("Book-C").style.display = "block";
  createFormEl.reset();
});
// set up event handlers for responsive constraint validation
...
// handle Save button click events
createFormEl["commit"].addEventListener("click", function () {
  ...
});</pre><p>When the user clicks the <span class="italic">Save</span>
      button, all form control values, including the value of any
      single-<code class="code">select</code> control, are copied to a corresponding field
      of the <code class="code">slots</code> record, which is used as the argument for
      invoking the <code class="code">add</code> method after all form fields have been
      checked for validity. Before invoking <code class="code">add</code>, we first have to
      create (in the <code class="code">authorIdRefs</code> slot) a list of author ID
      references from the selected options of the multiple authors selection
      list, as shown in the following program listing:</p><pre class="programlisting">// handle Save button click events
createFormEl["commit"].addEventListener("click", function () {
  const slots = {
    isbn: createFormEl["isbn"].value,
    title: createFormEl["title"].value,
    year: createFormEl["year"].value,
    authorIdRefs: [],
    publisher_id: createFormEl["selectPublisher"].value
  };
  // check all input fields and show validation error messages
  ...
  // get the list of selected authors
  const selAuthOptions = createFormEl["selectAuthors"]<span class="bold"><strong>.selectedOptions</strong></span>;
  // check the mandatory value constraint for authors
  createFormEl["selectAuthors"].setCustomValidity(
      selAuthOptions.length &gt; 0 ? "" : "No author selected!");
  // save the input data only if all form fields are valid
  if (createFormEl.<span class="bold"><strong>checkValidity</strong></span>()) {
    // construct a list of author ID references
    for (const opt of selAuthOptions) {
      slots.authorIdRefs.push( opt.value);
    }
    <span class="bold"><strong>Book.add</strong></span>( slots);
  }
});</pre><p>The <span class="italic">Update</span> use case is
      discussed in the next section.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1711"></a>5.3.&nbsp;Selecting associated objects in the <span class="italic">Update</span> user interface</h3></div></div></div><p>Unfortunately, HTML's multiple-<code class="code">select</code> control is not
      really usable for displaying and allowing to maintain the set of
      associated authors in realistic use cases where we have several hundreds
      or thousands of authors, because the way it renders the choice in a
      large list to be scrolled is visually too scattered, violating general
      usability requirements. So we have to use a special <span class="italic"><span class="bold"><strong>multi-selection
      widget</strong></span></span> that allows to add (and remove) objects to
      (and from) a list of associated objects, as discussed in <a class="xref" href="#sectRefPropCtrls" title="8.&nbsp;Rendering Reference Properties in the User Interface">Section&nbsp;8</a>. In order to show
      how this widget can replace the multiple-selection list discussed in the
      previous section, we use it now in the <span class="italic">Update</span> use case.</p><p>For allowing to maintain the set of authors associated with the
      currently edited book in the <span class="italic">Update</span>
      use case, a <span class="italic">multi-selection widget</span> as
      shown in the HTML code below, is populated with the instances of the
      <code class="code">Author</code> class. </p><pre class="programlisting">&lt;section id="Book-U" class="UI-Page"&gt;
  &lt;h1&gt;Public Library: Update a book record&lt;/h1&gt;
  &lt;form&gt;
    &lt;div class="select-one"&gt;
      &lt;label&gt;Select book: &lt;select name="<span class="bold"><strong>selectBook</strong></span>"&gt;&lt;/select&gt;&lt;/label&gt;
    &lt;/div&gt;
    ...
    &lt;div class="select-one"&gt;
      &lt;label&gt;Publisher: &lt;select name="selectPublisher"&gt;&lt;/select&gt;&lt;/label&gt;
    &lt;/div&gt;
    &lt;div class="<span class="bold"><strong>widget</strong></span>"&gt;
      &lt;label for="updBookSelectAuthors"&gt;Authors: &lt;/label&gt;
      &lt;div class="<span class="bold"><strong>MultiSelectionWidget</strong></span>" id="updBookSelectAuthors"&gt;&lt;/div&gt;
    &lt;/div&gt;
    ...
  &lt;/form&gt;
&lt;/section&gt;</pre><p>The <span class="italic">Update</span> user interface is
      set up (in a section of <code class="filename">v/books.mjs</code>) by populating
      the selection list for selecting the book to be updated with the help of
      the utility method <code class="code">fillSelectWithOptions</code>.</p><pre class="programlisting">const updateFormEl = document.querySelector("section#Book-U &gt; form"),
      updSelBookEl = updateFormEl["selectBook"];
document.getElementById("update").addEventListener("click", function () {
  document.getElementById("Book-M").style.display = "none";
  document.getElementById("Book-U").style.display = "block";
  // set up the book selection list
  <span class="bold"><strong>fillSelectWithOptions</strong></span>( updSelBookEl, Book.instances,
      "isbn", {displayProp: "title"});
  updateFormEl.reset();
});</pre><p>The selection list for assigning a publisher and the
      multi-selection widget for assigning the authors of a book are only
      populated after a book to be updated has been chosen in the books
      selection list. The following event handler that listens to
      <code class="code">change</code> events on the <code class="code">select</code> element with name
      "selectBook" takes care of this:</p><pre class="programlisting">updSelBookEl.addEventListener("<span class="bold"><strong>change</strong></span>", function () {
  const saveButton = updateFormEl["commit"],
    selectAuthorsWidget = updateFormEl.querySelector(".MultiSelectionWidget"),
    selectPublisherEl = updateFormEl["selectPublisher"],
    isbn = updateFormEl["selectBook"].value;
  if (isbn) {
    const book = Book.instances[isbn];
    updateFormEl["isbn"].value = <span class="bold"><strong>book.isbn</strong></span>;
    updateFormEl["title"].value = <span class="bold"><strong>book.title</strong></span>;
    updateFormEl["year"].value = <span class="bold"><strong>book.year</strong></span>;
    // set up the associated publisher selection list
    fillSelectWithOptions( selectPublisherEl, Publisher.instances, "name");
    // set up the associated authors selection widget
    <span class="bold"><strong>createMultiSelectionWidget</strong></span>( selectAuthorsWidget, book.authors,
        Author.instances, "authorId", "name", 1);  // minCard=1
    // assign associated publisher as the selected option to select element
    if (book.publisher) {
      updateFormEl["selectPublisher"].value = book.publisher.name;
    }
    saveButton.disabled = false;
  } else {
    updateFormEl.reset();
    updateFormEl["selectPublisher"].selectedIndex = 0;
    selectAuthorsWidget.innerHTML = "";
    saveButton.disabled = true;
  }
});</pre><p>When a book to be updated has been chosen, the output field
      <code class="code">isbn</code> and the input fields <code class="code">title</code> and
      <code class="code">year</code>, as well as the selection field for updating the
      publisher, are assigned corresponding values from the chosen book, and
      the associated authors selection widget is set up with the help of the
      utility procedure <code class="code">createMultiSelectionWidget</code>.</p><p>When the user, after updating some values, finally clicks the
      <span class="italic">Save</span> button, all form control values,
      including the value of the single-<code class="code">select</code> control for
      assigning a publisher, are copied to corresponding slots in a
      <code class="code">slots</code> record variable, which is used as the argument for
      invoking the <code class="code">Book.update</code> method after all values have been
      checked for validity. Before invoking <code class="code">update</code>, a list of ID
      references to authors to be added, and another list of ID references to
      authors to be removed, is created (in the <code class="code">authorIdRefsToAdd</code>
      and <code class="code">authorIdRefsToRemove</code> slots) from the updates that have
      been recorded in the associated authors selection widget with "added"
      and "removed" as values of the corresponding list item's
      <code class="code">class</code> attribute, as shown in the following program
      listing:</p><pre class="programlisting">updateFormEl["commit"].addEventListener("click", function () {
  const bookIdRef = updSelBookEl.value,
    selectAuthorsWidget = updateFormEl.querySelector(".MultiSelectionWidget"),
    selectedAuthorsListEl = selectAuthorsWidget.firstElementChild;
  if (!bookIdRef) return;
  const slots = {
    isbn: updateFormEl["isbn"].value,
    title: updateFormEl["title"].value,
    year: updateFormEl["year"].value,
    publisher_id: updateFormEl["selectPublisher"].value
  };
  // add event listeners for responsive validation
  ...
  // commit the update only if all form field values are valid
  if (updateFormEl.checkValidity()) {
    // construct authorIdRefs-ToAdd/ToRemove lists
    const authorIdRefsToAdd=[], authorIdRefsToRemove=[];
    for (const authorItemEl of selectedAuthorsListEl.children) {
      if (authorItemEl.classList.contains("<span class="bold"><strong>removed</strong></span>")) {
        <span class="bold"><strong>authorIdRefsToRemove</strong></span>.push( authorItemEl.getAttribute("data-value"));
      }
      if (authorItemEl.classList.contains("<span class="bold"><strong>added</strong></span>")) {
        <span class="bold"><strong>authorIdRefsToAdd</strong></span>.push( authorItemEl.getAttribute("data-value"));
      }
    }
    // if the add/remove list is non-empty, create a corresponding slot
    if (authorIdRefsToRemove.length &gt; 0) {
      slots.authorIdRefsToRemove = authorIdRefsToRemove;
    }
    if (authorIdRefsToAdd.length &gt; 0) {
      slots.authorIdRefsToAdd = authorIdRefsToAdd;
    }
    <span class="bold"><strong>Book.update</strong></span>( slots);
    // update the book selection list's option element
    updSelBookEl.options[updSelBookEl.selectedIndex].text = slots.title;
    // drop widget content
    selectAuthorsWidget.innerHTML = "";
  }
});</pre><p>You can <a class="link" href="4-UnidirectionalAssociationApp/index.html" target="_top">run the example
      app</a> from our server and <a class="link" href="4-UnidirectionalAssociationApp.zip" target="_top">download it as a ZIP
      archive file</a>.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e1766"></a>6.&nbsp;Points of Attention</h2></div></div></div><p>We have still included the repetitive code structures (called
    <span class="italic"><span class="bold"><strong>boilerplate
    code</strong></span></span>) in the model layer per class and per property
    for constraint validation (checks and setters) and per class for the data
    storage management methods <code class="code">add</code>, <code class="code">update</code>, and
    <code class="code">destroy</code>. While it is good to write this code a few times for
    learning app development, you don't want to write it again and again when
    you work on real projects. For avoiding repetitive boilerplate code,
    generic forms of these methods are needed, such that they can be reused in
    all model classes of an app. For instance, the <a class="link" href="https://github.com/gwagner57/cLASSjs" target="_top">cLASSjs</a> library
    provides such an approach.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e1775"></a>7.&nbsp;Quiz Questions</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1777"></a>7.1.&nbsp;Question 1: Collection-valued properties</h3></div></div></div><p>Which of the following statements about implementing
      collection-valued properties in JS are correct? Select one or
      more:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>&#9744; A bag-valued property is implemented by representing
          <span class="emphasis"><em>bags</em></span> (also called 'multi-sets') as JS
          arrays.</p></li><li class="listitem"><p>&#9744; A set-valued property is preferably implemented by
          representing <span class="emphasis"><em>sets</em></span> as JS arrays since, as
          opposed to JS maps, they guarantee that each element is
          unique.</p></li><li class="listitem"><p>&#9744; An ordered-set-valued property is implemented by
          representing <span class="emphasis"><em>ordered sets</em></span> as JS maps.</p></li><li class="listitem"><p>&#9744; An ordered-set-valued property is implemented by
          representing <span class="emphasis"><em>ordered sets</em></span> as JS arrays.</p></li><li class="listitem"><p>&#9744; A set-valued property is preferably implemented by
          representing <span class="emphasis"><em>sets</em></span> as classical JS maps since,
          as opposed to JS arrays, they guarantee that each element is
          unique.</p></li><li class="listitem"><p>&#9744; A bag-valued property is implemented by representing
          <span class="emphasis"><em>bags</em></span> (also called 'multi-sets') as JS
          maps.</p></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1799"></a>7.2.&nbsp;Question 2: Implementing the CASCADE deletion policy</h3></div></div></div><p>Making the assumption that books existentially depend on their
      authors, implying a CASCADE deletion policy, which of the following
      <code class="code">Author.destroy</code> methods correctly implements the implied
      deletion policy? Select one:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>O</p><pre class="programlisting">Author.destroy = function (authorId) {
  for (const isbn of Object.keys( Book.instances)) {
    const book = Book.instances[isbn];
    if (authorId in book.authors) delete book.authors[authorId];
  }
  delete Author.instances[authorId];
};</pre></li><li class="listitem"><p>O</p><pre class="programlisting">Author.destroy = function (authorId) {
  for (const isbn of Object.keys( Book.instances)) {
    const book = Book.instances[isbn];
    if (authorId in book.authors) book.authors[authorId] = null;
  }
  delete Author.instances[authorId];
};</pre></li><li class="listitem"><p>O</p><pre class="programlisting">Author.destroy = function (authorId) {
  for (const isbn of Object.keys( Book.instances)) {
    const book = Book.instances[isbn];
    if (authorId in book.authors) delete Book.instances[isbn];
  }
  delete Author.instances[authorId];
};</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1813"></a>7.3.&nbsp;Question 3: JS class model</h3></div></div></div><p>Which is the correct JS class model for the <code class="code">Committee</code>
      class derived from the given OO class model?</p><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="340"><tr><td><img src="../fig/quiz/UnidirAssoc/JsM2/JsM-multival-refprop_q.svg" width="340"></td></tr></table></div><p>Select one:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>O</p><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="340"><tr><td><img src="../fig/quiz/UnidirAssoc/JsM2/JsM-multival-refprop_f2.svg" width="340"></td></tr></table></div></li><li class="listitem"><p>O</p><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="340"><tr><td><img src="../fig/quiz/UnidirAssoc/JsM2/JsM-multival-refprop_f1.svg" width="340"></td></tr></table></div></li><li class="listitem"><p>O</p><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="340"><tr><td><img src="../fig/quiz/UnidirAssoc/JsM2/JsM-multival-refprop_c.svg" width="340"></td></tr></table></div></li></ol></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e1837"></a>8.&nbsp;Practice Project</h2></div></div></div><p>This project is based on the information design model shown below.
    The app from the previous assignments is to be extended by adding the
    possibility to manage data about the actors and the director of a movie.
    This is achieved by adding a model class <code class="code">Person</code> and two
    unidirectional associations between <code class="code">Movie</code> and
    <code class="code">Person</code>:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>a many-to-one association assigning exactly one person as the
          <span class="bold"><strong><span class="italic">director</span></strong></span> of a movie, and</p></li><li class="listitem"><p>a many-to-many association assigning zero or more persons as
          the <span class="bold"><strong><span class="italic">actors</span></strong></span> of a movie.</p></li></ol></div><div class="figure"><a name="figMovieUnidirAssApp"></a><p class="title"><b>Figure&nbsp;3.1.&nbsp;Two unidirectional associations between <code class="code">Movie</code> and
      <code class="code">Person</code>.</b></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="400"><tr><td><img src="../fig/Movie-Person-unidirAssoc_DesM.svg" width="400" alt="Two unidirectional associations between Movie and Person."></td></tr></table></div></div></div><br class="figure-break"><p>This project includes the following tasks:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Make an <span class="italic"><span class="bold"><strong>OO class
        model</strong></span></span> derived from the given information design
        model.</p></li><li class="listitem"><p>Make a <span class="italic"><span class="bold"><strong>JS class
        model</strong></span></span> derived from the OO class model.</p></li><li class="listitem"><p>Code your JS class model, following the guidelines of the
        tutorial.</p></li></ol></div><p>You can use the following sample data for testing your app:</p><div class="table"><a name="d5e1872"></a><p class="title"><b>Table&nbsp;3.1.&nbsp;Movies</b></p><div class="table-contents"><table frame="box" rules="all"><thead><tr>
          <th>Movie ID</th>

          <th>Title</th>

          <th>Release date</th>

          <th>Director</th>

          <th>Actors</th>
        </tr></thead><tbody><tr>
          <td>1</td>

          <td>Pulp Fiction</td>

          <td>1994-05-12</td>

          <td>3</td>

          <td>5, 6</td>
        </tr><tr>
          <td>2</td>

          <td>Star Wars</td>

          <td>1977-05-25</td>

          <td>2</td>

          <td>7, 8</td>
        </tr><tr>
          <td>3</td>

          <td>Dangerous Liaisons</td>

          <td>1988-12-16</td>

          <td>1</td>

          <td>9, 5</td>
        </tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="d5e1900"></a><p class="title"><b>Table&nbsp;3.2.&nbsp;People</b></p><div class="table-contents"><table frame="box" rules="all"><thead><tr>
          <th>Person ID</th>

          <th>Name</th>
        </tr></thead><tbody><tr>
          <td>1</td>

          <td>Stephen Frears</td>
        </tr><tr>
          <td>2</td>

          <td>George Lucas</td>
        </tr><tr>
          <td>3</td>

          <td>Quentin Tarantino</td>
        </tr><tr>
          <td>5</td>

          <td>Uma Thurman</td>
        </tr><tr>
          <td>6</td>

          <td>John Travolta</td>
        </tr><tr>
          <td>7</td>

          <td>Ewan McGregor</td>
        </tr><tr>
          <td>8</td>

          <td>Natalie Portman</td>
        </tr><tr>
          <td>9</td>

          <td>Keanu Reeves</td>
        </tr></tbody></table></div></div><br class="table-break"><p>Make sure that your pages comply with the XML syntax of HTML5, and
    that your JavaScript code complies with our <a class="link" href="http://oxygen.informatik.tu-cottbus.de/webeng/Coding-Guidelines.html" target="_top">Coding
    Guidelines</a> and is checked with JSHint (<a class="link" href="http://www.jshint.com/" target="_top">http://www.jshint.com</a>).</p></div></div></div><script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<!-- Mirrored from web-engineering.info/tech/JsFrontendApp/unidirectional-association-tutorial.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 21 Jul 2023 10:45:21 GMT -->
</html>
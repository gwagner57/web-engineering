<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" vocab="http://schema.org/" typeof="TechArticle WebPage">

<!-- Mirrored from web-engineering.info/tech/JsFrontendApp/minimal-tutorial.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 21 Jul 2023 10:44:48 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset="UTF-8" />
  <title>Plain JavaScript Minimal App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="description" content="An introductory tutorial about developing front-end web applications with plain JavaScript" />  
  <meta property="learningResourceType" content="Tutorial"/>
  <meta property="proficiencyLevel" content="Beginner"/>
  <meta property="keywords" content="JS web app, JavaScript web app, plain JavaScript web app, pure JavaScript web app, front-end web app, MVC web app, CRUD web app, web app development tutorial, Local Storage database"/>
  <meta property="isPartOf" content="../../index.html"/>
  <meta property="specialty" content="../../WebAppEngineering.html"/>
  <link rel="stylesheet" type="text/css" href="../docbook.css" />
</head>
<body property="articleBody">
 <aside>
  <nav>
   <ul>
   <li><a href="1-MinimalApp/index.html"><button type="button">Run the app</button></a></li>
   <li><a href="1-MinimalApp.zip"><button type="button">Get the code</button></a></li>
   </ul>
  </nav>
  <div id="supportUs">
   <p>Please support <em>web-engineering.info</em> and buy our e-book <a href="https://gumroad.com/l/YyWka">Building Front-End Web Apps with Plain JavaScript</a>.</p>
   <a href="https://gumroad.com/l/YyWka"><img src="book-cover-new_169x270.jpg" width="169" height="270"/></a>
  </div>
 </aside>
 
   <div lang="en" class="book"><div class="titlepage"><div><div>
   <h3 class="kicker" style="color:grey"><em>Understanding</em> and <code>Implementing</code> Information Management Concepts and Techniques</h3>
   <h1 class="title"><a name="d5e1"></a>JavaScript Front-End Web App Tutorial Part 1: Building a Minimal App in Seven Steps</h1></div><div>
   <h2 class="subtitle"><img style="float:right" property="thumbnailUrl" src="../fig/machine-build.svg" width="120" 
   title="Icon made by Lorc under CC BY 3.0. Available on http://game-icons.net">Learn how to build a
   front-end web application with minimal effort, using plain JavaScript and the LocalStorage API</h2></div>
	
	<div><div class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Gerd</span> <span class="surname">Wagner</span></h3><code class="email">&lt;<a class="email" href="../../cdn-cgi/l/email-protection.html#3f7811685e58515a4d7f5d124b4a115b5a"><span class="__cf_email__" data-cfemail="0b4c255c6a6c656e794b69267f7e256f6e">[email&#160;protected]</span></a>&gt;</code></div></div></div><div><p class="releaseinfo">Warning: This tutorial may still contain errors and may still
    be incomplete in certain respects. Please report any issue to
    <a href="../../cdn-cgi/l/email-protection.html" class="__cf_email__" data-cfemail="d394fd84b2b4bdb6a193b1fea7a6fdb7b6">[email&#160;protected]</a>.</p></div><div><p class="releaseinfo">This tutorial is also available in the following formats:
    <a class="link" href="minimal-tutorial.pdf" target="_top">PDF</a>. 
    You may <a class="link" href="1-MinimalApp/index.html" target="_top">run the example
    app</a> from our server, or <a class="link" href="1-MinimalApp.zip" target="_top">download it as a ZIP archive file</a>.
    See also our <a class="link" href="../../index.html" target="_top">Web
    Engineering project page</a>.</p></div><div><p class="copyright">Copyright &copy; 2014-2021 Gerd Wagner</p></div><div><div class="legalnotice"><a name="d5e29"></a><p>This tutorial article, along with any associated source code, is
      licensed under <a class="link" href="http://www.codeproject.com/info/cpol10.aspx" target="_top">The Code
      Project Open License (CPOL)</a>, implying that the associated code is
      provided "as-is", can be modified to create derivative works, can be
      redistributed, and can be used in commercial applications, but the
      article must not be distributed or republished without the author's
      consent.</p></div></div><div><p class="pubdate">2021-05-31</p></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="preface"><a href="#d5e32">Foreword</a></span></dt><dt><span class="chapter"><a href="#d5e66">1. A Quick Tour of the Foundations of Web Apps</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e69">1. The World Wide Web (WWW)</a></span></dt><dt><span class="section"><a href="#d5e107">2. HTML and XML</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e115">2.1. XML documents</a></span></dt><dt><span class="section"><a href="#d5e137">2.2. Unicode and UTF-8</a></span></dt><dt><span class="section"><a href="#d5e153">2.3. XML namespaces</a></span></dt><dt><span class="section"><a href="#d5e176">2.4. Correct XML documents</a></span></dt><dt><span class="section"><a href="#d5e217">2.5. The evolution of HTML</a></span></dt><dt><span class="section"><a href="#d5e283">2.6. HTML forms</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e353">3. Styling Web Documents and User Interfaces with CSS</a></span></dt><dt><span class="section"><a href="#d5e384">4. JavaScript - "the assembly language of the Web"</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e427">4.1. JavaScript as an object-oriented language</a></span></dt><dt><span class="section"><a href="#d5e438">4.2. Further reading about JavaScript</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e451">5. Accessibility for Web Apps</a></span></dt><dt><span class="section"><a href="#d5e477">6. Quiz Questions</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e479">6.1. Question 1: Well-formed XML documents</a></span></dt><dt><span class="section"><a href="#d5e486">6.2. Question 2: Well-formed XML</a></span></dt><dt><span class="section"><a href="#d5e493">6.3. Question 3: Valid XHTML</a></span></dt><dt><span class="section"><a href="#d5e506">6.4. Question 4: Valid XHTML5</a></span></dt><dt><span class="section"><a href="#d5e513">6.5. Question 5: HTML forms</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#d5e532">2. More on JavaScript</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e534">1. JavaScript Basics</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e539">1.1. Types and data literals in JavaScript</a></span></dt><dt><span class="section"><a href="#d5e788">1.2. Variable scope</a></span></dt><dt><span class="section"><a href="#d5e812">1.3. Frozen, or immutable, variables</a></span></dt><dt><span class="section"><a href="#d5e820">1.4. Strict Mode</a></span></dt><dt><span class="section"><a href="#d5e831">1.5. Different kinds of objects</a></span></dt><dt><span class="section"><a href="#d5e936">1.6. Array lists</a></span></dt><dt><span class="section"><a href="#d5e1019">1.7. Maps</a></span></dt><dt><span class="section"><a href="#d5e1088">1.8. Important types of basic data structures</a></span></dt><dt><span class="section"><a href="#d5e1144">1.9. Procedures, methods and functions</a></span></dt><dt><span class="section"><a href="#sectClasses">1.10. Defining and using classes</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e1561">2. Storing Database Tables with JavaScript's localStorage API</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e1567">2.1. Entity Tables</a></span></dt><dt><span class="section"><a href="#d5e1614">2.2. JavaScript's LocalStorage API</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e1654">3. New JavaScript Elements</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e1657">3.1. Block-Scope Variable Declarations with <code class="literal">let</code> and
    <code class="literal">const</code></a></span></dt><dt><span class="section"><a href="#d5e1682">3.2. Arrow Functions</a></span></dt><dt><span class="section"><a href="#d5e1695">3.3. For-Of Loops over Iterable Objects</a></span></dt><dt><span class="section"><a href="#d5e1714">3.4. Template Literals</a></span></dt><dt><span class="section"><a href="#d5e1720">3.5. The Spread Operator</a></span></dt><dt><span class="section"><a href="#d5e1727">3.6. Destructuring Assignments</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e1749">4. Quiz Questions</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e1751">4.1. Question 1: Data values and objects</a></span></dt><dt><span class="section"><a href="#d5e1760">4.2. Question 2: Evaluating a Boolean expression</a></span></dt><dt><span class="section"><a href="#d5e1765">4.3. Question 3: JavaScript datatypes</a></span></dt><dt><span class="section"><a href="#d5e1769">4.4. Question 4: Constructor-based class definition</a></span></dt><dt><span class="section"><a href="#d5e1792">4.5. Question 5: Type coercion</a></span></dt><dt><span class="section"><a href="#d5e1801">4.6. Question 6: Variable scope</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chMinAppJs">3. A Minimal Web App with Plain JS</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e1865">1. Step 1 - Set up the Folder Structure</a></span></dt><dt><span class="section"><a href="#d5e1880">2. Step 2 - Write the Model Code</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e1930">2.1. Representing the collection of all <code class="code">Book</code>
      instances</a></span></dt><dt><span class="section"><a href="#d5e1954">2.2. Creating a new <code class="code">Book</code> instance</a></span></dt><dt><span class="section"><a href="#d5e1963">2.3. Retrieving all <code class="code">Book</code> instances</a></span></dt><dt><span class="section"><a href="#d5e1993">2.4. Updating a <code class="code">Book</code> instance</a></span></dt><dt><span class="section"><a href="#d5e2001">2.5. Deleting a <code class="code">Book</code> instance</a></span></dt><dt><span class="section"><a href="#d5e2009">2.6. Saving all <code class="code">Book</code> instances</a></span></dt><dt><span class="section"><a href="#d5e2027">2.7. Creating test data</a></span></dt><dt><span class="section"><a href="#d5e2032">2.8. Clearing all data</a></span></dt></dl></dd><dt><span class="section"><a href="#sectMinAppInitialize">3. Step 3 - Initialize the Application</a></span></dt><dt><span class="section"><a href="#d5e2051">4. Step 4 - Implement the <span class="italic">Create</span>
    Use Case</a></span></dt><dt><span class="section"><a href="#d5e2087">5. Step 5 - Implement the <span class="italic">Retrieve/List
    All</span> Use Case</a></span></dt><dt><span class="section"><a href="#d5e2118">6. Step 6 - Implement the <span class="italic">Update</span>
    Use Case</a></span></dt><dt><span class="section"><a href="#d5e2158">7. Step 7 - Implement the <span class="italic">Delete</span>
    Use Case</a></span></dt><dt><span class="section"><a href="#d5e2176">8. Possible Variations and Extensions</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e2178">8.1. Using IndexedDB as an Alternative to LocalStorage</a></span></dt><dt><span class="section"><a href="#d5e2195">8.2. Styling the User Interface</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e2227">9. Points of Attention</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e2229">9.1. Catching invalid data</a></span></dt><dt><span class="section"><a href="#d5e2234">9.2. Database size and memory management</a></span></dt><dt><span class="section"><a href="#d5e2239">9.3. Boilerplate code</a></span></dt><dt><span class="section"><a href="#d5e2251">9.4. Serializing and de-serializing attribute values</a></span></dt><dt><span class="section"><a href="#d5e2268">9.5. Implicit versus explicit form field labels</a></span></dt><dt><span class="section"><a href="#d5e2298">9.6. Synchronizing views with the model</a></span></dt><dt><span class="section"><a href="#d5e2322">9.7. Architectural separation of concerns</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e2336">10. Quiz Questions</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e2338">10.1. Question 1: Properties/methods of a model class</a></span></dt><dt><span class="section"><a href="#d5e2343">10.2. Question 2: Using the <code class="code">output</code> element</a></span></dt><dt><span class="section"><a href="#d5e2349">10.3. Question 3: Entity tables</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e2466">11. Practice Projects</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e2468">11.1. Managing information about movies</a></span></dt><dt><span class="section"><a href="#d5e2538">11.2. Managing persistent data with IndexedDB</a></span></dt></dl></dd></dl></dd><dt><span class="glossary"><a href="#d5e2543">Glossary</a></span></dt></dl></div><div class="list-of-figures"><p><b>List of Figures</b></p><dl><dt>2.1. <a href="#figJsBasicsJsMetamodel">The built-in JavaScript classes <code class="code">Object</code> and
        <code class="code">Function</code>.</a></dt><dt>3.1. <a href="#figBookMinAppModel">The object type <code class="code">Book</code>.</a></dt><dt>3.2. <a href="#figMovieMinApp">The object type <code class="code">Movie</code>.</a></dt></dl></div><div class="list-of-tables"><p><b>List of Tables</b></p><dl><dt>2.1. <a href="#d5e1118">An example of an entity table representing a collection of
      books</a></dt><dt>2.2. <a href="#tblJsClasses">Required and desirable features of JS code patterns for
      classes</a></dt><dt>3.1. <a href="#tblBooks">A collection of book objects represented as a table</a></dt><dt>3.2. <a href="#d5e2504">Sample data</a></dt></dl></div><div class="list-of-examples"><p><b>List of Examples</b></p><dl><dt>2.1. <a href="#d5e1687">Code Example 1</a></dt><dt>2.2. <a href="#d5e1691">Code Example 2</a></dt><dt>2.3. <a href="#d5e1733">Dealing with <span class="emphasis"><em>multiple return values</em></span> of a
      function</a></dt><dt>2.4. <a href="#d5e1738">Swapping two variables</a></dt><dt>2.5. <a href="#d5e1742">Simplifying functions with parameter records</a></dt></dl></div><div class="preface"><div class="titlepage"><div><div><h1 class="title"><a name="d5e32"></a>Foreword</h1></div></div></div><p>This tutorial is Part 1 of our series of <a class="link" href="../../JsFrontendApp.html" target="_top">six
    tutorials</a> about model-based development of front-end web
    applications with plain JavaScript. It shows how to build such an app with
    minimal effort, not using any (third-party) framework or library. While
    libraries and frameworks may help to increase productivity, they also
    create black-box dependencies and overhead, and they are not good for
    learning how to do it yourself.</p><p>This tutorial provides theoretically underpinned and example-based
    learning materials and supports <span class="bold"><strong><span class="italic">learning by doing it yourself</span></strong></span>.</p><p>A front-end web app can be provided by any web server, but it is
    executed on the user's computer device (smartphone, tablet or notebook),
    and not on the remote web server. Typically, but not necessarily, a
    front-end web app is a single-user application, which is not shared with
    other users.</p><p>The minimal version of a JavaScript front-end data management
    application discussed in this tutorial only includes a minimum of the
    overall functionality required for a complete app. It takes care of only
    one object type ("books") and supports the four standard data management
    operations (<span class="bold"><strong>C</strong></span>reate/<span class="bold"><strong>R</strong></span>ead/<span class="bold"><strong>U</strong></span>pdate/<span class="bold"><strong>D</strong></span>elete),
    but it needs to be enhanced by styling the user interface with CSS rules,
    and by adding further important parts of the app's overall functionality.
    The other parts of the tutorial are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="validation-tutorial.html" target="_top">Part 2</a>:
        Handling <span class="bold"><strong>constraint
        validation</strong></span>.</p></li><li class="listitem"><p><a class="link" href="enumeration-tutorial.html" target="_top">Part 3</a>:
        Dealing with <span class="bold"><strong>enumerations</strong></span>.</p></li><li class="listitem"><p><a class="link" href="unidirectional-association-tutorial.html" target="_top">Part
        4</a>: Managing <span class="bold"><strong>unidirectional
        associations</strong></span>, such as the associations between books and
        publishers, assigning a publisher to a book, and between books and
        authors, assigning authors to a book.</p></li><li class="listitem"><p><a class="link" href="bidirectional-association-tutorial.html" target="_top">Part
        5</a>: Managing <span class="bold"><strong>bidirectional
        associations</strong></span>, such as the associations between books and
        publishers and between books and authors, not only assigning authors
        and a publisher to a book, but also the other way around, assigning
        books to authors and to publishers.</p></li><li class="listitem"><p><a class="link" href="subtyping-tutorial.html" target="_top">Part 6</a>:
        Handling <span class="bold"><strong>subtype</strong></span> (inheritance)
        relationships between object types.</p></li></ul></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d5e66"></a>Chapter&nbsp;1.&nbsp;A Quick Tour of the Foundations of Web Apps</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#d5e69">1. The World Wide Web (WWW)</a></span></dt><dt><span class="section"><a href="#d5e107">2. HTML and XML</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e115">2.1. XML documents</a></span></dt><dt><span class="section"><a href="#d5e137">2.2. Unicode and UTF-8</a></span></dt><dt><span class="section"><a href="#d5e153">2.3. XML namespaces</a></span></dt><dt><span class="section"><a href="#d5e176">2.4. Correct XML documents</a></span></dt><dt><span class="section"><a href="#d5e217">2.5. The evolution of HTML</a></span></dt><dt><span class="section"><a href="#d5e283">2.6. HTML forms</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e353">3. Styling Web Documents and User Interfaces with CSS</a></span></dt><dt><span class="section"><a href="#d5e384">4. JavaScript - "the assembly language of the Web"</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e427">4.1. JavaScript as an object-oriented language</a></span></dt><dt><span class="section"><a href="#d5e438">4.2. Further reading about JavaScript</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e451">5. Accessibility for Web Apps</a></span></dt><dt><span class="section"><a href="#d5e477">6. Quiz Questions</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e479">6.1. Question 1: Well-formed XML documents</a></span></dt><dt><span class="section"><a href="#d5e486">6.2. Question 2: Well-formed XML</a></span></dt><dt><span class="section"><a href="#d5e493">6.3. Question 3: Valid XHTML</a></span></dt><dt><span class="section"><a href="#d5e506">6.4. Question 4: Valid XHTML5</a></span></dt><dt><span class="section"><a href="#d5e513">6.5. Question 5: HTML forms</a></span></dt></dl></dd></dl></div><p>If you are already familiar with HTML, XML and JavaScript, you may
    skip this chapter and immediately start developing a minimal web
    application by going to the next chapter.</p><div lang="" class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e69"></a>1.&nbsp;The World Wide Web (WWW)</h2></div></div></div><p>After the Internet had been established in the 1980'ies, <a class="link" href="https://en.wikipedia.org/wiki/Tim_Berners-Lee" target="_top">Tim
  Berners-Lee</a><a class="indexterm" name="d5e73"></a> developed the idea and the first implementation of the WWW in
  1989 at the European research institution CERN in Geneva, Switzerland. The
  WWW (or, simply, "the Web") is based on the Internet technologies TCP/IP
  (the <span class="emphasis"><em>Internet Protocol</em></span>) and DNS (the <span class="emphasis"><em>Domain
  Name System</em></span>). Initially, the Web consisted of</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>the <a class="glossterm" href="#http"><em class="glossterm">Hypertext Transfer Protocol
        (HTTP)</em></a>,</p></li><li class="listitem"><p>the <a class="glossterm" href="#html"><em class="glossterm">Hypertext Markup Language
        (HTML)</em></a>, and</p></li><li class="listitem"><p>web server programs, acting as HTTP servers, as well as web
        'user agents' (such as browsers), acting as HTTP clients.</p></li></ol></div><p>Later, further important technology components have been added to this
  set of basic web technologies:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>the page/document style language <span class="italic"><a class="glossterm" href="#css"><em class="glossterm">Cascading Style
        Sheets (CSS)</em></a></span> in 1995,</p></li><li class="listitem"><p>the web programming language <span class="italic">JavaScript</span> in 1995,</p></li><li class="listitem"><p>the <span class="italic"><a class="glossterm" href="#xml"><em class="glossterm">Extensible Markup Language
       (XML)</em></a></span>, as the basis of web formats like SVG and RDF/XML, in
     1998,</p></li><li class="listitem"><p>the XML-based <span class="italic"><a class="glossterm" href="#SVG"><em class="glossterm">Scalable Vector
       Graphics (SVG)</em></a></span> format in 2001,</p></li><li class="listitem"><p>the <span class="italic"><a class="glossterm" href="#RDF"><em class="glossterm">Resource Description Framework
       (RDF)</em></a></span> for knowledge representation on the Web in 2004.</p></li></ul></div></div><div lang="" class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e107"></a>2.&nbsp;HTML and XML</h2></div></div></div><p>HTML<a class="indexterm" name="d5e110"></a> allows to mark up (or describe) the structure of a human-readable web document or web user interface, while XML<a class="indexterm" name="d5e112"></a> allows to mark up the structure of all kinds of documents, data files and messages, whether they are human-readable or not. XML can
  also be used as the basis for defining a version of HTML that is called <span class="emphasis"><em>XHTML</em></span>.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e115"></a>2.1.&nbsp;XML documents</h3></div></div></div><p>XML provides a syntax for expressing structured information in the form of an <span class="italic">XML document</span> with nested
    <span class="italic">elements</span> and their <span class="italic">attributes</span>. The specific elements and attributes used in
    an XML document can come from any vocabulary, such as public standards or (private) user-defined XML formats. XML is used for specifying
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="bold"><strong>document formats</strong></span>, such as <span class="italic">XHTML5</span>, the <span class="italic">Scalable Vector Graphics</span> (SVG) format or the <span class="italic">DocBook</span> format,</p></li><li class="listitem"><p><span class="bold"><strong>data interchange file formats</strong></span>, such as the <span class="italic">Mathematical Markup
          Language</span> (MathML) or the <span class="italic">Universal Business Language</span> (UBL),</p></li><li class="listitem"><p><span class="bold"><strong>message formats</strong></span>, such as the web service message format <a class="link" href="http://www.w3.org/TR/soap12-part0/" target="_top">SOAP</a></p></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e137"></a>2.2.&nbsp;Unicode and UTF-8</h3></div></div></div><p>XML is based on Unicode<a class="indexterm" name="d5e140"></a>, which is a platform-independent character set that includes almost all characters from most of the world's script languages
    including Hindi, Burmese and Gaelic. Each character is assigned a unique integer code in the range between 0 and 1,114,111. For example, the Greek
    letter &#960; has the code 960, so it can be inserted in an XML document as <code class="code">&amp;#960;</code> using the <span class="italic">XML
    entity</span> syntax.</p><p>Unicode includes legacy character sets like ASCII and ISO-8859-1 (Latin-1) as subsets.</p><p>The default encoding of an XML document is UTF-8<a class="indexterm" name="d5e146"></a>, which uses only a single byte for ASCII characters, but three bytes for less common characters.</p><p>Almost all Unicode characters are legal in a well-formed XML document. Illegal characters are the control characters with code 0 through 31,
    except for the <span class="italic">carriage return</span>, <span class="italic">line feed</span> and <span class="italic">tab</span>. It is therefore dangerous to copy text from another (non-XML) text to an XML document (often, the <span class="italic">form feed</span> character creates a problem).</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e153"></a>2.3.&nbsp;XML namespaces</h3></div></div></div><p>Generally, namespaces help to avoid name conflicts. They allow to reuse the same (local) name in different namespace contexts. Many
    computational languages have some form of namespace concept, for instance, Java and PHP.</p><p>XML namespaces<a class="indexterm" name="d5e157"></a> are identified with the help of a <span class="italic">namespace URI</span>, such as the SVG namespace URI
    "http://www.w3.org/2000/svg", which is associated with a <span class="italic">namespace prefix</span>, such as <code class="code">svg</code>. Such a
    namespace represents a collection of names, both for elements and attributes, and allows namespace-qualified names of the form <span class="italic">prefix:name</span>, such as <code class="code">svg:circle</code> as a namespace-qualified name for SVG circle elements.</p><p>A default namespace<a class="indexterm" name="d5e166"></a> is declared in the start tag of an element in the following way:</p><pre class="programlisting">&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;</pre><p>This
    example shows the start tag of the HTML root element, in which the XHTML namespace is declared as the default namespace.</p><p>The following example shows an SVG namespace declaration for an <code class="code">svg</code> element embedded in an HTML document:</p><pre class="programlisting">&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
  &lt;head&gt;
   ...
  &lt;/head&gt;
  &lt;body&gt;
    &lt;figure&gt;
      &lt;figcaption&gt;Figure 1: A blue circle&lt;/figcaption&gt;
      &lt;<span class="bold"><strong>svg</strong></span>:svg xmlns:<span class="bold"><strong>svg</strong></span>="http://www.w3.org/2000/svg"&gt;
        &lt;<span class="bold"><strong>svg</strong></span>:circle cx="100" cy="100" r="50" fill="blue"/&gt;
      &lt;/svg:svg&gt;
    &lt;/figure&gt;
  &lt;/body&gt;
&lt;/html&gt;</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e176"></a>2.4.&nbsp;Correct XML documents</h3></div></div></div><p>XML<a class="indexterm" name="d5e179"></a> defines two syntactic correctness criteria. An XML document must be <span class="italic">well-formed</span>, and if it is
    based on a grammar (or schema), then it must also be <span class="italic">valid</span> with respect to that grammar, or, in other words,
    satisfy all rules of the grammar.</p><p>An XML document is called <span class="italic"><span class="bold"><strong>well-formed</strong></span></span>,<a class="indexterm" name="d5e186"></a> if it satisfies the following syntactic conditions: </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>There must be exactly one root element.</p></li><li class="listitem"><p>Each element has a start tag and an end tag; however, empty elements can be closed as <code class="code">&lt;phone/&gt;</code> instead of
          <code class="code">&lt;phone&gt;&lt;/phone&gt;</code>.</p></li><li class="listitem"><p>Tags don't overlap. For instance, we cannot have</p><pre class="programlisting">&lt;author&gt;&lt;name&gt;Lee Hong&lt;/author&gt;&lt;/name&gt;</pre></li><li class="listitem"><p>Attribute names are unique within the scope of an element. For instance, the following code is not correct:</p><pre class="programlisting">&lt;attachment file="lecture2.html" file="lecture3.html"/&gt;</pre></li></ol></div><p>An XML document is called <span class="italic"><span class="bold"><strong>valid</strong></span></span><a class="indexterm" name="d5e205"></a> against a particular grammar (such as a <span class="italic">DTD</span> or an <span class="italic">XML
    Schema</span>), if </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>it is <span class="italic">well-formed</span>,</p></li><li class="listitem"><p>and it <span class="italic">respects the grammar</span>.</p></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e217"></a>2.5.&nbsp;The evolution of HTML</h3></div></div></div><p>The World-Wide Web Committee (W3C) has developed the following important versions of HTML: </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>1997: <span class="bold"><strong>HTML 4</strong></span><a class="indexterm" name="d5e224"></a> as an SGML-based language,</p></li><li class="listitem"><p>2000: <span class="bold"><strong>XHTML 1</strong></span> as an XML-based clean-up of HTML 4,</p></li><li class="listitem"><p>2014: <span class="italic">(X)<span class="bold"><strong>HTML 5</strong></span></span><a class="indexterm" name="d5e234"></a> in cooperation (and competition) with the <a class="link" href="https://en.wikipedia.org/wiki/WHATWG" target="_top">WHAT working group</a>
          supported by browser vendors.</p></li></ul></div><div class="sidebar"><div class="titlepage"></div><p>As the inventor of the Web, Tim Berners-Lee<a class="indexterm" name="d5e240"></a> developed a <a class="link" href="http://www.w3.org/History/19921103-hypertext/hypertext/WWW/MarkUp/Tags.html" target="_top">first version of
      HTML</a> in 1990. A few years later, in 1995, Tim Berners-Lee and Dan Connolly wrote the <a class="link" href="http://www.ietf.org/rfc/rfc1866.txt" target="_top"><span class="emphasis"><em>HTML 2</em></span></a> standard, which captured the common use of HTML elements at
      that time. In the following years, HTML has been used and gradually extended by a growing community of early WWW adopters. This evolution of
      HTML, which has led to a messy set of elements and attributes (called "tag soup"), has been mainly controlled by browser vendors and their
      competition with each other. The development of XHTML in 2000 was an attempt by the W3C to clean up this mess, but it neglected to advance
      HTML's functionality towards a richer user interface, which was the focus of the <a class="link" href="https://en.wikipedia.org/wiki/WHATWG" target="_top">WHAT
      working group</a> led by <a class="link" href="https://en.wikipedia.org/wiki/Ian_Hickson" target="_top">Ian Hickson</a> who can be considered as the
      mastermind and main author of HTML 5 and many of its accompanying JavaScript APIs that made HTML fit for mobile apps.</p></div><p>HTML was originally designed as a <span class="italic">structure</span> description language, and not as a <span class="italic">presentation</span> description language. But HTML4 has a lot of purely presentational elements such as <code class="code">font</code>. XHTML
    has been taking HTML back to its roots, dropping presentational elements and defining a simple and clear syntax, in support of the goals of
    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>device independence,</p></li><li class="listitem"><p>accessibility, and</p></li><li class="listitem"><p>usability.</p></li></ul></div><p>We adopt the symbolic equation</p><div class="blockquote"><blockquote class="blockquote"><p><span class="italic"><span class="bold"><strong>HTML = HTML5 = XHTML5</strong></span></span></p><p><span class="italic"><span class="emphasis"><em>stating that when we say "HTML" or "HTML5", we actually mean </em></span>XHTML5</span></p></blockquote></div><p>because we prefer the clear syntax of XML documents over the liberal and confusing HTML4-style syntax that is also allowed by HTML5.</p><p>The following simple example shows the basic code template to be used for any HTML document:</p><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8" /&gt;
  &lt;title&gt;XHTML5 Template Example&lt;/title&gt;
  &lt;meta name="viewport" content="width=device-width, initial-scale=1"/&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h1&gt;XHTML5 Template Example&lt;/h1&gt;
  &lt;section&gt;&lt;h2&gt;First Section Title&lt;/h2&gt;
   ...
  &lt;/section&gt;
&lt;/body&gt;
&lt;/html&gt;</pre><p>Notice that in line 1, the HTML5 document type is declared, such that browsers are instructed to use the HTML5 document object model (DOM).
    In the <code class="code">html</code> start tag in line 2, using the default namespace declaration attribute <code class="code">xmlns</code>, the XHTML namespace URI
    <code class="code">http://www.w3.org/1999/xhtml</code> is declared as the default namespace for making sure that browsers, and other tools, understand that all
    non-qualified element names like <code class="code">html</code>, <code class="code">head</code>, <code class="code">body</code>, etc. are from the XHTML namespace.</p><p>Also in the <code class="code">html</code> start tag, we set the (default) language for the text content of all elements (here to "en" standing for
    English) using both the <code class="code">xml:lang</code> attribute and the HTML <code class="code">lang</code> attribute. This attribute duplication is a small price to
    pay for having a hybrid document that can be processed both by HTML and by XML tools.</p><p>Finally, in line 4, using an (empty) <code class="code">meta</code> element with a <code class="code">charset</code> attribute, we set the HTML document's character
    encoding to UTF-8, which is also the default for XML documents.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e283"></a>2.6.&nbsp;HTML forms</h3></div></div></div><p>For<a class="indexterm" name="d5e286"></a> user-interactive web applications, the web browser needs to render a user interface (UI). The traditional metaphor for a software
    application's UI is that of a <span class="emphasis"><em><span class="bold"><strong>form</strong></span></em></span>. The special elements for data input, data output and
    user actions are called <span class="emphasis"><em><span class="bold"><strong>form controls</strong></span></em></span> or <span class="emphasis"><em>UI <span class="bold"><strong>widgets</strong></span></em></span>. In HTML, a <code class="code">form</code> element is a section of a web page consisting of block elements that
    contain form controls and <span class="italic">labels</span> on those controls.</p><p>Users complete a form by entering text into <span class="italic">input fields</span> and by selecting items from <span class="italic">choice controls</span>, including dropdown <span class="emphasis"><em>selection lists</em></span>, <span class="emphasis"><em>radio button groups</em></span> and
    <span class="emphasis"><em>checkbox groups</em></span>. A completed form is submitted with the help of a <span class="italic">submit button</span>. When a
    user submits a form, it is normally sent to a web server either with the HTTP GET method or with the HTTP POST method. The standard encoding for
    the submission is called <span class="italic">URL-encoded<a class="indexterm" name="d5e305"></a></span>. It is represented by the Internet media type <code class="code">application/x-www-form-urlencoded</code>. In this encoding, spaces
    become plus signs, and any other reserved characters become encoded as a percent sign and hexadecimal digits, as defined in RFC 1738.</p><p>Each form control has both an initial value and a current value, both of which are strings. The initial value is specified with the control
    element's <code class="code">value</code> attribute, except for the initial value of a <code class="code">textarea</code> element, which is given by its initial contents.
    The control's current value is first set to the initial value. Thereafter, the control's current value may be modified through user interaction or
    scripts. When a form is submitted for processing, some controls have their name paired with their current value and these pairs are submitted with
    the form.</p><p>Labels are associated with a control by including the control as a child element within a <code class="code">label</code> element
    (<span class="emphasis"><em>implicit</em></span> labels), or by giving the control an <code class="code">id</code> value and referencing this ID in the <code class="code">for</code>
    attribute of the <code class="code">label</code> element (<span class="emphasis"><em>explicit</em></span> labels).</p><p>In the simple user interfaces of our "Getting Started" applications, we only need four types of form controls:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><span class="italic">single line input fields</span> created with an <code class="code">&lt;input name="..." /&gt;</code> element,</p></li><li class="listitem"><p><span class="italic">single line output fields</span> created with an <code class="code">&lt;output name="..." /&gt;</code> element,</p></li><li class="listitem"><p><span class="italic">push buttons</span> created with a <code class="code">&lt;button type="button"&gt;...&lt;/button&gt;</code> element,
          and</p></li><li class="listitem"><p><span class="italic">dropdown selection lists</span> created with a <code class="code">select</code> element of the following
          form:</p><pre class="programlisting">&lt;select name="..."&gt;
  &lt;option value="value1"&gt; option1 &lt;/option&gt;
  &lt;option value="value2"&gt; option2 &lt;/option&gt;
  ...
&lt;/select&gt;</pre></li></ol></div><p>An example of an HTML form with implicit labels<a class="indexterm" name="d5e338"></a> for creating such a user interface is</p><pre class="programlisting">&lt;form id="Book"&gt;
  &lt;p&gt;&lt;label&gt;ISBN: &lt;output name="isbn" /&gt;&lt;/label&gt;&lt;/p&gt;
  &lt;p&gt;&lt;label&gt;Title: &lt;input name="title" /&gt;&lt;/label&gt;&lt;/p&gt;
  &lt;p&gt;&lt;label&gt;Year: &lt;input name="year" /&gt;&lt;/label&gt;&lt;/p&gt;
  &lt;p&gt;&lt;button type="button"&gt;Save&lt;/button&gt;&lt;/p&gt;
&lt;/form&gt;</pre><p>In an HTML-form-based data management user interface, we have a correspondence between the different kinds of properties defined in the
    model classes of an app and the form controls used for the input and output of their values. We have to distinguish between various kinds of
    <span class="bold"><strong>model class attributes</strong></span>, which are mapped to various kinds of <span class="bold"><strong>form fields</strong></span>. This
    mapping is also called <span class="bold"><strong>data binding</strong></span>.</p><p>In general, an attribute of a model class can always be represented in the user interface by a plain <code class="code">input</code> control (with the
    default setting <code class="code">type="text"</code>), no matter which datatype has been defined as the range of the attribute in the model class. However, in
    special cases, other types of <code class="code">input</code> controls (for instance, <code class="code">type="date"</code>), or other widgets, may be used. For instance,
    if the attribute's range is an enumeration, a <code class="code">select</code> control or, if the number of possible choices is small enough (say, less than
    8), a radio button group can be used.</p></div></div><div lang="" class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e353"></a>3.&nbsp;Styling Web Documents and User Interfaces with CSS</h2></div></div></div><p>While HTML is used for defining the content structure of a web
  document or a web user interface, the <span class="bold"><strong><span class="italic">Cascading Style Sheets (CSS<a class="indexterm" name="d5e358"></a>)</span></strong></span> language is used for defining the
  <span class="italic"><span class="bold"><strong>presentation
  style</strong></span></span> of web pages, which means that you use it for
  telling the browser how you want your HTML (or XML) rendered: using which
  layout of content elements, which fonts and text styles, which colors, which
  backgrounds, and which animations. Normally, these settings are made in a
  separate CSS file that is associated with an HTML file via a special
  <code class="code">link</code> element in the HTML's <code class="code">head</code>.</p><div class="sidebar"><div class="titlepage"></div><p>A <a class="link" href="http://www.w3.org/People/howcome/p/cascade.html" target="_top">first sketch
    of CSS</a> was proposed in October 1994 by <a class="link" href="https://en.wikipedia.org/wiki/Håkon_Wium_Lie" target="_top">H&aring;kon W.
    Lie</a><a class="indexterm" name="d5e368"></a> who later became the CTO of the browser vendor Opera. While
    the official <a class="link" href="http://www.w3.org/TR/REC-CSS1/" target="_top">CSS1</a>
    standard dates back to December 1996, "most of it was hammered out on a
    whiteboard in Sophia-Antipolis" by H&aring;kon W. Lie together with Bert Bos in
    July 1995 (as he explains in an <a class="link" href="https://medium.com/net-magazine/interview-with-håkon-wium-lie-f3328aeca8ed" target="_top">interview</a>).</p></div><p>CSS is based on a form of rules that consist of <span class="italic">selectors</span>, which select the document element(s) to
  which a rule applies, and a list of <span class="italic">property-value
  pairs</span> that define the styling of the selected element(s) with the
  help of CSS properties such as <code class="code">font-size</code> or <code class="code">color</code>.
  There are two fundamental mechanisms for computing the CSS property values
  for any page element as a result of applying the given set of CSS rules:
  <span class="italic">inheritance</span> and <span class="italic">the cascade</span>.</p><p>The basic element of a <a class="link" href="http://learnlayout.com/" target="_top">CSS
  layout</a> is a rectangle, also called "box", with an inner content area,
  an optional border, an optional padding (between content and border) and an
  optional margin around the border. This structure is defined by the CSS
  <span class="italic">box model</span>.</p><p>We will not go deeper into CSS in this <span class="phrase">tutorial,</span>   since our focus
  here is on the logic and functionality of an app, and not so much on its
  beauty.</p></div><div lang="" class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e384"></a>4.&nbsp;JavaScript - "the assembly language of the Web"</h2></div></div></div><div class="sidebar"><div class="titlepage"></div><p>JavaScript was developed in 10 days in May 1995 by <a class="link" href="https://en.wikipedia.org/wiki/Brendan_Eich" target="_top">Brendan
    Eich</a>,<a class="indexterm" name="d5e389"></a> then working at <a class="link" href="https://en.wikipedia.org/wiki/Netscape" target="_top">Netscape</a>, as the HTML scripting language for their
    browser <span class="italic">Navigator 2</span> (<a class="link" href="http://www.w3.org/community/webed/wiki/A_Short_History_of_JavaScript" target="_top">more about history</a>). Brendan Eich said (at the O'Reilly
    Fluent conference in San Francisco in April 2015): "I did JavaScript in such a hurry, I never dreamed it would become the assembly language for
    the Web".</p></div><p>JavaScript<a class="indexterm" name="d5e395"></a> is a dynamic functional object-oriented programming language that can be used for </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Enriching a web page by</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>generating browser-specific HTML content or CSS styling,</p></li><li class="listitem"><p>inserting dynamic HTML content,</p></li><li class="listitem"><p>producing special audio-visual effects (animations).</p></li></ul></div></li><li class="listitem"><p>Enriching a web user interface by</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>implementing advanced user interface components,</p></li><li class="listitem"><p>validating user input on the client side,</p></li><li class="listitem"><p>automatically pre-filling certain form fields.</p></li></ul></div></li><li class="listitem"><p>Implementing a front-end web application with local or remote data storage<span class="phrase">, as described in the book <a class="link" href="../../JsFrontendApp-Book.html" target="_top">Building Front-End Web Apps with Plain JavaScript</a></span>.</p></li><li class="listitem"><p>Implementing a front-end component for a distributed web application with remote data storage managed by a back-end component, which is
        a server-side program that is traditionally written in a server-side language such as PHP, Java or C#, but can nowadays also be written in
        JavaScript with NodeJS.</p></li><li class="listitem"><p>Implementing a complete distributed web application where both the front-end and the back-end components are JavaScript programs.</p></li></ol></div><p>The version of JavaScript that is currently fully supported by modern web browsers is called "ECMAScript 2015",<a class="indexterm" name="d5e425"></a> or simply "ES2015", but the following versions, ( ES2016, ES2017, ...), are already partially supported by current browsers and
  back-end JS environments.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e427"></a>4.1.&nbsp;JavaScript as an object-oriented language</h3></div></div></div><p>JavaScript is <span class="italic">object-oriented</span>, but in a different way than classical OO programming languages such as
    Java and C++. In JavaScript, classes, unlike objects and functions, have not been first-class citizens until ES2015 has introduced a
    <code class="code">class</code> syntax. Before ES2015, classes had to be defined by following a code pattern in the form of special JS objects: either as
    <span class="italic">constructor</span> functions or as <span class="italic">factory</span> objects. Notice that when using (the
    syntactic sugar of) ES2015 <code class="code">class</code> declarations, what is really defined internally, is still a constructor function.</p><p>However, objects can also be created without instantiating a class, in which case they are <span class="italic">untyped</span>, and
    properties as well as methods can be defined for specific objects independently of any class definition. At run time, properties and methods can
    be added to, or removed from, any object and class. This dynamism of JavaScript allows powerful forms of <span class="italic">meta-programming</span>, such as defining your own concepts of classes and enumerations (and other special datatypes).</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e438"></a>4.2.&nbsp;Further reading about JavaScript</h3></div></div></div><p>Good open access books about JavaScript are</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="http://speakingjs.com/es5/index.html" target="_top">Speaking JavaScript</a>, by Dr. Axel Rauschmayer.</p></li><li class="listitem"><p><a class="link" href="http://eloquentjavascript.net/" target="_top">Eloquent JavaScript</a>, by Marijn Haverbeke.</p></li><li class="listitem"><p><a class="link" href="../../JsFrontendApp-Book.html" target="_top">Building Front-End Web Apps with Plain JavaScript</a>, by Gerd
          Wagner</p></li></ul></div></div></div><div lang="" class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e451"></a>5.&nbsp;Accessibility for Web Apps</h2></div></div></div><p>The recommended approach to providing accessibility<a class="indexterm" name="d5e454"></a> for web apps is defined by the <span class="italic">Accessible Rich Internet Applications <span class="bold"><strong>(ARIA)</strong></span></span> standard. As summarized by <a class="link" href="http://www.linkedin.com/profile/view?id=26751364&amp;trk=groups-post-b-author" target="_top">Bryan
  Garaventa</a> in his <a class="link" href="https://www.linkedin.com/grp/post/4512178-134539009" target="_top">article on
  different forms of accessibility</a>, there are 3 main aspects of
  accessibility for interactive web technologies: 1) keyboard accessibility,
  2) screen reader accessibility, and 3) cognitive accessibility.</p><p>Further reading on ARIA:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><a class="link" href="http://lnkd.in/kue-Q8" target="_top">How browsers interact
        with screen readers, and where ARIA fits in the mix</a> by Bryan
        Garaventa</p></li><li class="listitem"><p><a class="link" href="http://whatsock.com/training" target="_top">The
        Accessibility Tree Training Guide</a> by whatsock.com</p></li><li class="listitem"><p><a class="link" href="http://whatsock.com/training/matrices" target="_top">The
        ARIA Role Conformance Matrices</a> by whatsock.com</p></li><li class="listitem"><p>Mozilla's <a class="link" href="https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA" target="_top">ARIA
        overview article</a></p></li><li class="listitem"><p>W3C's <a class="link" href="https://www.w3.org/TR/wai-aria-practices/" target="_top">ARIA Authoring Practices</a></p></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e477"></a>6.&nbsp;Quiz Questions</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e479"></a>6.1.&nbsp;Question 1: Well-formed XML documents</h3></div></div></div><p>Which of the following statements represent a requirement for a
        well-formed XML document? Select one or more:</p><p>&#9744; The root element must have a namespace attribute.</p><p>&#9744; There must be one and only one top level element.</p><p>&#9744; All non-empty elements must have a start-tag and an end-tag
        with matching names.</p><p>&#9744; Element names must be lower case.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e486"></a>6.2.&nbsp;Question 2: Well-formed XML</h3></div></div></div><p>Which of the following fragments are well-formed XML? Select one
        or more:</p><p>&#9744; &lt;strong&gt;This text is bold. &lt;em&gt;and this is
        italicized and bold.&lt;/EM&gt;&lt;/strong&gt;&lt;em&gt;and this is
        just italics.&lt;/em&gt;</p><p>&#9744; &lt;STRONGER&gt;This text is bold. &lt;emph&gt;And this is
        italicized and bold.&lt;/STRONGER&gt; And this is just
        italics.&lt;/emph&gt;</p><p>&#9744; &lt;stronger&gt;This text is bold. &lt;emph&gt;And this is
        italicized and bold.&lt;/emph&gt;&lt;/stronger&gt;&lt;emph&gt;And this
        is just italics.&lt;/emph&gt;</p><p>&#9744; &lt;emph&gt;&lt;STRONGER&gt;This is some text &lt;bold&gt;and
        this is more text. Here is even more&lt;/bold&gt;
        text.&lt;/STRONGER&gt;&lt;/emph&gt;</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e493"></a>6.3.&nbsp;Question 3: Valid XHTML</h3></div></div></div><p>Which of the following fragments are valid XHTML? Select one or
        more:</p><p>&#9744; </p><pre class="programlisting">&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
  &lt;head&gt;&lt;title&gt;My Title&lt;/title&gt;&lt;/head&gt;
  &lt;body&gt;&lt;a href="http://www.examples.org"/&gt;Jump!&lt;/a&gt;&lt;/body&gt;
&lt;/html&gt;</pre><p>&#9744; </p><pre class="programlisting">&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
  &lt;head&gt;&lt;title&gt;My Title&lt;/title&gt;&lt;/head&gt;
  &lt;body&gt;&lt;p&gt;Lorem ipsum...&lt;/p&gt;&lt;/body&gt;
&lt;/html&gt;</pre><p>&#9744; </p><pre class="programlisting">&lt;h:html xmlns:h="http://www.w3.org/1999/xhtml"&gt;
  &lt;h:head&gt;&lt;h:meta charset="utf-8"&gt;&lt;/h:head&gt;
  &lt;h:body&gt;&lt;h:p&gt;Lorem ipsum...&lt;/h:p&gt;&lt;/h:body&gt;
&lt;/h:html&gt;</pre><p>&#9744; </p><pre class="programlisting">&lt;h:html xmlns:h="http://www.w3.org/1999/xhtml"&gt;
  &lt;h:head&gt;&lt;h:title&gt;My Title&lt;/h:title&gt;&lt;/h:head&gt;
  &lt;h:body&gt;&lt;h:div&gt;Lorem ipsum...&lt;/h:div&gt;&lt;/h:body&gt;
&lt;/h:html&gt;</pre><p>&#9744; </p><pre class="programlisting">&lt;h:html xmlns:h="http://www.w3.org/1999/xhtml"&gt;
  &lt;head&gt;&lt;title&gt;My Title&lt;/title&gt;&lt;/head&gt;
  &lt;body&gt;&lt;p&gt;Lorem ipsum...&lt;/p&gt;&lt;/body&gt;
&lt;/h:html&gt;</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e506"></a>6.4.&nbsp;Question 4: Valid XHTML5</h3></div></div></div><p>Which of the following are correct statements about an XHTML5
        document? Select one or more:</p><p>&#9744; The root element must be &lt;xhtml&gt;.</p><p>&#9744; The document must be well-formed.</p><p>&#9744; The root element and all its descendant elements must be in
        the namespace "http://www.w3.org/1999/xhtml".</p><p>&#9744; Case does not matter for element names, so both H1 and h1 can
        be used.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e513"></a>6.5.&nbsp;Question 5: HTML forms</h3></div></div></div><p>Recall that an HTML form is a section of a document consisting
        of block elements that contain controls and labels on those controls.
        Which of the following form elements represent correct forms? Select
        one or more:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>&#9744;</p><pre class="programlisting">&lt;form&gt;
  &lt;div&gt;&lt;label&gt;ISBN: &lt;input name="isbn" /&gt;&lt;/label&gt;&lt;/div&gt;
  &lt;div&gt;&lt;label&gt;Title: &lt;input name="title" /&gt;&lt;/label&gt;&lt;/div&gt;
&lt;/form&gt;</pre></li><li class="listitem"><p>&#9744;</p><pre class="programlisting">&lt;form&gt;
  &lt;div&gt;
    &lt;label for="isbn"&gt;ISBN: &lt;/label&gt;&lt;input id="isbn" name="isbn" /&gt;
    &lt;label for="title"&gt;title: &lt;/label&gt;&lt;input id="title" name="title" /&gt;
  &lt;/div&gt;
&lt;/form&gt;</pre></li><li class="listitem"><p>&#9744;</p><pre class="programlisting">&lt;form&gt;
  &lt;div&gt;&lt;label&gt;ISBN: &lt;/label&gt;&lt;input name="isbn" /&gt;&lt;/div&gt;
  &lt;div&gt;&lt;label&gt;title: &lt;/label&gt;&lt;input name="title" /&gt;&lt;/div&gt;
&lt;/form&gt;</pre></li><li class="listitem"><p>&#9744;</p><pre class="programlisting">&lt;form&gt;
  &lt;label&gt;ISBN: &lt;input name="isbn" /&gt;&lt;/label&gt;&lt;br /&gt;
  &lt;label&gt;Title: &lt;input name="title" /&gt;&lt;/label&gt;
&lt;/form&gt;</pre></li><li class="listitem"><p>&#9744;</p><pre class="programlisting">&lt;form&gt;
  &lt;div&gt;&lt;label for="isbn"&gt;ISBN: &lt;/label&gt;&lt;input name="isbn" /&gt;&lt;/div&gt;
  &lt;div&gt;&lt;label for="title"&gt;title: &lt;/label&gt;&lt;input name="title" /&gt;&lt;/div&gt;
&lt;/form&gt;</pre></li></ol></div></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="d5e532"></a>Chapter&nbsp;2.&nbsp;More on JavaScript</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#d5e534">1. JavaScript Basics</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e539">1.1. Types and data literals in JavaScript</a></span></dt><dt><span class="section"><a href="#d5e788">1.2. Variable scope</a></span></dt><dt><span class="section"><a href="#d5e812">1.3. Frozen, or immutable, variables</a></span></dt><dt><span class="section"><a href="#d5e820">1.4. Strict Mode</a></span></dt><dt><span class="section"><a href="#d5e831">1.5. Different kinds of objects</a></span></dt><dt><span class="section"><a href="#d5e936">1.6. Array lists</a></span></dt><dt><span class="section"><a href="#d5e1019">1.7. Maps</a></span></dt><dt><span class="section"><a href="#d5e1088">1.8. Important types of basic data structures</a></span></dt><dt><span class="section"><a href="#d5e1144">1.9. Procedures, methods and functions</a></span></dt><dt><span class="section"><a href="#sectClasses">1.10. Defining and using classes</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e1561">2. Storing Database Tables with JavaScript's localStorage API</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e1567">2.1. Entity Tables</a></span></dt><dt><span class="section"><a href="#d5e1614">2.2. JavaScript's LocalStorage API</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e1654">3. New JavaScript Elements</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e1657">3.1. Block-Scope Variable Declarations with <code class="literal">let</code> and
    <code class="literal">const</code></a></span></dt><dt><span class="section"><a href="#d5e1682">3.2. Arrow Functions</a></span></dt><dt><span class="section"><a href="#d5e1695">3.3. For-Of Loops over Iterable Objects</a></span></dt><dt><span class="section"><a href="#d5e1714">3.4. Template Literals</a></span></dt><dt><span class="section"><a href="#d5e1720">3.5. The Spread Operator</a></span></dt><dt><span class="section"><a href="#d5e1727">3.6. Destructuring Assignments</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e1749">4. Quiz Questions</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e1751">4.1. Question 1: Data values and objects</a></span></dt><dt><span class="section"><a href="#d5e1760">4.2. Question 2: Evaluating a Boolean expression</a></span></dt><dt><span class="section"><a href="#d5e1765">4.3. Question 3: JavaScript datatypes</a></span></dt><dt><span class="section"><a href="#d5e1769">4.4. Question 4: Constructor-based class definition</a></span></dt><dt><span class="section"><a href="#d5e1792">4.5. Question 5: Type coercion</a></span></dt><dt><span class="section"><a href="#d5e1801">4.6. Question 6: Variable scope</a></span></dt></dl></dd></dl></div><div lang="en" class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e534"></a>1.&nbsp;JavaScript Basics</h2></div></div></div><p>In this summary we take all important points of the <a class="link" href="http://javascript.crockford.com/survey.html" target="_top">classical
  JavaScript summary</a> by <a class="link" href="http://www.crockford.com/" target="_top">Douglas Crockford</a> into
  consideration.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e539"></a>1.1.&nbsp;Types and data literals in JavaScript</h3></div></div></div><p>JavaScript<a class="indexterm" name="d5e542"></a> has three primitive datatypes:<a class="indexterm" name="d5e544"></a> <code class="code">string</code>, <code class="code">number</code> and
    <code class="code">boolean</code>, and we can test if a variable <code class="code">v</code> holds a
    value of such a type with the help of the JS operator <code class="code">typeof</code>
    as, for instance, in <code class="code">typeof v === "number"</code>.</p><p>There are five reference types: <code class="code">Object</code>,
    <code class="code">Array</code>, <code class="code">Function</code>, <code class="code">Date</code> and
    <code class="code">RegExp</code>. Arrays, functions, dates and regular expressions are
    special types of objects, but, conceptually, dates and regular expressions
    are primitive data values, and happen to be implemented in the form of
    wrapper objects.</p><p>The types of variables, array elements, function parameters and
    return values are not declared and are normally not checked by JavaScript
    engines. Type conversion (casting) is performed automatically.</p><p>The value of a variable may be</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>a <span class="italic">data value</span>: either a
        string, a number, or a boolean;</p></li><li class="listitem"><p>an <span class="italic">object reference</span>: either
        referencing an ordinary object, or an array, function, date, or
        regular expression;</p></li><li class="listitem"><p>the special data value <code class="code">null</code>, which is typically
        used as a default value for initializing an object variable;</p></li><li class="listitem"><p>the special data value <code class="code">undefined</code>, which is the
        implicit initial value of all variables that have been declared, but
        not initialized.</p></li></ul></div><p>A <span class="bold"><strong><span class="italic">string</span></strong></span> is a sequence of Unicode
    characters. String literals, like "Hello world!", 'A3F0', or the empty
    string "", are enclosed in single or double quotes. Two string expressions
    can be concatenated with the <code class="code">+</code> operator, and checked for
    equality with the triple equality operator:</p><pre class="programlisting">if (firstName + lastName === "JamesBond") ...</pre><p>The number of characters of a string can be obtained by applying the
    <code class="code">length</code> attribute to a string:</p><pre class="programlisting">console.log("Hello world!".length);  // 12</pre><p>All <span class="bold"><strong><span class="italic">numeric</span></strong></span> data values are represented in
    64-bit floating point format with an optional exponent (like in the
    numeric data literal <code class="code">3.1e10</code>). There is no explicit type
    distinction between integers and floating point numbers. If a numeric
    expression cannot be evaluated to a number, its value is set to
    <code class="code">NaN</code> ("not a number"), which can be tested with the built-in
    predicate
    <code class="code">isNaN(</code><span class="emphasis"><em>expr</em></span><code class="code">)</code>.</p><p>The built-in function, <code class="code">Number.isInteger</code> allows testing
    if a number is an <span class="bold"><strong><span class="italic">integer</span></strong></span>. For making sure that a
    numeric value is an integer, or that a string representing a number is
    converted to an integer, one has to apply the built-in function
    <code class="code">parseInt</code>. Similarly, a string representing a decimal number
    can be converted to this number with <code class="code">parseFloat</code>. For
    converting a number <code class="code">n</code> to a string, the best method is using
    <code class="code">String(n)</code>.</p><p>There are two predefined <span class="bold"><strong><span class="italic">Boolean</span></strong></span> data literals,
    <code class="code">true</code> and <code class="code">false</code>, and the Boolean operator symbols
    are the exclamation mark <code class="code">!</code> for NOT, the double ampersand
    <code class="code">&amp;&amp;</code> for AND, and the double bar <code class="code">||</code> for
    OR. When a non-Boolean value is used in a condition, or as an operand of a
    Boolean expression, it is implicitly converted to a Boolean value
    according to the following rules. The empty string, the (numerical) data
    literal 0, as well as <code class="code">undefined</code> and <code class="code">null</code>, are
    mapped to <code class="code">false</code>, and all other values are mapped to
    <code class="code">true</code>. This conversion can be performed explicitly with the
    help of the double negation operation, like in the equality test
    <code class="code">!!undefined === false</code>, which evaluates to
    <code class="code">true</code>.</p><p>In addition to strings, numbers and Boolean values, also <span class="bold"><strong><span class="italic">calendar dates</span></strong></span>
    and times are important types of primitive data values, although they are
    not implemented as primitive values, but in the form of wrapper objects
    instantiating <code class="code">Date</code>. Notice that <code class="code">Date</code> objects do,
    in fact, not really represent dates, but rather date-time instants
    represented internally as the number of milliseconds since 1 January, 1970
    UTC. For converting the internal value of a <code class="code">Date</code> object to a
    human-readable string, we have several options. The two most important
    options are using either the standard format of ISO date/time strings of
    the form "2015-01-27", or localized formats of date/time strings like
    "27.1.2015" (for simplicity, we have omitted the time part of the
    date/time strings in these examples). When <code class="code">x instanceof Date</code>,
    then <code class="code">x.toISOString()</code> provides the ISO date/time string, and
    <code class="code">x.toLocaleDateString()</code> provides the localized date/time
    string. Given any date string <code class="code">ds</code>, ISO or localized, <code class="code">new
    Date(ds)</code> creates a corresponding date object.</p><p>For testing the <span class="bold"><strong><span class="italic">equality</span></strong></span> (or inequality) of two
    primitive data vales, always use the triple equality symbol
    <code class="code">===</code> (and <code class="code">!==</code>) instead of the double equality
    symbol <code class="code">==</code> (and <code class="code">!=</code>). Otherwise, for instance, the
    number 2 would be the same as the string "2", since the condition <code class="code">(2
    == "2")</code> evaluates to <span class="italic">true</span> in
    JavaScript.</p><p>Assigning an <span class="bold"><strong><span class="italic">empty
    array literal</span></strong></span>, as in <code class="code">var a = []</code> is the
    same as, but more concise than and therefore preferred to, invoking the
    <code class="code">Array()</code> constructor without arguments, as in <code class="code">var a =
    new Array()</code>.</p><p>Assigning an <span class="bold"><strong><span class="italic">empty
    object literal</span></strong></span>, as in <code class="code">var o = {}</code> is the
    same as, but more concise than and therefore preferred to, invoking the
    <code class="code">Object()</code> constructor without arguments, as in <code class="code">var o =
    new Object()</code>. Notice, however, that an empty object literal
    <code class="code">{}</code> is not really an empty object, as it contains property
    slots and method slots inherited from <a class="link" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/prototype" target="_top"><code class="code">Object.prototype</code></a>.
    So, a truly empty object (without any slots) has to be created with
    <code class="code">null</code> as prototype, like in <code class="code">var emptyObject =
    Object.create(null)</code>.</p><p>A summary of type testing<a class="indexterm" name="d5e650"></a> is provided in the following table:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="col1"><col class="newCol2"><col class="col2"></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Type</th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Example values</th><th style="border-bottom: 0.5pt solid ; ">Test if <code class="code">x</code> of type</th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">string</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">"Hello world!", 'A3F0'</td><td style="border-bottom: 0.5pt solid ; "><code class="code">typeof x === "string"</code></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">boolean</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">true, false</td><td style="border-bottom: 0.5pt solid ; "><code class="code">typeof x === "boolean"</code></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">(floating point) number</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">-2.75, 0, 1, 1.0, 3.1e10</td><td style="border-bottom: 0.5pt solid ; "><code class="code">typeof x === "number"</code></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">integer</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">-2, 0, 1, 250</td><td style="border-bottom: 0.5pt solid ; "><code class="code">Number.isInteger(x)</code></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Object</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">{}, {num:3, denom:4}, {isbn:"006251587X," title:"Weaving
            the Web"}, {"one":1, "two":2, "three":3}</td><td style="border-bottom: 0.5pt solid ; "><p>excluding <code class="code">null</code>: <code class="code">x instanceof
            Object</code></p> <p>including <code class="code">null</code>:
            <code class="code">typeof x === "object"</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><a class="link" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_top">Array</a></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">[], ["one"], [1,2,3], [1,"one", {}]</td><td style="border-bottom: 0.5pt solid ; "><code class="code">Array.isArray(x)</code></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><a class="link" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_top">Function</a></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="code">function () { return "one"+1;}</code></td><td style="border-bottom: 0.5pt solid ; "><code class="code">typeof x === "function"</code></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><a class="link" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_top">Date</a></td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="code">new Date("2015-01-27")</code></td><td style="border-bottom: 0.5pt solid ; "><code class="code">x instanceof Date</code></td></tr><tr><td style="border-right: 0.5pt solid ; "><a class="link" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp" target="_top">RegExp</a></td><td style="border-right: 0.5pt solid ; "><code class="code">/(\w+)\s(\w+)/</code></td><td style=""><code class="code">x instanceof RegExp</code></td></tr></tbody></table></div><p>A summary of type conversions<a class="indexterm" name="d5e723"></a> is provided in the following table:</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="col1"><col class="col3"><col class="col4"></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Type</th><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Convert to string</th><th style="border-bottom: 0.5pt solid ; ">Convert string to type</th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">boolean</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="code">String(x)</code></td><td style="border-bottom: 0.5pt solid ; "><code class="code">Boolean(y)</code></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">(floating point) number</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="code">String(x)</code></td><td style="border-bottom: 0.5pt solid ; "><code class="code">parseFloat(y)</code></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">integer</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="code">String(x)</code></td><td style="border-bottom: 0.5pt solid ; "><code class="code">parseInt(y)</code></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Object</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="code">x.toString()</code> or
            <code class="code">JSON.stringify(x)</code></td><td style="border-bottom: 0.5pt solid ; "><code class="code">JSON.parse(y)</code></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Array</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="code">x.toString()</code> or
            <code class="code">JSON.stringify(x)</code></td><td style="border-bottom: 0.5pt solid ; "><code class="code">y.split()</code> or
            <code class="code">JSON.parse(y)</code></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Function</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="code">x.toString()</code></td><td style="border-bottom: 0.5pt solid ; "><code class="code">new Function(y)</code></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; ">Date</td><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; "><code class="code">x.toISOString()</code></td><td style="border-bottom: 0.5pt solid ; "><code class="code">new Date(y)</code></td></tr><tr><td style="border-right: 0.5pt solid ; ">RegExp</td><td style="border-right: 0.5pt solid ; "><code class="code">x.toString()</code></td><td style=""><code class="code">new RegExp(y)</code></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e788"></a>1.2.&nbsp;Variable scope</h3></div></div></div><p>In ES5, there have only been two kinds of scope for
    variables<a class="indexterm" name="d5e791"></a> declared with <code class="code">var</code>: the global scope (with
    <code class="code">window</code> as the context object) and function scope, but
    <span class="bold"><strong><span class="italic">no block
    scope</span></strong></span>. Consequently, declaring a variable with
    <code class="code">var</code> within a code block is confusing and should be avoided.
    For instance, although this is a frequently used pattern, even by
    experienced JavaScript programmers, it is a pitfall to declare the counter
    variable of a <code class="code">for</code> loop in the loop, as in</p><pre class="programlisting">function foo() {
  for (<span class="bold"><strong>var i=0</strong></span>; i &lt; 10; i++) {
    ...  // do something with i
  }
}</pre><p>Instead of obtaining a variable that is scoped to the block defined
    by the <code class="code">for</code> loop, JavaScript is interpreting this code (by
    means of "hoisting" variable declarations) as:</p><pre class="programlisting">function foo() {
  <span class="bold"><strong>var i=0</strong></span>;
  for (i=0; i &lt; 10; i++) {
    ...  // do something with i
  }
}</pre><p>Therefore all function-scoped variable declarations (with
    <code class="code">var</code>) should be placed at the beginning of a function. When a
    variable is to be scoped to a code block, such as to a <code class="code">for</code>
    loop, it has to be declared with the keyword <code class="code">let</code>, as in the
    following example:</p><pre class="programlisting">function foo() {
  for (<span class="bold"><strong>let</strong></span> i=0; i &lt; 10; i++) {
    ...  // do something with i
  }
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e812"></a>1.3.&nbsp;Frozen, or immutable, variables</h3></div></div></div><p>Whenever a variable is supposed to be immutable (having a frozen
    value), it should be declared with the keyword
    <code class="code">const</code>:</p><pre class="programlisting"><span class="bold"><strong>const</strong></span> pi = 3.14159;</pre><p>It is generally recommended that variables be declared with
    <code class="code">const</code> whenever it is clear that their values will never be
    changed. This helps catching errors and it allows the JS engine to
    optimize code execution.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e820"></a>1.4.&nbsp;Strict Mode</h3></div></div></div><p>Starting from ES5, we can use <a class="link" href="http://speakingjs.com/es5/ch07.html#strict_mode" target="_top">strict
    mode</a> for getting more runtime error checking. For
    instance, in strict mode, all variables must be declared. An assignment to
    an undeclared variable throws an exception.</p><p>We can turn strict mode on by typing the following statement as the
    first line in a JavaScript file or inside a <code class="code">&lt;script&gt;</code>
    element:</p><pre class="programlisting">'use strict';</pre><p>It is generally recommended to use strict mode, except when code
    depends on libraries that are incompatible with strict mode.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e831"></a>1.5.&nbsp;Different kinds of objects</h3></div></div></div><p>JS objects<a class="indexterm" name="d5e834"></a> are different from classical OO/UML objects. In particular,
    they <span class="bold"><strong><span class="italic">need not instantiate a
    class</span></strong></span>. And they can have their own (instance-level)
    methods in the form of method slots, so they do not only have (ordinary)
    <span class="bold"><strong><span class="italic">property
    slots</span></strong></span>, but also <span class="bold"><strong><span class="italic">method slots</span></strong></span>. In addition they may
    also have <span class="bold"><strong><span class="italic">key-value
    slots</span></strong></span>. So, they may have three different kinds of
    slots, while classical objects (called "instance specifications" in UML)
    only have property slots.</p><p>A JS object is essentially a set of name-value-pairs, also called
    <span class="italic"><span class="bold"><strong><a class="glossterm" href="#slot"><em class="glossterm">slots</em></a></strong></span></span>, where names can be
    <span class="italic">property</span> names, <span class="italic">function</span> names or <span class="italic">keys</span> of a map. Objects can be created in an
    ad-hoc manner, using JavaScript's object literal notation (JSON), without
    instantiating a class:</p><pre class="programlisting">var person1 = { lastName:"Smith", firstName:"Tom"};</pre><p>An empty object with no slots is created in the following
    way:</p><pre class="programlisting">var o1 = Object.create( null);  </pre><p>Whenever the name in a slot is an <a class="link" href="http://mothereff.in/js-variables" target="_top">admissible JavaScript
    identifier</a>, the slot may be either a <span class="italic">property slot</span>, a <span class="italic">method
    slot</span> or a <span class="italic">key-value slot</span>.
    Otherwise, if the name is some other type of string (in particular when it
    contains any blank space), then the slot represents a <span class="italic">key-value slot</span>, which is a map element, as
    explained below.</p><p>The name in a <span class="bold"><strong><span class="italic">property
    slot</span></strong></span> may denote either </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>a <span class="bold"><strong><span class="italic">data-valued
          property</span></strong></span>, in which case the value is a
          <span class="italic">data value</span> or, more generally, a
          <span class="italic">data-valued expression</span>;</p><p>or</p></li><li class="listitem"><p>an <span class="bold"><strong><span class="italic">object-valued
          property</span></strong></span>, in which case the value is an
          <span class="italic">object reference</span> or, more
          generally, an <span class="italic">object
          expression</span>.</p></li></ol></div><p>The name in a <span class="bold"><strong><span class="italic">method
    slot</span></strong></span> denotes a <span class="italic">JS
    function</span> (better called <span class="italic">method</span>), and its value is a <span class="italic">JS function definition expression</span>.</p><p>Object properties can be accessed in two ways: </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Using the dot notation (like in C++/Java):</p><pre class="programlisting">person1.lastName = "Smith"</pre></li><li class="listitem"><p>Using a map notation:</p><pre class="programlisting">person1["lastName"] = "Smith"</pre></li></ol></div><p>JS objects can be used in many different ways for different
    purposes. Here are five different use cases for, or possible meanings of,
    JS objects: </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>A <span class="italic"><span class="bold"><strong>record<a class="indexterm" name="d5e898"></a></strong></span></span> is a set of property slots
          like, for instance, </p><pre class="programlisting">var myRecord = {firstName:"Tom", lastName:"Smith", age:26}</pre></li><li class="listitem"><p>A <span class="italic"><span class="bold"><strong>map<a class="indexterm" name="d5e906"></a></strong></span></span> (also called 'associative
          array', 'dictionary', 'hash map' or 'hash table' in other languages)
          supports look-ups of <span class="italic">values</span> based
          on <span class="italic">keys</span> like, for instance,
          </p><pre class="programlisting">var numeral2number = {"one":"1", "two":"2", "three":"3"}</pre><p>which
          associates the value "1" with the key "one", "2" with "two", etc. A
          key need not be a valid JavaScript identifier, but can be any kind
          of string (e.g. it may contain blank spaces).</p></li><li class="listitem"><p>An <span class="italic"><span class="bold"><strong>untyped
          object</strong></span></span> does not instantiate a class. It may
          have property slots and method slots like, for instance,
          </p><pre class="programlisting">var person1 = { 
  lastName: "Smith", 
  firstName: "Tom",
  getFullName: function () {
    return this.firstName +" "+ this.lastName; 
  }  
};</pre><p>Within the body of a method slot of an object, the special
          variable <code class="code">this</code> refers to the object.</p></li><li class="listitem"><p>A <span class="italic"><span class="bold"><strong>namespace<a class="indexterm" name="d5e923"></a></strong></span></span> may be defined in the form of
          an untyped object referenced by a global object variable, the name
          of which represents a namespace prefix. For instance, the following
          object variable provides the main namespace of an application based
          on the <span class="italic">Model-View-Controller
          (MVC)</span> architecture paradigm where we have three
          subnamespaces corresponding to the three parts of an MVC
          application:</p><pre class="programlisting">var myApp = { model:{}, view:{}, ctrl:{} };</pre><p>A
          more advanced namespace mechanism is provided by <span class="bold"><strong>ES6 modules</strong></span>, as explained in  
          <span class="phrase"><a class="link" href="validation-tutorial.html" target="_top">Part
          2</a> of this tutorial,</span>.</p></li><li class="listitem"><p>A <span class="italic"><span class="bold"><strong>typed
          object</strong></span></span> instantiates a class that is defined
          either by a JavaScript constructor function or by a factory object.
          See <a class="xref" href="#sectClasses" title="1.10.&nbsp;Defining and using classes">Section&nbsp;1.10, &#8220;Defining and using classes&#8221;</a></p></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e936"></a>1.6.&nbsp;Array lists</h3></div></div></div><p>A JS array<a class="indexterm" name="d5e939"></a> represents, in fact, the logical data structure of an
    <span class="italic">array list</span>, which is a list where each
    list item can be accessed via an index number (like the elements of an
    array). Using the term 'array' without saying 'JS array' creates a
    terminological ambiguity. But for simplicity, we will sometimes just say
    'array' instead of 'JS array'.</p><p>A variable may be initialized with a JS <span class="italic">array literal</span>:</p><pre class="programlisting">var a = [1,2,3];</pre><p>Because they are array lists, JS arrays can grow dynamically: it is
    possible to use indexes that are greater than the length of the array. For
    instance, after the array variable initialization above, the array held by
    the variable <code class="code">a</code> has the length 3, but still we can assign
    further array elements, and may even create gaps, like in</p><pre class="programlisting">a[3] = 4;
a[5] = 5;</pre><p>The contents of an array <code class="code">a</code> are processed with the help
    of a standard <span class="italic">for</span> loop with a counter
    variable counting from the first array index 0 to the last array index,
    which is <code class="code">a.length-1</code>:</p><pre class="programlisting">for (let i=0; i &lt; a.length; i++) { ...}</pre><p>Since arrays are special types of objects, we sometimes need a
    method for finding out if a variable represents an array. We can test, if
    a variable <code class="code">a</code> represents an array by applying the predefined
    datatype predicate <code class="code">isArray</code> as in <code class="code">Array.isArray(
    a)</code>.</p><p>For <span class="bold"><strong><span class="italic">adding</span></strong></span> a new element to an array, we
    append it to the array using the <code class="code">push</code> operation as
    in:</p><pre class="programlisting">a.<span class="bold"><strong>push</strong></span>( newElement);</pre><p>For <span class="bold"><strong><span class="italic">appending</span></strong></span> (all elements of) another
    array <code class="code">b</code> to an array <code class="code">a</code>, we <code class="code">push</code> all
    the elements of <code class="code">b</code> to <code class="code">a</code> with the help of the ES6
    <span class="italic">spread</span> operator <code class="code">...</code>, like
    so:</p><pre class="programlisting">a.<span class="bold"><strong>push</strong></span>( ...b);</pre><p>For <span class="bold"><strong><span class="italic">deleting</span></strong></span> an element at position
    <code class="code">i</code> from an array <code class="code">a</code>, we use the predefined array
    method <code class="code">splice</code> as in: </p><pre class="programlisting">a.<span class="bold"><strong>splice</strong></span>( i, 1);</pre><p>For <span class="bold"><strong><span class="italic">searching</span></strong></span> a value <code class="code">v</code> in an
    array <code class="code">a</code>, we can use the predefined array method
    <code class="code">indexOf</code>, which returns the position, if found, or -1,
    otherwise, as in: </p><pre class="programlisting">if (a.<span class="bold"><strong>indexOf</strong></span>(v) &gt; -1)  ...</pre><p>For <span class="bold"><strong><span class="italic">looping</span></strong></span> over an array <code class="code">a</code>,
    there are two good options: either use a classical <code class="code">for</code>
    (counter variable) loop or a more concise <code class="code">for-of</code> loop. The
    best performance is achieved with a classical <code class="code">for</code>
    loop:</p><pre class="programlisting">for (let i=0; i &lt; a.length; i++) {
  console.log( a[i]);
}</pre><p>If performance doesn't matter and no counter variable is needed,
    however, the best option is using a <code class="code">for</code>-<code class="code">of</code> loop
    (introduced in ES6):</p><pre class="programlisting"><span class="bold"><strong>for</strong></span> (const elem <span class="bold"><strong>of</strong></span> a) {
  console.log( elem);
}</pre><p>Notice that in a for-of loop, the looping variable (here:
    <code class="code">elem</code>) can be declared as a <span class="italic">frozen</span> local variable with <code class="code">const</code>
    whenever it is not re-assigned in the loop body.</p><p>For <span class="bold"><strong><span class="italic">cloning</span></strong></span> an array <code class="code">a</code>, we
    can use the array function <code class="code">slice</code> in the following way:</p><pre class="programlisting">var clone = a.slice(0);</pre><p>Alternatively, we can use a new technique based on the ES6 <span class="italic">spread</span> operator:</p><pre class="programlisting">var clone = [ ...a ];</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1019"></a>1.7.&nbsp;Maps</h3></div></div></div><p>A map<a class="indexterm" name="d5e1022"></a> (also called 'hash map', 'associative array' or
    'dictionary') provides a mapping from keys to their associated values.
    Traditionally, before the built-in <a class="link" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map" target="_top"><code class="code">Map</code></a>
    object has been added to JS (in ES6), maps have been implemented in the
    form of plain JS objects where the keys are string literals that may
    include blank spaces like in: </p><pre class="programlisting">var myTranslation = { 
    "my house": "mein Haus", 
    "my boat": "mein Boot", 
    "my horse": "mein Pferd"
}</pre><p>Alternatively, a proper map can be constructed with the help of the
    <code class="code">Map</code> constructor: </p><pre class="programlisting">var myTranslation = new <span class="bold"><strong>Map</strong></span>([
    ["my house", "mein Haus"], 
    ["my boat", "mein Boot"], 
    ["my horse", "mein Pferd"]
])</pre><p>A traditional map (as a plain JS object) is processed with the help
    of a loop where we loop over all keys using the predefined function
    <code class="code">Object.keys(m)</code>, which returns an array of all keys of a map
    <code class="code">m</code>. For instance,</p><pre class="programlisting"><span class="bold"><strong>for</strong></span> (const key of Object.keys( myTranslation)) {
  console.log(`The translation of ${key} is ${myTranslation[key]}`);
}</pre><p>A proper map (i.e. a <code class="code">Map</code> object) can be processed with
    the help of a <code class="code">for-of</code> loop in one of the following
    ways:</p><pre class="programlisting">// processing both keys and values
for (const <span class="bold"><strong>[key, value]</strong></span> of myTranslation) {
  console.log(`The translation of ${key} is ${value}`);
}
// processing only keys
for (const key of myTranslation.<span class="bold"><strong>keys</strong></span>()) {
  console.log(`The translation of ${key} is ${myTranslation.get( key)}`);
}
// processing only values
for (const value of myTranslation.<span class="bold"><strong>values</strong></span>()) {
  console.log( value)
}</pre><p>For <span class="bold"><strong><span class="italic">adding</span></strong></span> a new entry to a traditional
    map, we simply associate the new value with its key as in:</p><pre class="programlisting">myTranslation["my car"] = "mein Auto";</pre><p>For adding a new entry to a proper map, we use the <code class="code">set</code>
    operation:</p><pre class="programlisting">myTranslation.<span class="bold"><strong>set</strong></span>("my car", "mein Auto");</pre><p>For <span class="bold"><strong><span class="italic">deleting</span></strong></span> an entry from a traditional
    map, we can use the predefined <code class="code">delete</code> operator as
    in:</p><pre class="programlisting"><span class="bold"><strong>delete</strong></span> myTranslation["my boat"];</pre><p>For deleting an entry from a proper map, we can use the
    <code class="code">Map::delete</code> method as in:</p><pre class="programlisting">myTranslation.<span class="bold"><strong>delete</strong></span>("my boat");</pre><p>For <span class="bold"><strong><span class="italic">testing</span></strong></span> if a traditional map contains
    an entry for a certain key value, such as for testing if the translation
    map contains an entry for "my bike" we can check the
    following:</p><pre class="programlisting">if ("my bike" in myTranslation)  ...</pre><p>For testing if a proper map contains an entry for a certain key
    value, we can use the Boolean-valued <code class="code">has</code> method:</p><pre class="programlisting">if (myTranslation.<span class="bold"><strong>has</strong></span>("my bike"))  ...</pre><p>For <span class="bold"><strong><span class="italic">cloning</span></strong></span> a traditional map
    <code class="code">m</code>, we can use the composition of JSON.stringify and
    JSON.parse. We first serialize <code class="code">m</code> to a string representation
    with JSON.stringify, and then de-serialize the string representation to a
    map object with JSON.parse:</p><a name="pre634545"></a><pre class="programlisting">var clone = JSON.parse( JSON.stringify( m));</pre><p>Notice that this method works well if the map contains only simple
    data values or (possibly nested) arrays/maps containing simple data
    values. In other cases, e.g. if the map contains <code class="code">Date</code>
    objects, we have to write our own clone method. Alternatively, we could
    use a new technique based on the ES6 <span class="italic">spread</span> operator:</p><pre class="programlisting">var clone = { ...m };</pre><p>For cloning a proper map <code class="code">m</code>, we can use the
    <code class="code">Map</code> constructor in the following way:</p><pre class="programlisting">var clone = new Map(m);</pre><p>Since proper maps (defined as instances of <code class="code">Map</code>) do not
    have the overhead of properties inherited from
    <code class="code">Object.prototype</code> and operations on them, such as adding and
    deleting entries, are faster, they are preferable to using ordinary
    objects as maps. Only in cases where it is important to be compatible with
    older browsers that do not support <code class="code">Map</code>, it is justified to
    use ordinary objects for implementing maps.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1088"></a>1.8.&nbsp;Important types of basic data structures</h3></div></div></div><p>In summary, there are four types of important basic data
    structures:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><span class="italic"><span class="bold"><strong>array
        lists</strong></span></span>, such as
        <code class="code">["one","two","three"]</code>, which are special JS objects
        called 'arrays', but since they are dynamic, they are rather <span class="italic">array lists</span> as defined in the <span class="italic">Java</span> programming language.</p></li><li class="listitem"><p><span class="italic"><span class="bold"><strong>records</strong></span></span>, which are special JS
        objects, such as <code class="code">{firstName:"Tom", lastName:"Smith"}</code>, as
        discussed above,</p></li><li class="listitem"><p><span class="italic"><span class="bold"><strong>maps</strong></span></span>, which can be realized as
        ordinary JS objects having only key-value slots, such as
        <code class="code">{"one":1, "two":2, "three":3}</code>, or as <code class="code">Map</code>
        objects, as discussed above,</p></li><li class="listitem"><p><span class="bold"><strong><span class="italic">entity
        tables</span></strong></span>,<a class="indexterm" name="d5e1114"></a> like for instance the table shown below, which are
        special maps where the values are entity records with a standard ID
        (or <span class="italic">primary key</span>) slot, such that
        the keys of the map are the standard IDs of these entity
        records.</p></li></ol></div><div class="table"><a name="d5e1118"></a><p class="title"><b>Table&nbsp;2.1.&nbsp;An example of an entity table representing a collection of
      books</b></p><div class="table-contents"><table border="1" cellpadding="5" frame="border"><thead><tr>
          <th>Key</th>

          <th>Value</th>
        </tr></thead><tbody><tr>
          <td>006251587X</td>

          <td>{ isbn:"006251587X," title:"Weaving the Web", year:2000 }</td>
        </tr><tr>
          <td>0465026567</td>

          <td>{ isbn:"0465026567," title:"G&ouml;del, Escher, Bach", year:1999
          }</td>
        </tr><tr>
          <td>0465030793</td>

          <td>{ isbn:"0465030793," title:"I Am A Strange Loop", year:2008
          }</td>
        </tr></tbody></table></div></div><br class="table-break"><p>Notice that our distinction between records, (traditional) maps and
    entity tables is a purely conceptual distinction, and not a syntactical
    one. For a JavaScript engine, both <code class="code">{firstName:"Tom",
    lastName:"Smith"}</code> and <code class="code">{"one":1,"two":2,"three":3}</code> are
    just objects. But conceptually, <code class="code">{firstName:"Tom",
    lastName:"Smith"}</code> is a record because <code class="code">firstName</code> and
    <code class="code">lastName</code> are intended to denote properties (or fields), while
    <code class="code">{"one":1,"two":2,"three":3}</code> is a map because
    <code class="code">"one"</code> and <code class="code">"two"</code> are not intended to denote
    properties/fields, but are just arbitrary string values used as keys for a
    map.</p><p>Making such conceptual distinctions helps in the logical design of a
    program, and mapping them to syntactic distinctions, even if they are not
    interpreted differently, helps to better understand the intended
    computational meaning of the code and therefore improves its
    readability.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1144"></a>1.9.&nbsp;Procedures, methods and functions</h3></div></div></div><p>Generally, a (parametrized) <span class="italic">procedure</span> is like a sub-program that can be
    called (with a certain number of arguments) any number of times from
    within a program. Whenever a procedure returns a value, it is called a
    <span class="italic">function</span>. In OOP, procedures are called
    <span class="italic">methods</span>, if they are defined in the
    context of a class or of an object.</p><p>In JavaScript, procedures<a class="indexterm" name="d5e1151"></a> are called "functions", no matter if they return a value or
    not. As shown below in <a class="xref" href="#figJsBasicsJsMetamodel" title="Figure&nbsp;2.1.&nbsp;The built-in JavaScript classes Object and Function.">Figure&nbsp;2.1</a>, JS functions<a class="indexterm" name="d5e1155"></a> are special JS objects, having an optional
    <code class="code">name</code> property and a <code class="code">length</code> property providing
    their number of parameters. If a variable <code class="code">v</code> references a
    function can be tested with </p><pre class="programlisting">if (typeof v === "function") {...}</pre><p>Being JS objects implies that JS functions can be stored in
    variables, passed as arguments to functions, returned by functions, have
    properties and can be changed dynamically. Therefore, JS functions are
    first-class citizens, and JavaScript can be viewed as a <span class="italic">functional programming language</span>.</p><p>The general form of a JS <span class="italic"><span class="bold"><strong>function definition</strong></span></span><span class="bold"><strong><span class="italic"> <a class="indexterm" name="d5e1169"></a> </span></strong></span> is an assignment of a JS <span class="italic">function expression</span> to a variable:
    </p><pre class="programlisting">var myMethod = function theNameOfMyMethod( params) {
  ...
}</pre><p>where <code class="code">params</code> is a comma-separated list of
    parameters (or a parameter record), and <code class="code">theNameOfMyMethod</code> is
    optional. When it is omitted, the method/function is <span class="emphasis"><em><span class="bold"><strong>anonymous</strong></span></em></span>. In any case, JS functions are
    normally invoked via a variable that references the function. In the above
    case, this means that the JS function is invoked with
    <code class="code">myMethod()</code>, and not with <code class="code">theNameOfMyMethod()</code>.
    However, a named JS function can be invoked by name from within the
    function (when the function is recursive). Consequently, a recursive JS
    function must be named.</p><p>Anonymous function expressions<a class="indexterm" name="d5e1181"></a> are called <span class="italic">lambda
    expressions</span> (or shorter <span class="italic">lambdas</span>) in other programming languages.</p><p>As an example of an anonymous function expression being passed as an
    argument in the invocation of another (higher-order) function, we can take
    a comparison function being passed to the predefined function
    <code class="code">sort</code> for sorting the elements of an array list. Such a
    comparison function must return a negative number if its first argument is
    smaller than its second argument, it must return 0 if both arguments are
    of the same rank, and it must return a positive number if the second
    argument is smaller than the first one. In the following example, we sort
    a list of number pairs in lexicographic order: </p><pre class="programlisting">var list = [[1,2],[2,1],[1,3],[1,1]]; 
list.sort( function (x,y) {
  return x[0] === y[0] ? x[1]-y[1] : x[0]-y[0]);
});
// results in [[1,1],[1,2],[1,3],[2,1]]</pre><p>Alternatively, we can express the anonymous comparison function in
    the form of an <span class="bold"><strong><span class="emphasis"><em>arrow
    function</em></span></strong></span> expression:</p><pre class="programlisting">list.sort( (x,y) <span class="bold"><strong>=&gt;</strong></span> x[0] === y[0] ? x[1]-y[1] : x[0]-y[0]);</pre><p>A JS <span class="bold"><strong><span class="italic">function
    declaration</span></strong></span> has the following form:</p><pre class="programlisting">function theNameOfMyFunction( params) {...}</pre><p>It is equivalent to the following named function definition:
    </p><pre class="programlisting">var theNameOfMyFunction = function theNameOfMyFunction( params) {...}</pre><p>that
    is, it creates both a function with name <code class="code">theNameOfMyFunction</code>
    and a variable <code class="code">theNameOfMyFunction</code> referencing this
    function.</p><p>JS functions can have <span class="bold"><strong><span class="italic">inner functions</span></strong></span>. The <span class="italic"><span class="bold"><strong>closure<a class="indexterm" name="d5e1207"></a></strong></span></span> mechanism allows a JS function using
    variables (except <code class="code">this</code>) from its outer scope, and a function
    created in a closure remembers the environment in which it was created. In
    the following example, there is no need to pass the outer scope variable
    <code class="code">result</code> to the inner function via a parameter, as it is
    readily available:</p><pre class="programlisting">var <span class="bold"><strong>sum</strong></span> = function (numbers) {
  var result = 0;
  for (const n of numbers) {
    result = result + n;
  }
  return result;
};
console.log( sum([1,2,3,4]));  // 10</pre><p>When a method/function is executed, we can access its arguments
    within its body by using the built-in <code class="code">arguments</code> object, which
    is "array-like" in the sense that it has indexed elements and a
    <code class="code">length</code> property, and we can iterate over it with a normal
    <code class="code">for</code> loop, but since it's not an instance of
    <code class="code">Array</code>, the JS array methods (such as the <code class="code">forEach</code>
    looping method) cannot be applied to it. The <code class="code">arguments</code> object
    contains an element for each argument passed to the method. This allows
    defining a method without parameters and invoking it with <span class="bold"><strong><span class="italic">any number of
    arguments</span></strong></span>, like so:</p><pre class="programlisting">var <span class="bold"><strong>sum</strong></span> = function () {
  var result = 0;
  for (let i=0; i &lt; arguments.length; i++) {
    result = result + arguments[i];
  }
  return result;
};
console.log( sum(0,1,1,2,3,5,8));  // 20</pre><p>A method defined on the prototype of a constructor function, which
    can be invoked on all objects created with that constructor, such as
    <code class="code">Array.prototype.forEach</code>, where <code class="code">Array</code> represents
    the constructor, has to be invoked with an instance of the class as
    <span class="bold"><strong><span class="italic">context
    object</span></strong></span> referenced by the <code class="code">this</code> variable
    (see also the next section on classes). In the following example, the
    array <code class="code">numbers</code> is the context object in the invocation of
    <code class="code">forEach</code>:</p><pre class="programlisting">var numbers = [1,2,3];  // create an instance of Array
numbers.<span class="bold"><strong>forEach</strong></span>( function (n) {
  console.log( n);
});</pre><p>Whenever such a prototype method is to be invoked not with a context
    object, but with an object as an ordinary argument, we can do this with
    the help of <span class="bold"><strong><span class="italic">the JS function
    method <code class="code">call</code></span></strong></span> that takes an object, on
    which the method is invoked, as its first parameter, followed by the
    parameters of the method to be invoked. For instance, we can apply the
    <code class="code">forEach</code> looping method to the array-like object
    <code class="code">arguments</code> in the following way:</p><pre class="programlisting">var <span class="bold"><strong>sum</strong></span> = function () {
  var result = 0;
  Array.prototype.<span class="bold"><strong>forEach.call</strong></span>( arguments, function (n) {
    result = result + n;
  });
  return result;
};</pre><p>A two-argument variant of the <code class="code">Function.prototype.call</code>
    method, collecting all arguments of the method to be invoked in an
    array-like object, is <code class="code">Function.prototype.apply</code>. The first
    argument to both <code class="code">call</code> and <code class="code">apply</code> becomes
    <code class="code">this</code> inside the function, and the rest are passed through.
    So, <code class="code">f.call( x, y, z)</code> is the same as <code class="code">f.apply( x, [y,
    z])</code>.</p><p>Whenever a method defined for a prototype is to be invoked without a
    context object, or when a method defined in a method slot (in the context)
    of an object is to be invoked without its context object, we can bind its
    <code class="code">this</code> variable to a given object with the help of <span class="italic"><span class="bold"><strong>the JS function <code class="code">bind</code>
    method</strong></span></span> (<code class="code">Function.prototype.bind</code>). This
    allows creating a shortcut for invoking a method, as in <code class="code">var querySel
    = document.querySelector.bind( document)</code>, which allows to use
    <code class="code">querySel</code> instead of
    <code class="code">document.querySelector</code>.</p><p>The option of <span class="italic">immediately invoked JS
    function expressions</span><a class="indexterm" name="d5e1263"></a> can be used for obtaining a namespace mechanism that is
    superior to using a plain namespace object, since it can be controlled
    which variables and methods are globally exposed and which are not. This
    mechanism is also the basis for JS <span class="italic">module</span> concepts. In the following example, we
    define a namespace for the model code part of an app, which exposes some
    variables and the model classes in the form of constructor
    functions:</p><pre class="programlisting">myApp.model = function () {
  var appName = "My app's name";
  var someNonExposedVariable = ...;
  function ModelClass1() {...}
  function ModelClass2() {...}
  function someNonExposedMethod(...) {...}
  return {
    appName: appName,
    ModelClass1: ModelClass1,
    ModelClass2: ModelClass2
  }
}();  // immediately invoked</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="sectClasses"></a>1.10.&nbsp;Defining and using classes</h3></div></div></div><p>The concept of a <span class="bold"><strong><span class="italic">class</span></strong></span><a class="indexterm" name="d5e1273"></a> is fundamental in <span class="italic">object-oriented</span> programming. Objects <span class="italic">instantiate</span> (or <span class="italic">are
    classified by</span>) a class. A class defines the properties and
    methods (as a blueprint) for the objects created with it.</p><p>Having a class concept is essential for being able to implement a
    <span class="italic">data model</span> in the form of <span class="bold"><strong><span class="italic">model classes</span></strong></span> in
    a Model-View-Controller (MVC) architecture. However, classes and their
    inheritance/extension mechanism are over-used in classical OO languages,
    such as in Java, where all variables and procedures have to be defined in
    the context of a class and, consequently, classes are not only used for
    implementing <span class="italic">object types</span> (or model
    classes), but also as containers for many other purposes in these
    languages. This is not the case in JavaScript where we have the freedom to
    use classes for implementing <span class="italic">object
    types</span> only, while keeping method libraries in namespace
    objects.</p><p>Any code pattern for defining classes in JavaScript should satisfy
    five requirements. First of all, (1) it should allow to define a <span class="italic">class name</span>, a set of (instance-level) <span class="bold"><strong><span class="italic">properties</span></strong></span>,
    preferably with the option to keep them 'private', a set of
    (instance-level) <span class="bold"><strong><span class="italic">methods</span></strong></span>, and a set of <span class="italic">class-level properties and methods</span>. It's
    desirable that properties can be defined with a range/type, and with other
    meta-data, such as constraints. There should also be two introspection
    features: (2) an <span class="bold"><strong><span class="italic">is-instance-of predicate</span></strong></span> that can be
    used for checking if an object is a direct or indirect instance of a
    class, and (3) an instance-level property for retrieving the <span class="bold"><strong><span class="italic">direct type</span></strong></span> of
    an object. In addition, it is desirable to have a third introspection
    feature for retrieving the <span class="italic">direct
    supertype</span> of a class. And finally, there should be two
    inheritance mechanisms: (4) <span class="bold"><strong><span class="italic">property inheritance</span></strong></span> and (5) <span class="bold"><strong><span class="italic">method
    inheritance</span></strong></span>. In addition, it is desirable to have
    support for <span class="italic">multiple inheritance</span> and
    <span class="italic">multiple classifications</span>, for allowing
    objects to play several roles at the same time by instantiating several
    role classes.</p><p>There was no explicit class definition syntax in JavaScript before
    ES6 (or ES2015). Different code patterns for defining classes in
    JavaScript have been proposed and are being used in different frameworks.
    But they do often not satisfy the five requirements listed above. The two
    most important approaches for defining classes are: </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>In the form of a <span class="bold"><strong><span class="italic">constructor</span></strong></span> function that
          achieves method inheritance via the prototype chain and allows to
          create new instances of a class with the help of the
          <code class="code">new</code> operator. This is the classical approach
          recommended by Mozilla in their <a class="link" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Details_of_the_Object_Model" target="_top">JavaScript
          Guide</a>. This is also the approach implemented in ES6 with the
          new <code class="code">class</code> definition syntax.</p></li><li class="listitem"><p>In the form of a <span class="bold"><strong><span class="italic">factory</span></strong></span> object that uses the
          predefined <code class="code">Object.create</code> method for creating new
          instances of a class. In this approach, the prototype chain method
          inheritance mechanism is replaced by a "copy &amp; append"
          mechanism. <a class="link" href="http://chimera.labs.oreilly.com/books/1234000000262/ch03.html#fluentstyle_javascript" target="_top">Eric
          Elliott</a> has argued that factory-based classes are a viable
          alternative to constructor-based classes in JavaScript (in fact, he
          even condemns the use of classical inheritance with
          constructor-based classes, throwing out the baby with the bath
          water).</p></li></ol></div><p>When building an app, we can use both kinds of classes, depending on
    the requirements of the app. Since we often need to define class
    hierarchies, and not just single classes, we have to make sure, however,
    that we don't mix these two alternative approaches within the same class
    hierarchy. While the factory-based approach, as exemplified by <a class="link" href="../mODELcLASSjs/validation-tutorial.html" target="_top">mODELcLASSjs</a>,
    has many advantages, which are summarized in <a class="xref" href="#tblJsClasses" title="Table&nbsp;2.2.&nbsp;Required and desirable features of JS code patterns for classes">Table&nbsp;2.2</a>, the constructor-based approach enjoys the
    advantage of higher performance object creation.</p><div class="table"><a name="tblJsClasses"></a><p class="title"><b>Table&nbsp;2.2.&nbsp;Required and desirable features of JS code patterns for
      classes</b></p><div class="table-contents"><table border="1" cellpadding="5" frame="border"><thead><tr>
          <th>Class feature</th>

          <th>Constructor-based approach</th>

          <th>Factory-based approach</th>

          <th>mODELcLASSjs</th>
        </tr></thead><tbody><tr>
          <td><span class="bold"><strong>Define properties and
          methods</strong></span></td>

          <td>yes</td>

          <td>yes</td>

          <td>yes</td>
        </tr><tr>
          <td><span class="bold"><strong><span class="italic">is-instance-of</span> predicate</strong></span></td>

          <td>yes</td>

          <td>yes</td>

          <td>yes</td>
        </tr><tr>
          <td><span class="bold"><strong><span class="italic">direct
          type</span> property</strong></span></td>

          <td>yes</td>

          <td>yes</td>

          <td>yes</td>
        </tr><tr>
          <td><span class="italic">direct supertype</span> property of
          classes</td>

          <td>no</td>

          <td>possibly</td>

          <td>yes</td>
        </tr><tr>
          <td><span class="bold"><strong>Property inheritance</strong></span></td>

          <td>yes</td>

          <td>yes</td>

          <td>yes</td>
        </tr><tr>
          <td><span class="bold"><strong>Method inheritance</strong></span></td>

          <td>yes</td>

          <td>yes</td>

          <td>yes</td>
        </tr><tr>
          <td>Multiple inheritance</td>

          <td>no</td>

          <td>possibly</td>

          <td>yes</td>
        </tr><tr>
          <td>Multiple classifications</td>

          <td>no</td>

          <td>possibly</td>

          <td>yes</td>
        </tr><tr>
          <td>Allow <a class="link" href="https://en.wikipedia.org/wiki/Object_pool_pattern" target="_top">object
          pools</a></td>

          <td>no</td>

          <td>yes</td>

          <td>yes</td>
        </tr></tbody></table></div></div><br class="table-break"><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="d5e1384"></a>1.10.1.&nbsp;Constructor-based classes</h4></div></div></div><div class="sidebar"><div class="titlepage"></div><p>Only in ES6 (or ES2015),<a class="indexterm" name="d5e1388"></a> a user-friendly syntax for constructor-based classes
        has been introduced. In <span class="bold"><strong>Step 1.a)</strong></span>, a
        base class <code class="code">Person</code> is defined with two properties,
        <code class="code">firstName</code> and <code class="code">lastName</code>, as well as with an
        (instance-level) method <code class="code">toString</code> and a static
        (class-level) method <code class="code">checkLastName</code>:</p><pre class="programlisting"><span class="bold"><strong>class</strong></span> Person {
  <span class="bold"><strong>constructor</strong></span>( first, last) {
    this.firstName = first;
    this.lastName = last;
  }
  <span class="bold"><strong>toString</strong></span>() {
    return this.firstName + " " +
        this.lastName;
  }
  static <span class="bold"><strong>checkLastName</strong></span>( ln) {
    if (typeof ln !== "string" || 
        ln.trim()==="") {
      console.log("Error: invalid last name!");
    }
  }
}</pre><p>In <span class="bold"><strong>Step 1.b)</strong></span>, class-level
        ("static") properties are defined:</p><pre class="programlisting">Person.<span class="bold"><strong>instances</strong></span> = {};</pre><p>Finally, in <span class="bold"><strong>Step 2</strong></span>, a subclass
        is defined with additional properties and methods that possibly
        override the corresponding superclass methods:</p><pre class="programlisting">class <span class="bold"><strong>Student</strong></span> <span class="bold"><strong>extends</strong></span> Person {
  <span class="bold"><strong>constructor</strong></span>( first, last, studNo) {
    <span class="bold"><strong>super</strong></span>.constructor( first, last);
    this.<span class="bold"><strong>studNo</strong></span> = studNo; 
  }
  // method overrides superclass method
  <span class="bold"><strong>toString</strong></span>() {
    return <span class="bold"><strong>super</strong></span>.toString() + "(" +
        this.studNo +")";
  }
}</pre></div><p>In ES5, we can define a base class with a subclass in the form of
      constructor functions, following a code pattern recommended by Mozilla
      in their <a class="link" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Details_of_the_Object_Model" target="_top">JavaScript
      Guide</a>, as shown in the following steps.</p><p><span class="bold"><strong>Step 1.a)</strong></span> First define the
      constructor function that implicitly defines the properties of the class
      by assigning them the values of the constructor parameters when a new
      object is created:</p><pre class="programlisting">function <span class="bold"><strong>Person</strong></span>( first, last) {
  this.<span class="bold"><strong>firstName</strong></span> = first; 
  this.<span class="bold"><strong>lastName</strong></span> = last; 
}</pre><p>Notice that within a constructor, the special variable
      <code class="code">this</code> refers to the new object that is created when the
      constructor is invoked.</p><p><span class="bold"><strong>Step 1.b)</strong></span> Next, define the
      <span class="italic">instance-level methods</span> of the class
      as method slots of the object referenced by the constructor's
      <code class="code">prototype</code> property:</p><pre class="programlisting"><span class="bold"><strong>Person</strong></span>.prototype.<span class="bold"><strong>toString</strong></span> = function () {
  return this.firstName + " " + this.lastName;
}</pre><p><span class="bold"><strong>Step 1.c)</strong></span> <span class="italic">Class-level</span> ("static") <span class="italic">methods</span> can be defined as method slots of the
      constructor function itself (recall that, since JS functions are
      objects, they can have slots), as in</p><pre class="programlisting">Person.checkLastName = function (ln) {
  if (typeof ln !== "string" || ln.trim()==="") {
    console.log("Error: invalid last name!");
  }
}</pre><p><span class="bold"><strong>Step 1.d)</strong></span> Finally, define
      class-level ("static") properties as property slots of the constructor
      function:</p><pre class="programlisting">Person.<span class="bold"><strong>instances</strong></span> = {};</pre><p><span class="bold"><strong>Step 2.a)</strong></span> Define a subclass with
      additional properties:</p><pre class="programlisting">function <span class="bold"><strong>Student</strong></span>( first, last, studNo) {
  // invoke superclass constructor
  <span class="bold"><strong>Person.call</strong></span>( this, first, last);
  // define and assign additional properties
  this.<span class="bold"><strong>studNo</strong></span> = studNo;  
}</pre><p>By invoking the supertype constructor with <code class="code">Person.call(
      this, ...)</code> for any new object created as an instance of the
      subtype <code class="code">Student</code>, and referenced by <code class="code">this</code>, we
      achieve that the property slots created in the supertype constructor
      (<code class="code">firstName</code> and <code class="code">lastName</code>) are also created for
      the subtype instance, along the entire chain of supertypes within a
      given class hierarchy. In this way we set up a <span class="bold"><strong>property inheritance</strong></span> mechanism that makes sure
      that the own properties defined for an object on creation include the
      own properties defined by the supertype constructors.</p><p>In <span class="bold"><strong>Step 2b)</strong></span>, we set up a
      mechanism for <span class="bold"><strong>method inheritance</strong></span> via
      the constructor's <code class="code">prototype</code> property. We assign a new
      object created from the supertype's <code class="code">prototype</code> object to the
      <code class="code">prototype</code> property of the subtype constructor and adjust
      the prototype's constructor property:</p><pre class="programlisting">// Student inherits from Person
<span class="bold"><strong>Student</strong></span>.prototype = Object.create( 
    <span class="bold"><strong>Person</strong></span>.prototype);
// adjust the subtype's constructor property
Student.prototype.constructor = Student;</pre><p>With <code class="code">Object.create( Person.prototype)</code> we create a new
      object with <code class="code">Person.prototype</code> as its prototype and without
      any own property slots. By assigning this object to the
      <code class="code">prototype</code> property of the subclass constructor, we achieve
      that the methods defined in, and inherited from, the superclass are also
      available for objects instantiating the subclass. This mechanism of
      chaining the prototypes takes care of method inheritance. Notice that
      setting <code class="code">Student.prototype</code> to <code class="code">Object.create(
      Person.prototype)</code> is preferable over setting it to <code class="code">new
      Person()</code>, which was the way to achieve the same in the time
      before ES5.</p><p><span class="bold"><strong>Step 2c)</strong></span> Define a subclass method
      that overrides a superclass method:</p><pre class="programlisting">Student.prototype.<span class="bold"><strong>toString</strong></span> = function () {
  return Person.prototype.toString.call( this) +
      "(" + this.studNo + ")";
};</pre><p>An instance of a constructor-based class is created by applying
      the <code class="code">new</code> operator to the constructor and providing suitable
      arguments for the constructor parameters: </p><pre class="programlisting">var pers1 = <span class="bold"><strong>new Person</strong></span>("Tom","Smith");</pre><p>The method <code class="code">toString</code> is invoked on the object
      <code class="code">pers1</code> by using the 'dot notation': </p><pre class="programlisting">alert("The full name of the person is: " + <span class="bold"><strong>pers1.toString()</strong></span>);</pre><p>When an object <code class="code">o</code> is created with <code class="code">o = new
      C(</code>...<code class="code">)</code>, where <code class="code">C</code> references a named
      function with name "C", the type (or class) name of <code class="code">o</code> can
      be retrieved with the introspective expression
      <code class="code">o.constructor.name</code>, which returns "C". The
      <code class="code">Function::name</code> property used in this expression is
      supported by all browsers, except Internet Explorer versions before
      version 11.</p><p>In JavaScript, a <span class="bold"><strong><span class="italic">prototype</span></strong></span> object is an object with
      method slots (and sometimes also property slots) that can be inherited
      by other objects via JavaScript's method/property slot look-up
      mechanism. This mechanism follows the <span class="bold"><strong><span class="italic">prototype chain</span></strong></span> defined by the
      built-in reference property <code class="code">__proto__</code> (with a double
      underscore prefix and suffix) for finding methods or properties. As
      shown below in <a class="xref" href="#figJsBasicsJsMetamodel" title="Figure&nbsp;2.1.&nbsp;The built-in JavaScript classes Object and Function.">Figure&nbsp;2.1</a>, every constructor function has a reference
      to a prototype object as the value of its reference property
      <code class="code">prototype</code>. When a new object is created with the help of
      <code class="code">new</code>, its <code class="code">__proto__</code> property is set to the
      constructor's <code class="code">prototype</code> property.</p><p>For instance, after creating a new object with <code class="code">f = new
      Foo()</code>, it holds that <code class="code">Object.getPrototypeOf(f)</code>, which
      is the same as <code class="code">f.__proto__</code>, is equal to
      <code class="code">Foo.prototype</code>. Consequently, changes to the slots of
      <code class="code">Foo.prototype</code> affect all objects that were created with
      <code class="code">new Foo()</code>. While every object has a <code class="code">__proto__</code>
      property slot (except <code class="code">Object</code>), only objects constructed
      with <code class="code">new</code> have a <code class="code">constructor</code> property
      slot.</p><div class="figure"><a name="figJsBasicsJsMetamodel"></a><p class="title"><b>Figure&nbsp;2.1.&nbsp;The built-in JavaScript classes <code class="code">Object</code> and
        <code class="code">Function</code>.</b></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="450"><tr><td><img src="../fig/JS-Metamodel.svg" width="450" alt="The built-in JavaScript classes Object and Function."></td></tr></table></div></div></div><br class="figure-break"><p>Notice that we can retrieve the prototype of an object with
      <code class="code">Object.getPrototypeOf(o)</code>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="d5e1524"></a>1.10.2.&nbsp;Factory-based classes</h4></div></div></div><p>In this approach we define a JS object <code class="code">Person</code>
      (actually representing a class) with a special <code class="code">create</code>
      method that invokes the predefined <code class="code">Object.create</code> method for
      creating objects of type <code class="code">Person</code>:</p><pre class="programlisting">var <span class="bold"><strong>Person</strong></span> = {
  typeName: "Person",
  <span class="bold"><strong>properties</strong></span>: {
    firstName: {range:"NonEmptyString", label:"First name", 
        writable: true, enumerable: true},
    lastName: {range:"NonEmptyString", label:"Last name", 
        writable: true, enumerable: true}
  },
  <span class="bold"><strong>methods</strong></span>: {
    getFullName: function () {
      return this.firstName +" "+ this.lastName; 
    }
  },
  <span class="bold"><strong>create</strong></span>: function (slots) {
    // create object
    var obj = <span class="bold"><strong>Object.create</strong></span>( this.methods, this.properties);
    // add special property for *direct type* of object
    Object.defineProperty( obj, "<span class="bold"><strong>type</strong></span>", 
        {<span class="bold"><strong>value: this</strong></span>, writable: false, enumerable: true});
    // initialize object
    for (prop of Object.keys( slots)) {
      if (prop in this.properties) obj[prop] = slots[prop];
    }
    return obj;
  }
};</pre><p>Notice that the JS object <code class="code">Person</code> actually represents
      a factory-based class. An instance of such a factory-based class is
      created by invoking its <code class="code">create</code> method:</p><pre class="programlisting">var pers1 = Person.create( {firstName:"Tom", lastName:"Smith"});</pre><p>The method <code class="code">getFullName</code> is invoked on the object
      <code class="code">pers1</code> of type <code class="code">Person</code> by using the 'dot
      notation', like in the constructor-based approach: </p><pre class="programlisting">alert("The full name of the person is: " + <span class="bold"><strong>pers1.getFullName()</strong></span>);</pre><p>Notice that each property declaration for an object created with
      <code class="code">Object.create</code> has to include the 'descriptors'
      <code class="code">writable: true</code> and <code class="code">enumerable: true</code>, as in
      lines 5 and 7 of the <code class="code">Person</code> object definition above.</p><p>In a general approach, like in the <a class="link" href="../mODELcLASSjs/validation-tutorial.html" target="_top">mODELcLASSjs</a>
      library for model-based development, we would not repeatedly define the
      <code class="code">create</code> method in each class definition, but rather have a
      generic constructor function for defining factory-based classes. Such a
      factory-based class constructor, like mODELcLASS, would also provide an
      <span class="bold"><strong><span class="italic">inheritance</span></strong></span> mechanism by merging the
      own properties and methods with the properties and methods of the
      superclass. This mechanism is also called <span class="italic"><a class="link" href="http://aaditmshah.github.io/why-prototypal-inheritance-matters/" target="_top">Inheritance
      by Concatenation</a></span>.</p></div></div></div><div lang="" class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e1561"></a>2.&nbsp;Storing Database Tables with JavaScript's localStorage API</h2></div></div></div><p>In most apps, we have some form of data management where data is
  represented in tables such that table rows correspond to objects, and the
  table schema corresponds to the objects' type. When building a front-end web
  app with JavaScript, the simplest approach for persistent data storage is
  using JavaScript's <code class="code">localStorage</code> API, which provides a simple
  key-value database, but does not support database tables. So, the question
  is: how can we store and retrieve tables with Local Storage?</p><p>We show how to represent database tables in JavaScript in the form of
  (what we call) <span class="italic">entity tables</span>, and how to
  store these tables in Local Storage.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1567"></a>2.1.&nbsp;Entity Tables</h3></div></div></div><p>The <span class="emphasis"><em><a class="link" href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON" target="_top">JavaScript
    Object Notation (JSON)</a></em></span><a class="indexterm" name="d5e1572"></a> defines a concise syntax for JavaScript array literals
    (<span class="italic">lists</span>) and JavaScript object literals
    (<span class="italic">maps</span>):</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><span class="bold"><strong><span class="italic">Lists</span></strong></span> are expressed as
        comma-separated lists of data literals <span class="bold"><strong><span class="italic">enclosed in brackets</span></strong></span>:</p><pre class="programlisting">["penguin", "arctis", "snow"]</pre></li><li class="listitem"><p><span class="bold"><strong><span class="italic">Maps</span></strong></span> are expressed as
        comma-separated lists of key-value slots <span class="bold"><strong><span class="italic">enclosed in curly
        braces</span></strong></span>:</p><pre class="programlisting">{"id": 2901465, "my phone number":"0049.30.227109"}</pre><p>A <span class="bold"><strong><span class="italic">record</span></strong></span> is a special type of map
        where the keys are <span class="emphasis"><em><a class="link" href="http://mothereff.in/js-variables" target="_top">admissible JavaScript
        identifiers</a></em></span> denoting properties, so they need not be
        enclosed in quotation marks in JavaScript code. For example, {id:
        2901465, phone:"0049.30.227109"} is a record. The value of a property
        in a record, or the value associated with a key in a map, may be a
        simple data literal, or an array literal, or another object literal as
        in:</p><pre class="programlisting">{tags:["penguin","arctis"], photographer:{"last":"Wagner","first":"Gerd"}}</pre></li></ul></div><p>An entity table contains a set of records (or table rows) such that
    each record represents an object with a standard identifier property slot.
    Consequently, an entity table can be represented as a map of records such
    that the keys of the map are the values of the standard identifier
    property, and their associated values are the corresponding records, as
    illustrated by the following example:</p><div class="informaltable"><table cellpadding="3" frame="border" rules="all"><thead><tr>
          <th>Key</th>

          <th>Value</th>
        </tr></thead><tbody><tr>
          <td>006251587X</td>

          <td>{ isbn:"006251587X," title:"Weaving the Web", year:2000 }</td>
        </tr><tr>
          <td>0465026567</td>

          <td>{ isbn:"0465026567," title:"G&ouml;del, Escher, Bach", year:1999
          }</td>
        </tr><tr>
          <td>0465030793</td>

          <td>{ isbn:"0465030793," title:"I Am A Strange Loop", year:2008
          }</td>
        </tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1614"></a>2.2.&nbsp;JavaScript's LocalStorage API</h3></div></div></div><p>For a front-end app, we need to be able to store data persistently
    on the front-end device. Modern web browsers provide two technologies for
    this purpose: the simpler one is called <span class="italic">Local
    Storage</span><code class="code"><a class="indexterm" name="d5e1619"></a></code>, and the more powerful one is called <span class="italic"><a class="link" href="https://dev.opera.com/articles/introduction-to-indexeddb/" target="_top">IndexedDB</a></span>.
    For simplicity, we use the <span class="italic">Local
    Storage</span> API in our example app.</p><p>A Local Storage database is created <span class="italic">per
    browser</span> and <span class="italic">per origin</span>,
    which is defined by the combination of protocol and domain name. For
    instance, <code class="code">http://example.com</code> and
    <code class="code">http://www.example.com</code> are different origins because they
    have different domain names, while <code class="code">http://www.example.com</code> and
    <code class="code">https://www.example.com</code> are different origins because of
    their different protocols (HTTP versus HTTPS).</p><p>The Local Storage database managed by the browser and associated
    with an app (via its origin) is exposed as the built-in JavaScript object
    <code class="code">localStorage</code> with the methods <code class="code">getItem</code>,
    <code class="code">setItem</code>, <code class="code">removeItem</code> and <code class="code">clear</code>.
    However, instead of invoking <code class="code">getItem</code> and
    <code class="code">setItem</code>, it is more convenient to handle
    <code class="code">localStorage</code> as a map, writing to it by assigning a value to
    a key as in <code class="code">localStorage["id"] = 2901465</code>, and retrieving data
    by reading the map as in <code class="code">var id = localStorage["id"]</code>. The
    following example shows how to create an entity table and save its
    serialization to Local Storage:</p><pre class="programlisting">var persons = {};
persons["2901465"] = {id: 2901465, name:"Tom"};
persons["3305579"] = {id: 3305579, name:"Su"};
persons["6492003"] = {id: 6492003, name:"Pete"};
try {
  <span class="bold"><strong>localStorage</strong></span>["personTable"] = <span class="bold"><strong>JSON.stringify</strong></span>( persons);
} catch (e) {
  alert("Error when writing to Local Storage\n" + e);
}</pre><p>Notice that we have used the predefined method
    <code class="code">JSON.stringify</code> for serializing the entity table
    <code class="code">persons</code> into a string that is assigned as the value of the
    <code class="code">localStorage</code> key "personTable". We can retrieve the table
    with the help of the predefined de-serialization method
    <code class="code">JSON.parse</code> in the following way:</p><pre class="programlisting">var persons = {};
try {
  persons = <span class="bold"><strong>JSON.parse</strong></span>( <span class="bold"><strong>localStorage</strong></span>["personTable"]);
} catch (e) {
  alert("Error when reading from Local Storage\n" + e);        
}</pre></div></div><div lang="" class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e1654"></a>3.&nbsp;New JavaScript Elements</h2></div></div></div><p>In this section, we present the most important new language elements
  introduced to JavaScript by ECMAScript 2015+ (that is,
  2015+16+17+18+19+20+...).</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1657"></a>3.1.&nbsp;Block-Scope Variable Declarations with <code class="literal">let</code> and
    <code class="literal">const</code></h3></div></div></div><p>ES5 did not allow declaring variables the scope of which is a block
    delimited by a pair of curly braces, <code class="literal">{</code> and
    <code class="literal">}</code>, or defined by a <code class="literal">for</code> loop. Rather,
    all variables declared with <code class="literal">var</code>, even if declared
    within a block, have either a function scope or the global scope. The new
    feature of <span class="emphasis"><em>block-scope variable declarations</em></span> with
    <span class="bold"><strong><code class="literal">let</code></strong></span> and <span class="bold"><strong><code class="literal">const</code></strong></span> allows declaring local
    variables with a finer-grained scope, which helps avoiding unintended
    variable duplications and writing more modular code.</p><p>There is only one meaning difference between <code class="literal">let</code>
    and <code class="literal">const</code>. Variables declared with
    <code class="literal">const</code> are <span class="emphasis"><em>frozen</em></span> or
    <span class="emphasis"><em>immutable</em></span>, and in this sense
    <span class="emphasis"><em>constant</em></span>, while <code class="literal">let</code> variables are
    not. It is preferable to use <code class="literal">const</code> for all variables
    that are not supposed to change their values. Otherwise, or if this is not
    clear, one should declare the variable with <code class="literal">let</code> if it
    is a block-scoped variable, or with <code class="literal">var</code> if it is a
    global or function-scoped variable.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1682"></a>3.2.&nbsp;Arrow Functions</h3></div></div></div><p>Compared to classical JS functions, arrow functions (with =&gt;)
    provide a more concise function expression syntax, see Ex. 1, and allow
    using JavaScript's <code class="literal">this</code> variable from the function's
    outer environment (its <span class="emphasis"><em>closure</em></span>) in their function
    body, see Ex. 2.</p><div class="example"><a name="d5e1687"></a><p class="title"><b>Example&nbsp;2.1.&nbsp;Code Example 1</b></p><div class="example-contents"><pre class="programlisting">let evens = [0,2,4,6,8];
let odds = evens.map( v <span class="bold"><strong>=&gt;</strong></span> v+1);  // [1,3,5,7,9]
// instead of evens.map( function (v) {return v+1;})</pre></div></div><br class="example-break"><div class="example"><a name="d5e1691"></a><p class="title"><b>Example&nbsp;2.2.&nbsp;Code Example 2</b></p><div class="example-contents"><pre class="programlisting">this.nums = [1,3,5,8,10,12,15,17];
this.fives = [];
this.nums.forEach( v <span class="bold"><strong>=&gt;</strong></span> {if (v % 5 === 0) this.fives.push(v);});
// instead of this.nums.forEach( 
//     function (v) {if (v % 5 === 0) this.fives.push(v);}, this)</pre></div></div><br class="example-break"></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1695"></a>3.3.&nbsp;For-Of Loops over Iterable Objects</h3></div></div></div><p>Iterable objects include strings, arrays, array-like objects (e.g.,
    the built-in <code class="literal">arguments</code> object or instances of
    <code class="literal">HTMLCollections</code> and <code class="literal">NodeList</code>), and
    instances of the datatype objects <code class="literal">TypedArray</code>,
    <code class="literal">Map</code>, and <code class="literal">Set</code>, as well as
    user-defined iterables. For instance,</p><pre class="programlisting">const divElems = document.getElementsByTagName("div");
// an HTMLCollection is iterable
<span class="bold"><strong>for</strong></span> (const dEl <span class="bold"><strong>of</strong></span> divElems) {
  console.log( dEl.id);
}</pre><p>A <span class="emphasis"><em>for-of</em></span> loop is often more handy than a
    <span class="emphasis"><em>for</em></span> loop whenever a counter variable is not needed.
    As opposed to a <code class="literal">forEach</code> loop, a
    <span class="emphasis"><em>for-of</em></span> loop allows iterating over
    <code class="literal">HTMLCollections</code> and can be abandoned with
    <code class="literal">break</code>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1714"></a>3.4.&nbsp;Template Literals</h3></div></div></div><p>... are enclosed by backtick characters (like `... `) instead of
    double or single quotes and allow a concise syntax for (possibly
    multi-line) string values resulting from a combination of fixed text parts
    and variables/expressions. For instance,</p><pre class="programlisting">const classValues = "card important";
const name = "Joker";
const htmlTemplate = <span class="bold"><strong>`</strong></span>&lt;div class="${classValues}"&gt;
  &lt;p&gt;Hello ${name}!&lt;/p&gt;
&lt;/div&gt;<span class="bold"><strong>`</strong></span></pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1720"></a>3.5.&nbsp;The Spread Operator</h3></div></div></div><p>...allows spreading (1) the elements of an iterable collection in
    places where arguments for function calls or array elements are expected,
    or (2) the slots of a JS object in places where name-value pairs are
    expected. For instance,</p><pre class="programlisting">let nums = [3,4,5], otherNums = [1, 2, <span class="bold"><strong>...</strong></span>nums];  // [1,2,3,4,5]
// cloning an array
let numsClone = [<span class="bold"><strong>...</strong></span>nums];
// cloning an object
let book = {title:"JavaScript: The Good Parts"};
let bookClone = {<span class="bold"><strong>...</strong></span>book};</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1727"></a>3.6.&nbsp;Destructuring Assignments</h3></div></div></div><p>...allow a concise syntax for assigning the property values of a JS
    object or the elements of a JS array to corresponding variables. For
    instance,</p><pre class="programlisting">var point1 = [10,5];
var <span class="bold"><strong>[x,y] = point1</strong></span>;  // a destructuring assignment
console.log(`x = ${x} | y = ${y}`);  // x = 10 | y = 5

var person1 = {firstName:"James", lastName:"Bond"};
var <span class="bold"><strong>{first, last} = person1</strong></span>;
console.log(`first:${first} | last:${last}`);
// Output: first:James | last:Bond</pre><div class="example"><a name="d5e1733"></a><p class="title"><b>Example&nbsp;2.3.&nbsp;Dealing with <span class="emphasis"><em>multiple return values</em></span> of a
      function</b></p><div class="example-contents"><pre class="programlisting">function getRectangle () {
  return {width: 50, height: 20};
}
const <span class="bold"><strong>{a, b} = getRectangle()</strong></span>;
drawRectangle( a, b);</pre></div></div><br class="example-break"><div class="example"><a name="d5e1738"></a><p class="title"><b>Example&nbsp;2.4.&nbsp;Swapping two variables</b></p><div class="example-contents"><pre class="programlisting">var a = 1, b = 2;
<span class="bold"><strong>[a,b] = [b,a]</strong></span>;
console.log(`a = ${a} | b = ${b}`);
// Output: a = 2 | b = 1</pre></div></div><br class="example-break"><div class="example"><a name="d5e1742"></a><p class="title"><b>Example&nbsp;2.5.&nbsp;Simplifying functions with parameter records</b></p><div class="example-contents"><p>A function parameter record allows using named arguments in
      function calls instead of argument lists like so:</p><pre class="programlisting">function displayName( paramRec) {
  alert( paramRec.first + " " + paramRec.last);
};
displayName({first:"James", last:"Bond"});</pre><p>Using Destructuring, the parameter record fields are assigned to
      ordinary function parameters, simplifying the function's code:</p><pre class="programlisting">function displayName(<span class="bold"><strong>{first, last}</strong></span>) {
  alert( first + " " + last);
}
displayName({first:"James", last:"Bond"});</pre></div></div><br class="example-break"></div></div><div lang="" class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e1749"></a>4.&nbsp;Quiz Questions</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1751"></a>4.1.&nbsp;Question 1: Data values and objects</h3></div></div></div><p>Which of the following statements about data values and objects in
    JS are true? Select one or more:</p><p>&#9744; <code class="code">true</code> is an object. &#9744; A JS array is a JS object. &#9744;
    <code class="code">false</code> is a data value.</p><p>&#9744; A JS function is a JS object. &#9744; <code class="code">1</code> is a data value. &#9744;
    <code class="code">Infinity</code> is an object.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1760"></a>4.2.&nbsp;Question 2: Evaluating a Boolean expression</h3></div></div></div><p>What is the value of the Boolean expression <code class="code">null || !0</code>
    ? Select one:</p><p>O true O false</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1765"></a>4.3.&nbsp;Question 3: JavaScript datatypes</h3></div></div></div><p>Which of the following denote primitive datatypes in JavaScript?
    Select one or more:</p><p>&#9744; double &#9744; string &#9744; float &#9744; int &#9744; boolean &#9744; byte &#9744; number</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1769"></a>4.4.&nbsp;Question 4: Constructor-based class definition</h3></div></div></div><div class="informalfigure-float" style="float: right;"><div class="informalfigure"><div class="mediaobject"><img src="../fig/City.png"></div></div></div><p>Which of the following JavaScript fragments correctly defines the
    constructor-based class <code class="code">City</code> shown in the class diagram
    (either using a constructor function definition or an ES6 class
    definition)? Hint: notice that <code class="code">setName</code> is an instance-level
    method while <code class="code">checkName</code> is a class-level ("static") method.
    Select one or more:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>&#9744;</p><pre class="programlisting">function City( n) {
  this.name = n;
  this.setName = function (n) {this.name = n;};
  checkName = function (n) {...}; // returns true or false
}</pre></li><li class="listitem"><p>&#9744;</p><pre class="programlisting">class City {
  constructor (n) {
    setName(n);
  }
  setName(n) {if (City.checkName( n)) this.name = n;}
  static checkName(n) {...}  // returns true or false
}</pre></li><li class="listitem"><p>&#9744;</p><pre class="programlisting">function City( n) {
  this.setName( n);
  function checkName( n) {...} // returns true or false
} 
City.prototype.setName = function (n) {this.name = n;};</pre></li><li class="listitem"><p>&#9744;</p><pre class="programlisting">function City( n) {
  this.setName( n);
}
City.prototype.setName = function (n) {
  if (City.checkName( n)) this.name = n;
};
City.checkName = function (n) {...};  // returns true or false</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1792"></a>4.5.&nbsp;Question 5: Type coercion</h3></div></div></div><p>Consider the following JavaScript code:</p><pre class="programlisting">var a = 5;
var b = "7";
var c = a + b;</pre><p>What is the value of the variable <code class="code">c</code>? Select one:</p><p>O The string "57" O The number 12 O <code class="code">undefined</code></p><p>O The code will result in an error since you can't use the +
    operator between two operands of different types.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1801"></a>4.6.&nbsp;Question 6: Variable scope</h3></div></div></div><p>What is the output of the following program?</p><pre class="programlisting">function foo() {
  var i=7;
  for (var i=0; i &lt; 10; i++) {
    ...  // do something
  }
  console.log( i);
};
foo();</pre><p>Answer: _____</p></div></div></div><div lang="en" class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="chMinAppJs"></a>Chapter&nbsp;3.&nbsp;Building a Minimal Web App with Plain JS in Seven Steps</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl class="toc"><dt><span class="section"><a href="#d5e1865">1. Step 1 - Set up the Folder Structure</a></span></dt><dt><span class="section"><a href="#d5e1880">2. Step 2 - Write the Model Code</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e1930">2.1. Representing the collection of all <code class="code">Book</code>
      instances</a></span></dt><dt><span class="section"><a href="#d5e1954">2.2. Creating a new <code class="code">Book</code> instance</a></span></dt><dt><span class="section"><a href="#d5e1963">2.3. Retrieving all <code class="code">Book</code> instances</a></span></dt><dt><span class="section"><a href="#d5e1993">2.4. Updating a <code class="code">Book</code> instance</a></span></dt><dt><span class="section"><a href="#d5e2001">2.5. Deleting a <code class="code">Book</code> instance</a></span></dt><dt><span class="section"><a href="#d5e2009">2.6. Saving all <code class="code">Book</code> instances</a></span></dt><dt><span class="section"><a href="#d5e2027">2.7. Creating test data</a></span></dt><dt><span class="section"><a href="#d5e2032">2.8. Clearing all data</a></span></dt></dl></dd><dt><span class="section"><a href="#sectMinAppInitialize">3. Step 3 - Initialize the Application</a></span></dt><dt><span class="section"><a href="#d5e2051">4. Step 4 - Implement the <span class="italic">Create</span>
    Use Case</a></span></dt><dt><span class="section"><a href="#d5e2087">5. Step 5 - Implement the <span class="italic">Retrieve/List
    All</span> Use Case</a></span></dt><dt><span class="section"><a href="#d5e2118">6. Step 6 - Implement the <span class="italic">Update</span>
    Use Case</a></span></dt><dt><span class="section"><a href="#d5e2158">7. Step 7 - Implement the <span class="italic">Delete</span>
    Use Case</a></span></dt><dt><span class="section"><a href="#d5e2176">8. Possible Variations and Extensions</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e2178">8.1. Using IndexedDB as an Alternative to LocalStorage</a></span></dt><dt><span class="section"><a href="#d5e2195">8.2. Styling the User Interface</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e2227">9. Points of Attention</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e2229">9.1. Catching invalid data</a></span></dt><dt><span class="section"><a href="#d5e2234">9.2. Database size and memory management</a></span></dt><dt><span class="section"><a href="#d5e2239">9.3. Boilerplate code</a></span></dt><dt><span class="section"><a href="#d5e2251">9.4. Serializing and de-serializing attribute values</a></span></dt><dt><span class="section"><a href="#d5e2268">9.5. Implicit versus explicit form field labels</a></span></dt><dt><span class="section"><a href="#d5e2298">9.6. Synchronizing views with the model</a></span></dt><dt><span class="section"><a href="#d5e2322">9.7. Architectural separation of concerns</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e2336">10. Quiz Questions</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e2338">10.1. Question 1: Properties/methods of a model class</a></span></dt><dt><span class="section"><a href="#d5e2343">10.2. Question 2: Using the <code class="code">output</code> element</a></span></dt><dt><span class="section"><a href="#d5e2349">10.3. Question 3: Entity tables</a></span></dt></dl></dd><dt><span class="section"><a href="#d5e2466">11. Practice Projects</a></span></dt><dd><dl><dt><span class="section"><a href="#d5e2468">11.1. Managing information about movies</a></span></dt><dt><span class="section"><a href="#d5e2538">11.2. Managing persistent data with IndexedDB</a></span></dt></dl></dd></dl></div><p>In this   <span class="phrase">tutorial,</span> we show how to build a minimal
  front-end web application with plain JavaScript and Local Storage. The
  purpose of our example app is to manage information about books. That is, we
  deal with a single object type: <code class="code">Book</code>, as depicted in the class
  diagram of <a class="xref" href="#figBookMinAppModel" title="Figure&nbsp;3.1.&nbsp;The object type Book.">Figure&nbsp;3.1</a>.</p><div class="figure"><a name="figBookMinAppModel"></a><p class="title"><b>Figure&nbsp;3.1.&nbsp;The object type <code class="code">Book</code>.</b></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="150"><tr><td><img src="../fig/Book.svg" width="150" alt="The object type Book."></td></tr></table></div></div></div><br class="figure-break"><p>The following table shows a sample data population for the model class
  <code class="code">Book</code>:</p><div class="table"><a name="tblBooks"></a><p class="title"><b>Table&nbsp;3.1.&nbsp;A collection of book objects represented as a table</b></p><div class="table-contents"><table frame="box" rules="all"><thead><tr>
        <th>ISBN</th>

        <th>Title</th>

        <th>Year</th>
      </tr></thead><tbody><tr>
        <td>006251587X</td>

        <td>Weaving the Web</td>

        <td>2000</td>
      </tr><tr>
        <td>0465026567</td>

        <td>G&ouml;del, Escher, Bach</td>

        <td>1999</td>
      </tr><tr>
        <td>0465030793</td>

        <td>I Am A Strange Loop</td>

        <td>2008</td>
      </tr></tbody></table></div></div><br class="table-break"><p>What do we need for a data management app? There are four standard use
  cases, which have to be supported by the app: </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><span class="bold"><strong>Create</strong></span> a new book record by
        allowing the user to enter the data of a book that is to be added to
        the collection of stored book records.</p></li><li class="listitem"><p><span class="bold"><strong>Retrieve</strong></span> (or <span class="italic">read</span>) all books from the data store and show
        them in the form of a list.</p></li><li class="listitem"><p><span class="bold"><strong>Update</strong></span> the data of a book
        record.</p></li><li class="listitem"><p><span class="bold"><strong>Delete</strong></span> a book record.</p></li></ol></div><p>These four standard use cases, and the corresponding data management
  operations, are often summarized with the acronym <span class="italic">CRUD</span>.</p><p>For entering data with the help of the keyboard and the screen of our
  computer, we use <span class="italic">HTML forms</span>, which
  provide the <span class="italic">user interface</span> technology for
  web applications.</p><p>For maintaining a collection of persistent data objects, we need a
  storage technology that allows to keep data objects in persistent records on
  a secondary storage device, such as a hard-disk or a solid state disk.
  Modern web browsers provide two such technologies: the simpler one is called
  <span class="italic">Local Storage</span>, and the more powerful one
  is called <span class="italic"><a class="link" href="https://dev.opera.com/articles/introduction-to-indexeddb/" target="_top">IndexedDB</a></span>.
  For our minimal example app, we use Local Storage.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e1865"></a>1.&nbsp;Step 1 - Set up the Folder Structure</h2></div></div></div><p>In the first step, we set up our folder structure for the
    application. We pick a name for our app, such as "Public Library", and a
    corresponding (possibly abbreviated) name for the application folder, such
    as "PublicLibrary" or "MinimalApp". Then we create this folder on our
    computer's disk and a subfolder "src" for our JavaScript source code
    files. In this folder, we create the subfolders "m", "v" and "c",
    following the <span class="italic">Model-View-Controller</span>
    paradigm for software application architectures. And finally we create an
    <code class="filename">index.html</code> file for the app's start page, as
    discussed below. Thus, we end up with the following folder structure:
    </p><pre class="programlisting">MinimalApp
  src
    c
    m
    v
  index.html</pre><p>In the start page HTML file of the app, we load the file
    <code class="filename">initialize.js</code> and the <code class="filename">Book.js</code>
    model class file:</p><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"&gt;
&lt;head&gt;
 &lt;meta charset="UTF-8" /&gt;
 &lt;title&gt;Minimal JS Front-End App Example&lt;/title&gt;
 &lt;script src="src/c/initialize.js"&gt;&lt;/script&gt;
 &lt;script src="src/m/Book.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
 ...
&lt;/body&gt;
&lt;/html&gt;</pre><p>The start page provides a menu for choosing one of the CRUD data
    management use cases. Each use case is performed by a corresponding page
    such as, for instance, <code class="filename">createBook.html</code>. The menu also
    contains options for creating test data with the help of the procedure
    <code class="code">Book.createTestData()</code> and for clearing all data with
    <code class="code">Book.clearData()</code>:</p><pre class="programlisting">&lt;body&gt;
 &lt;h1&gt;Public Library&lt;/h1&gt;
 &lt;h2&gt;An Example of a Minimal JavaScript Front-End App&lt;/h2&gt;
 &lt;p&gt;This app supports the following operations:&lt;/p&gt;
 &lt;menu&gt;
  &lt;li&gt;&lt;a href="retrieveAndListAllBooks.html"&gt;
       List all books&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="createBook.html"&gt;Add a new book&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="updateBook.html"&gt;Update a book&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href="deleteBook.html"&gt;Delete a book&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;button type="button" onclick="Book.clearData()"&gt;
    Clear database
  &lt;/button&gt;&lt;/li&gt;
  &lt;li&gt;&lt;button type="button" onclick="Book.createTestData()"&gt;
    Create test data
  &lt;/button&gt;&lt;/li&gt;
 &lt;/menu&gt;
&lt;/body&gt;</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e1880"></a>2.&nbsp;Step 2 - Write the Model Code</h2></div></div></div><p>In the second step, we write the code of our model class and save it
    in a specific model class file. In an MVC app, the model code is the most
    important part of the app. It's also the basis for writing the view and
    controller code. In fact, large parts of the view and controller code
    could be automatically generated from the model code. Many MVC frameworks
    provide this kind of code generation.</p><p>In the information design model shown in <a class="xref" href="#figBookMinAppModel" title="Figure&nbsp;3.1.&nbsp;The object type Book.">Figure&nbsp;3.1</a> above, there is
    only one class, representing the object type <code class="code">Book</code>. So, in the
    folder <code class="filename">src/m</code>, we create a file
    <code class="filename">Book.js</code> that initially contains the following code:
    </p><pre class="programlisting">function <span class="bold"><strong>Book</strong></span>( slots) {
  this.isbn = slots.isbn;
  this.title = slots.title;
  this.year = slots.year;
};</pre><p>The model class <code class="code">Book</code> is coded as a JavaScript
    constructor function with a single <code class="code">slots</code> parameter, which is
    a record object with fields <code class="code">isbn</code>, <code class="code">title</code> and
    <code class="code">year</code>, representing the constructor parameters to be assigned
    to the <span class="italic">ISBN</span>, the <span class="italic">title</span> and the <span class="italic">year</span> attributes of the class <code class="code">Book</code>.
    Notice that, for getting a simple name, we have put the class name
    <code class="code">Book</code> in the <span class="emphasis"><em>global scope</em></span>, which is okay
    for a small app with only a few classes. In general, however, we should
    avoid using the global scope (either with the help of namespace objects or
    by using ES6 modules).</p><p>In addition to defining the model class in the form of a constructor
    function, we also define the following items in the
    <code class="filename">Book.js</code> file: </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>A class-level property <code class="code">Book.instances</code>
          representing the collection of all <code class="code">Book</code> instances
          managed by the application in the form of an entity table.</p></li><li class="listitem"><p>A class-level method <code class="code">Book.retrieveAll</code> for loading
          all managed Book instances from the persistent data store.</p></li><li class="listitem"><p>A class-level method <code class="code">Book.saveAll</code> for saving all
          managed Book instances to the persistent data store.</p></li><li class="listitem"><p>A class-level method <code class="code">Book.add</code> for creating a new
          Book instance.</p></li><li class="listitem"><p>A class-level method <code class="code">Book.update</code> for updating an
          existing Book instance.</p></li><li class="listitem"><p>A class-level method <code class="code">Book.destroy</code> for deleting a
          Book instance.</p></li><li class="listitem"><p>A class-level method <code class="code">Book.createTestData</code> for
          creating a few example book records to be used as test data.</p></li><li class="listitem"><p>A class-level method <code class="code">Book.clearData</code> for clearing
          the book datastore.</p></li></ol></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1930"></a>2.1.&nbsp;Representing the collection of all <code class="code">Book</code>
      instances</h3></div></div></div><p>For representing the collection of all Book instances managed by
      the application, we define and initialize the class-level property
      <code class="code">Book.instances</code> in the following way:</p><pre class="programlisting">Book.instances = {};</pre><p>So, initially our collection of books is empty. In fact, it's
      defined as an empty object literal, since we want to represent it in the
      form of an entity table (a map of entity records) where an ISBN is a key
      for accessing the corresponding book record (as the value associated
      with the key). We can visualize the structure of an entity table in the
      form of a lookup table:</p><div class="informaltable"><table frame="box" rules="all"><thead><tr>
            <th>Key</th>

            <th>Value</th>
          </tr></thead><tbody><tr>
            <td>006251587X</td>

            <td>{ isbn:"006251587X", title:"Weaving the Web", year:2000 }</td>
          </tr><tr>
            <td>0465026567</td>

            <td>{ isbn:"0465026567", title:"G&ouml;del, Escher, Bach", year:1999
            }</td>
          </tr><tr>
            <td>0465030793</td>

            <td>{ isbn:"0465030793", title:"I Am A Strange Loop", year:2008
            }</td>
          </tr></tbody></table></div><p>Notice that the values of such a map are records corresponding to
      table rows. Consequently, we could also represent them in a simple
      table, as shown in <a class="xref" href="#tblBooks" title="Table&nbsp;3.1.&nbsp;A collection of book objects represented as a table">Table&nbsp;3.1</a>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1954"></a>2.2.&nbsp;Creating a new <code class="code">Book</code> instance</h3></div></div></div><p>The <code class="code">Book.add</code> procedure takes care of creating a new
      <code class="code">Book</code> instance and adding it to the
      <code class="code">Book.instances</code> collection:</p><pre class="programlisting">Book.<span class="bold"><strong>add</strong></span> = function (slots) {
  const book = new Book( slots);
  // add book to the collection of Book.instances 
  Book.instances[slots.isbn] = book;
  console.log(`Book ${slots.isbn} created!`);
};</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1963"></a>2.3.&nbsp;Retrieving all <code class="code">Book</code> instances</h3></div></div></div><p>For persistent data storage, we use the <span class="italic">Local Storage</span> API supported by modern web
      browsers. Retrieving the book records from Local Storage involves three
      steps:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Retrieving the book table that has been stored as a large
            string with the key "books" from Local Storage with the help of
            the assignment</p><pre class="programlisting">booksString = localStorage["books"];</pre></li><li class="listitem"><p>Converting the book table string into a corresponding entity
            table <code class="code">books</code> with book rows as elements, with the help
            of the built-in function <code class="code">JSON.parse</code>: </p><pre class="programlisting">books = JSON.parse( booksString);</pre><p>This conversion is called <span class="italic">de-serialization</span>.</p></li><li class="listitem"><p>Converting each row of <code class="code">books</code>, representing a
            record (an untyped object), into a corresponding object of type
            <code class="code">Book</code> stored as an element of the entity table
            <code class="code">Book.instances</code>, with the help of the procedure
            <code class="code">convertRec2Obj</code> defined as a "static" (class-level)
            method in the <code class="code">Book</code> class: </p><pre class="programlisting">Book.<span class="bold"><strong>convertRec2Obj</strong></span> = function (bookRow) {
  const book = new Book( bookRow);
  return book;
};</pre></li></ol></div><p>Here is the full code of the procedure:</p><pre class="programlisting">Book.<span class="bold"><strong>retrieveAll</strong></span> = function () {
  var booksString="";  
  try {
    if (localStorage["books"]) {
      booksString = localStorage["books"];
    }
  } catch (e) {
    alert("Error when reading from Local Storage\n" + e);
  }
  if (booksString) {
    const books = JSON.parse( booksString);
    const keys = Object.keys( books);
    console.log(`${keys.length} books loaded.`);
    for (const key of keys) {
      Book.instances[key] = Book.convertRec2Obj( books[key]);
    }
  }
};</pre><p>Notice that since an input operation like
      <code class="code">localStorage["books"]</code> may fail, we perform it in a
      try-catch block, where we can follow up with an error message whenever
      the input operation fails.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e1993"></a>2.4.&nbsp;Updating a <code class="code">Book</code> instance</h3></div></div></div><p>For updating an existing <code class="code">Book</code> instance we first
      retrieve it from <code class="code">Book.instances</code>, and then re-assign those
      attributes the value of which has changed:</p><pre class="programlisting">Book.<span class="bold"><strong>update</strong></span> = function (slots) {
  const book = Book.instances[slots.isbn],
        year = parseInt( slots.year);  // convert string to integer
  if (book.title !== slots.title) book.title = slots.title;
  if (book.year !== year) book.year = year;
  console.log(`Book ${slots.isbn} modified!`);
};</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e2001"></a>2.5.&nbsp;Deleting a <code class="code">Book</code> instance</h3></div></div></div><p>A Book instance is deleted from the entity table
      <code class="code">Book.instances</code> by first testing if the table has a row with
      the given key (line 2), and then applying the JavaScript built-in
      <code class="code">delete</code> operator, which deletes a slot from an object, or an
      entry from a map:</p><pre class="programlisting">Book.<span class="bold"><strong>destroy</strong></span> = function (isbn) {
  if (Book.instances[isbn]) {
    console.log(`Book ${isbn} deleted`);
    delete Book.instances[isbn];
  } else {
    console.log(`There is no book with ISBN ${isbn} in the database!`);
  }
};</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e2009"></a>2.6.&nbsp;Saving all <code class="code">Book</code> instances</h3></div></div></div><p>Saving all book objects from the <code class="code">Book.instances</code>
      collection in main memory to Local Storage in secondary memory involves
      two steps:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Converting the entity table <code class="code">Book.instances</code> into
            a string with the help of the predefined JavaScript procedure
            <code class="code">JSON.stringify</code>:</p><pre class="programlisting">booksString = JSON.stringify( Book.instances);</pre><p>
            This conversion is called <span class="italic">serialization</span>.</p></li><li class="listitem"><p>Writing the resulting string as the value of the key "books"
            to Local Storage:</p><pre class="programlisting">localStorage["books"] = booksString;</pre></li></ol></div><p>These two steps are performed in line 5 and in line 6 of the
      following program listing:</p><pre class="programlisting">Book.<span class="bold"><strong>saveAll</strong></span> = function () {
  var error = false;
  try {
    const booksString = JSON.stringify( Book.instances);
    localStorage["books"] = booksString;
  } catch (e) {
    alert("Error when writing to Local Storage\n" + e);
    error = true;
  }
  if (!error) {
    const nmrOfBooks = Object.keys( Book.instances).length;
    console.log(`${nmrOfBooks} books saved.`);
  }
};</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e2027"></a>2.7.&nbsp;Creating test data</h3></div></div></div><p>For being able to test our code, we may create some test data and
      save it in our Local Storage database. We can use the following
      procedure for this:</p><pre class="programlisting">Book.<span class="bold"><strong>createTestData</strong></span> = function () {
  Book.instances["006251587X"] = new Book(
      {isbn:"006251587X", title:"Weaving the Web", year:2000});
  Book.instances["0465026567"] = new Book(
      {isbn:"0465026567", title:"G&ouml;del, Escher, Bach", year:1999});
  Book.instances["0465030793"] = new Book(
      {isbn:"0465030793", title:"I Am A Strange Loop", year:2008});
  Book.saveAll();
};</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e2032"></a>2.8.&nbsp;Clearing all data</h3></div></div></div><p>The following procedure clears all data from Local Storage:</p><pre class="programlisting">Book.<span class="bold"><strong>clearData</strong></span> = function () {
  if (confirm("Do you really want to delete all book data?")) {
    localStorage["books"] = "{}";
  }
};</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="sectMinAppInitialize"></a>3.&nbsp;Step 3 - Initialize the Application</h2></div></div></div><p>We initialize the application by defining its namespace and MVC
    sub-namespaces. Namespaces are an important concept in software
    engineering and many programming languages, including Java and PHP,
    provide specific support for namespaces, which help grouping related
    pieces of code and avoiding name conflicts. Since there is no specific
    support for namespaces in JavaScript, we use special objects for this
    purpose (we may call them "namespace objects"). First we define a root
    namespace (object) for our app, and then we define three sub-namespaces,
    one for each of the three parts of the application code: <span class="italic">model</span>, <span class="italic">view</span>
    and <span class="italic">controller</span>. In the case of our
    example app, we may use the following code for this:</p><pre class="programlisting">var pl = { m:{}, v:{}, c:{} };</pre><p>Here, the main namespace is defined to be <code class="code">pl</code>, standing
    for "Public Library", with the three sub-namespaces <code class="code">m</code>,
    <code class="code">v</code> and <code class="code">c</code> being initially empty objects. We put
    this code in a separate file <code class="filename">initialize.js</code> in the
    <code class="filename">c</code> folder, because such a namespace definition belongs
    to the controller part of the application code.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e2051"></a>4.&nbsp;Step 4 - Implement the <span class="italic">Create</span>
    Use Case</h2></div></div></div><p>For our example app, the user interface page for the CRUD use case
    <span class="italic">Create</span> is called
    <code class="filename">createBook.html</code> located in the
    <code class="filename">MinimalApp</code> folder. In its <code class="code">head</code> element,
    it loads the app initialization file <code class="filename">initialize.js</code>,
    the model class file <code class="filename">Book.js</code> and the view code file
    <code class="filename">createBook.js</code>, and adds a <code class="code">load</code> event
    listener for setting up the <span class="italic">Create</span> user
    interface:</p><pre class="programlisting">&lt;!DOCTYPE html&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="UTF-8" /&gt;
  &lt;title&gt;Minimal JS Front-End App Example&lt;/title&gt;    
  &lt;script src="src/c/initialize.js"&gt;&lt;/script&gt;
  &lt;script src="src/m/Book.js"&gt;&lt;/script&gt;
  &lt;script src="src/v/createBook.js"&gt;&lt;/script&gt;
  &lt;script&gt;
   window.addEventListener("load", 
       pl.v.createBook.setupUserInterface);
  &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;...&lt;/body&gt;
&lt;/html&gt;</pre><p>For a data management use case with user input, such as "Create", an
    HTML form<a class="indexterm" name="d5e2066"></a> is required as a user interface. The form typically has a
    labelled <code class="code">input</code> or <code class="code">select</code> field for each
    attribute of the model class:</p><pre class="programlisting">&lt;body&gt;
 &lt;header&gt;
  &lt;h1&gt;Create a new book record&lt;/h1&gt;
 &lt;/header&gt;
 &lt;main&gt;
  &lt;form id="Book"&gt;
   &lt;div&gt;&lt;label&gt;ISBN: &lt;input name="isbn" /&gt;&lt;/label&gt;&lt;/div&gt;
   &lt;div&gt;&lt;label&gt;Title: &lt;input name="title" /&gt;&lt;/label&gt;&lt;/div&gt;
   &lt;div&gt;&lt;label&gt;Year: &lt;input name="year" /&gt;&lt;/label&gt;&lt;/div&gt;
   &lt;div&gt;&lt;button type="button" name="commit"&gt;Save&lt;/button&gt;&lt;/div&gt;
  &lt;/form&gt;
 &lt;/main&gt;
 &lt;footer&gt;
  &lt;a href="index.html"&gt;Back to main menu&lt;/a&gt;
 &lt;/footer&gt;
&lt;/body&gt;</pre><p>The view code file <code class="filename">src/v/createBook.js</code> contains
    two procedures: </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>The procedure <code class="code">setupUserInterface</code> takes care of
          retrieving the collection of all objects from the persistent data
          store and setting up an event handler
          (<code class="code">handleSaveButtonClickEvent</code>) on the save button for
          handling click button events by saving the user input data:</p><pre class="programlisting">pl.v.createBook = {
  <span class="bold"><strong>setupUserInterface</strong></span>: function () {
    const saveButton = document.forms["Book"].commit;
    // load all book objects
    Book.retrieveAll();
    // set an event handler for the save/submit button
    saveButton.addEventListener("click", 
        pl.v.createBook.handleSaveButtonClickEvent);
    // handle the event when the browser window/tab is closed
    window.addEventListener("beforeunload", function () {
        Book.saveAll(); 
    });
  },
  ...
};</pre></li><li class="listitem"><p>The procedure <code class="code">handleSaveButtonClickEvent</code> reads
          the user input data from the form fields and then saves this data by
          calling the <code class="code">Book.add</code> procedure.</p><pre class="programlisting">pl.v.createBook = {
  ...
  <span class="bold"><strong>handleSaveButtonClickEvent</strong></span>: function () {
    const formEl = document.forms["Book"];
    const slots = { isbn: formEl.isbn.value, 
        title: formEl.title.value, 
        year: formEl.year.value };
    Book.add( slots);
    formEl.reset();
  }
};</pre></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e2087"></a>5.&nbsp;Step 5 - Implement the <span class="italic">Retrieve/List
    All</span> Use Case</h2></div></div></div><p>The user interface for the CRUD use case
    <span class="emphasis"><em>Retrieve</em></span> consists of an HTML table for displaying the
    data of all model objects. For our example app, this page is called
    <code class="filename">retrieveAndListAllBooks.html</code>, located in the main
    folder <code class="filename">MinimalApp</code>, and it contains the following code
    in its <code class="code">head</code> element: </p><pre class="programlisting">&lt;head&gt;
  &lt;meta charset="UTF-8" /&gt;
  &lt;title&gt;Simple JS Front-End App Example&lt;/title&gt;
  &lt;script src="src/c/<span class="bold"><strong>initialize</strong></span>.js"&gt;&lt;/script&gt;
  &lt;script src="src/m/<span class="bold"><strong>Book</strong></span>.js"&gt;&lt;/script&gt;
  &lt;script src="src/v/<span class="bold"><strong>retrieveAndListAllBooks</strong></span>.js"&gt;&lt;/script&gt;
  &lt;script&gt;
   window.addEventListener( "load", 
       pl.v.<span class="bold"><strong>retrieveAndListAllBooks.setupUserInterface</strong></span>);
  &lt;/script&gt;
&lt;/head&gt;</pre><p>Notice that, in addition to loading the app initialization JS file
    and the model class JS file, we load the view code file (here:
    <code class="filename">retrieveAndListAllBooks.js</code>) and invoke its
    <code class="code">setupUserInterface</code> procedure via a <code class="code">load</code> event
    listener. This is the pattern we use for all four CRUD use cases.</p><pre class="programlisting">&lt;body&gt;
 &lt;header&gt;
  &lt;h1&gt;Retrieve and list all book records&lt;/h1&gt;
 &lt;/header&gt;
 &lt;main&gt;
  &lt;table id="books"&gt;
   &lt;thead&gt;&lt;tr&gt;&lt;th&gt;ISBN&lt;/th&gt;&lt;th&gt;Title&lt;/th&gt;&lt;th&gt;Year&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;
   &lt;tbody&gt;&lt;/tbody&gt;
  &lt;/table&gt;
 &lt;/main&gt;
 &lt;footer&gt;
  &lt;a href="index.html"&gt;Back to main menu&lt;/a&gt;
 &lt;/footer&gt;
&lt;/body&gt;</pre><p>In the <code class="code">setupUserInterface</code> procedure, we first set up
    the data management context by retrieving all book data from the database
    and then fill the table by creating a table row for each book object from
    <code class="code">Book.instances</code>: </p><pre class="programlisting"> pl.v.retrieveAndListAllBooks = {
  <span class="bold"><strong>setupUserInterface</strong></span>: function () {
    const tableBodyEl = document.querySelector("table#books&gt;tbody");
    // load all book objects
    Book.retrieveAll();
    // for each book, create a table row with a cell for each attribute
    for (const key of Object.keys( Book.instances)) {
      const book = Book.instances[key];
      const row = tableBodyEl.insertRow();
      row.insertCell().textContent = book.isbn;
      row.insertCell().textContent = book.title;
      row.insertCell().textContent = book.year;
    }
};</pre><p>More specifically, the procedure
    <code class="code">setupUserInterface</code> creates the view table in a loop over all
    objects of <code class="code">Book.instances</code>. In each step of this loop, a new
    row is created in the table body element with the help of the JavaScript
    DOM operation <code class="code">insertRow()</code>, and then three cells are created
    in this row with the help of the DOM operation <code class="code">insertCell()</code>:
    the first one for the <code class="code">isbn</code> property value of the book object,
    and the second and third ones for its <code class="code">title</code> and
    <code class="code">year</code> property values.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e2118"></a>6.&nbsp;Step 6 - Implement the <span class="italic">Update</span>
    Use Case</h2></div></div></div><p>Also for the <span class="emphasis"><em>Update</em></span> use case, we have an HTML
    page for the user interface (<code class="filename">updateBook.html</code>) and a
    view code file (<code class="filename">src/v/updateBook.js</code>). The HTML form
    for the UI of the "update book" operation has a selection field for
    choosing the book to be updated, an <code class="code">output</code> field for the
    standard identifier attribute <code class="code">isbn</code>, and an <code class="code">input</code>
    field for each attribute of the <code class="code">Book</code> class that can be
    updated. Notice that by using an <code class="code">output</code> field for the
    standard identifier attribute, we do not allow changing the standard
    identifier of an existing object.</p><pre class="programlisting">&lt;main&gt;
 &lt;form id="Book"&gt;
  &lt;div&gt;&lt;label&gt;Select book: 
    &lt;<span class="bold"><strong>select</strong></span> name="selectBook"&gt;
     &lt;option value=""&gt; --- &lt;/option&gt;&lt;/select&gt;
  &lt;/label&gt;&lt;/div&gt;
  &lt;div&gt;&lt;label&gt;ISBN: &lt;<span class="bold"><strong>output</strong></span> name="isbn"&gt;&lt;/output&gt;&lt;/label&gt;&lt;/div&gt;
  &lt;div&gt;&lt;label&gt;Title: &lt;input name="title"/&gt;&lt;/label&gt;&lt;/div&gt;
  &lt;div&gt;&lt;label&gt;Year: &lt;input name="year"/&gt;&lt;/label&gt;&lt;/div&gt;
  &lt;div&gt;&lt;button type="button" name="commit"&gt;
   Save Changes&lt;/button&gt;&lt;/div&gt;
 &lt;/form&gt;
&lt;/main&gt;</pre><p>Notice that we include a kind of empty option element, with a value
    of <code class="code">""</code> and a display text of <code class="code">---</code>, as a default
    choice in the <code class="code">selectBook</code> selection list element. So, by
    default, the <code class="code">value</code> of the <code class="code">selectBook</code> form
    control is empty, requiring the user to choose one of the available
    options for filling the form.</p><p>The <code class="code">setupUserInterface</code> procedure now has to populate
    the <code class="code">select</code> element's option list by loading the collection of
    all book objects from the data store and creating an option element for
    each book object:</p><pre class="programlisting">pl.v.updateBook = {
  <span class="bold"><strong>setupUserInterface</strong></span>: function () {
    const formEl = document.forms["Book"],
        saveButton = formEl.commit,
        selectBookEl = formEl.selectBook;
    Book.retrieveAll();  // load all book objects
    // <span class="bold"><strong>populate the selection list</strong></span> with books
    for (const key of Object.keys( Book.instances)) {
      const book = Book.instances[key];
      const optionEl = document.createElement("option");
      optionEl.text = book.title;
      optionEl.value = book.isbn;
      selectBookEl.add( optionEl, null);
    }
    // when a book is selected, fill the form with its data
    selectBookEl.addEventListener("change", 
        pl.v.updateBook.<span class="bold"><strong>handleBookSelectionEvent</strong></span>);
    // set an event handler for the submit/save button
    saveButton.addEventListener("click",
        pl.v.updateBook.<span class="bold"><strong>handleSaveButtonClickEvent</strong></span>);
    // handle the event when the browser window/tab is closed
    window.addEventListener("beforeunload", Book.saveAll);
  },
  ...
}</pre><p>A book selection event is caught via a listener for
    <code class="code">change</code> events on the <code class="code">select</code> element. When a book
    is selected, the form is filled with its data:</p><pre class="programlisting">  <span class="bold"><strong>handleBookSelectionEvent</strong></span>: function () {
    const formEl = document.forms["Book"],
          selectBookEl = formEl.selectBook,
          key = selectBookEl.value;
    if (key) {
      const book = Book.instances[key];
      formEl.isbn.value = book.isbn;
      formEl.title.value = book.title;
      formEl.year.value = book.year;
    } else {
      formEl.reset();
    }
  },</pre><p>When the save button is activated, a <code class="code">slots</code> record is
    created from the form field values and used as the argument for calling
    <code class="code">Book.update</code>:</p><pre class="programlisting">  <span class="bold"><strong>handleSaveButtonClickEvent</strong></span>: function () {
    const formEl = document.forms["Book"],
          selectBookEl = formEl.selectBook;
    const slots = { isbn: formEl.isbn.value,
        title: formEl.title.value,
        year: formEl.year.value
    };
    Book.update( slots);
    // update the selection list option element
    selectBookEl.options[selectBookEl.selectedIndex].text = slots.title;
    formEl.reset();
  }
};</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e2158"></a>7.&nbsp;Step 7 - Implement the <span class="italic">Delete</span>
    Use Case</h2></div></div></div><p>The user interface for the <span class="italic">Delete</span>
    use case just has a <code class="code">select</code> field for choosing the book to be
    deleted:</p><pre class="programlisting">&lt;main&gt;
 &lt;form id="Book"&gt;
  &lt;div&gt;
   &lt;label&gt;Select book: &lt;<span class="bold"><strong>select</strong></span> name="selectBook"&gt;
     &lt;option value=""&gt;---&lt;/option&gt;&lt;/select&gt;
   &lt;/label&gt;
  &lt;/div&gt;
  &lt;div&gt;&lt;button type="button" name="commit"&gt;Delete&lt;/button&gt;&lt;/div&gt;
 &lt;/form&gt;
&lt;/main&gt;</pre><p>Like in the <span class="italic">Update</span> case, the
    <code class="code">setupUserInterface</code> procedure in the view code in
    <code class="filename">src/v/deleteBook.js</code> loads the book data into main
    memory, populates the book selection list and adds some event listeners.
    The event handler for <span class="italic">Delete</span> button
    click events has the following code:</p><pre class="programlisting"><span class="bold"><strong>handleDeleteButtonClickEvent</strong></span>: function () {
  const selectEl = document.forms["Book"].selectBook,
        isbn = selectEl.value;
  if (isbn) {
    Book.destroy( isbn);
    // remove deleted book from select options
    selectEl.remove( selectEl.selectedIndex);
  }
}</pre><p>You can <a class="link" href="MinimalApp/index.html" target="_top">run
    the minimal app</a> from our server or <a class="link" href="MinimalApp.zip" target="_top">download
    the code</a> as a ZIP archive file.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e2176"></a>8.&nbsp;Possible Variations and Extensions</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e2178"></a>8.1.&nbsp;Using IndexedDB as an Alternative to LocalStorage</h3></div></div></div><p>Instead of using the <span class="italic">Local
      Storage</span> API, the <a class="link" href="https://dev.opera.com/articles/introduction-to-indexeddb/" target="_top"><span class="italic">IndexedDB</span></a><a class="indexterm" name="d5e2184"></a> API could be used for <span class="bold"><strong><span class="italic">locally storing</span></strong></span> the application
      data. With <span class="italic">Local Storage</span> you only
      have one database (which you may have to share with other apps from the
      same domain) and there is no support for database tables (we have worked
      around this limitation in our approach). With <span class="italic">IndexedDB</span> you can set up a specific database
      for your app, and you can define database tables, called 'object
      stores', which may have indexes for accessing records with the help of
      an indexed attribute instead of the standard identifier attribute. Also,
      since <span class="italic">IndexedDB</span> supports larger
      databases, its access methods are asynchronous and can only be invoked
      in the context of a database transaction.</p><p>Alternatively, for <span class="bold"><strong><span class="italic">remotely storing</span></strong></span> the application
      data with the help of a web API one can either use a back-end solution
      component or a cloud storage service. The remote storage approach allows
      managing larger databases and supports multi-user apps.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e2195"></a>8.2.&nbsp;Styling the User Interface</h3></div></div></div><p>For simplicity, we have used raw HTML without any CSS<a class="indexterm" name="d5e2198"></a> styling. But a user interface should be appealing. So,
      the code of this app should be extended by adding suitable CSS style
      rules.</p><p>Today, the UI pages of a web app have to be <span class="italic">adaptive</span> (frequently called "responsive") for
      being rendered on different devices with different screen sizes and
      resolutions, which can be detected with CSS media queries. The main
      issue of an adaptive UI is to have a <span class="italic">fluid
      layout</span>, in addition to proper viewport settings. Whenever
      images are used in a UI, we also need an approach for adaptive bitmap
      images: serving images in smaller sizes for smaller screens and in
      higher resolutions for high resolution screens, while preferring
      scalable SVG images for diagrams and artwork. In addition, we may
      decrease the font-size of headings and suppress unimportant content
      items on smaller screens.</p><p>For our purposes, and for keeping things simple, we customize the
      adaptive web page design defined by the <a class="link" href="https://html5boilerplate.com/" target="_top">HTML5 Boilerplate</a>
      project (more precisely, the minimal "responsive" configuration
      available on www.initializr.com). It just consists of an HTML template
      file and two CSS files: the browser style normalization file
      <code class="filename">normalize.css</code> (in its minified form) and a
      <code class="filename">main.css</code>, which contains the HTML5 Boilerplate
      style and our customizations. Consequently, we use a new
      <code class="filename">css</code> subfolder containing these two CSS
      files:</p><pre class="programlisting">MinimalApp-with-CSS
  css
    main.css
    normalize.min.css
  src
    c
    m
    v
  index.html</pre><p>One customization change we have made in
      <code class="filename">index.html</code> is to replace the <code class="code">&lt;div
      class="main"&gt;</code> container element with the new HTML 5.1 element
      <code class="code">&lt;main&gt;</code> such that we obtain a simple and clear UI page
      structure provided by the sequence of the three container elements
      <code class="code">&lt;header&gt;</code>, <code class="code">&lt;main&gt;</code> and
      <code class="code">&lt;footer&gt;</code>. This change in the HTML file requires
      corresponding changes in <code class="filename">main.css</code>. In addition, we
      define our own styles for <code class="code">&lt;table&gt;</code>,
      <code class="code">&lt;menu&gt;</code> and <code class="code">&lt;form&gt;</code> elements.
      Concerning the styling of HTML forms, we define a simple style for
      implicitly labeled form control elements.</p><p>The start page <code class="filename">index.html</code> now must take care
      of loading the CSS page styling files with the help of the following two
      <code class="code">link</code> elements: </p><pre class="programlisting">&lt;link rel="stylesheet" href="css/normalize.min.css"&gt;
&lt;link rel="stylesheet" href="css/main.css"&gt;</pre><p>Since the styling of user interfaces is not our primary concern,
      we do not discuss the details of it and leave it to our readers to take
      a closer look. You can <a class="link" href="MinimalApp-with-CSS/index.html" target="_top">run
      the CSS-styled minimal app</a> from our server or <a class="link" href="MinimalApp-with-CSS.zip" target="_top">download
      its code</a> as a ZIP archive file.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e2227"></a>9.&nbsp;Points of Attention</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e2229"></a>9.1.&nbsp;Catching invalid data</h3></div></div></div><p>The app discussed in this chapter is limited to support the
      minimum functionality of a data management app only. It does not take
      care of preventing users from entering invalid data into the app's
      database. In   <span class="phrase"><a class="link" href="validation-tutorial.html" target="_top">Part
      2</a> of this tutorial,</span> we show how to express integrity
      constraints in a model class, and how to perform data validation both in
      the model/storage code of the app and in the HTML5-based user
      interface.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e2234"></a>9.2.&nbsp;Database size and memory management</h3></div></div></div><p>Notice that in this <span class="phrase">tutorial,</span>
       we have made the
      assumption that all application data can be loaded into main memory
      (like all book data is loaded into the map <code class="code">Book.instances</code>).
      This approach only works in the case of local data storage of smaller
      databases, say, with not more than 2 MB of data, roughly corresponding
      to 10 tables with an average population of 1000 rows, each having an
      average size of 200 Bytes. When larger databases are to be managed, or
      when data is stored remotely, it's no longer possible to load the entire
      population of all tables into main memory, but we have to use a
      technique where only parts of the table contents are loaded.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e2239"></a>9.3.&nbsp;Boilerplate code</h3></div></div></div><p>Another issue with the do-it-yourself code of this example app is
      the <span class="italic">boilerplate<a class="indexterm" name="d5e2243"></a> code</span> needed per model class for the data
      storage management methods <code class="code">add</code>, <code class="code">retrieve</code>,
      <code class="code">update</code>, and <code class="code">destroy</code>. While it is good to write
      this code a few times for learning app development, you don't want to
      write it again and again later when you work on real projects. In
      <span class="phrase">our <a class="link" href="../mODELcLASSjs/validation-tutorial.html" target="_top">mODELcLASSjs
      tutorial</a>,</span> 
      we present an approach how to put these methods in a generic form in a
      meta-class, such that they can be reused in all model classes of an
      app.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e2251"></a>9.4.&nbsp;Serializing and de-serializing attribute values</h3></div></div></div><p>Serializing an attribute value means to convert it to a suitable
      string value. For standard datatypes, such as numbers, a standard
      serialization<a class="indexterm" name="d5e2254"></a> is provided by the predefined conversion function
      <code class="code">String</code>. When a string value, like "13" or "yes", represents
      the value of a non-string-valued attribute, it has to be <span class="italic">de-serialized</span>, that is, converted to the range
      type of the attribute, before it is assigned to the attribute. This is
      the situation, for instance, when a user has entered a value in a form
      input field for an integer-valued attribute. The value of the form field
      is of type string, so it has to be converted (de-serialized) to an
      integer using the predefined conversion function
      <code class="code">parseInt</code>.</p><p>For instance, in our example app, we have the integer-valued
      attribute <code class="code">year</code>. When the user has entered a value for this
      attribute in a corresponding form field, in the <span class="italic">Create</span> or <span class="italic">Update</span> user interface, the form field holds a
      string value, which has to be converted to an integer in an assignment
      like the following:</p><pre class="programlisting">this.year = <span class="bold"><strong>parseInt</strong></span>( formEl.year.value);</pre><p>One important question is: where should we take care of
      de-serialization: in the "view" (before the value is passed to the
      "model" layer), or in the "model"? Since attribute range types are a
      business concern, and the business logic of an app is supposed to be
      encapsulated in the "model", de-serialization<a class="indexterm" name="d5e2266"></a> should be performed in the "model" layer, and not in the
      "view".</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e2268"></a>9.5.&nbsp;Implicit versus explicit form field labels</h3></div></div></div><p>The explicit labeling<a class="indexterm" name="d5e2271"></a> of form fields requires to add an <code class="code">id</code> value
      to the <code class="code">input</code> element and a <code class="code">for</code>-reference to
      its <code class="code">label</code> element as in the following
      example:</p><pre class="programlisting">&lt;div&gt;
  &lt;label for="isbn"&gt;ISBN:&lt;/label&gt;
  &lt;input id="isbn" name="isbn" /&gt;
&lt;/div&gt;</pre><p>This technique for associating a label with a form field is
      getting quite inconvenient when we have many form fields on a page
      because we have to make up a great many of unique <code class="code">id</code> values
      and have to make sure that they don't conflict with any of the
      <code class="code">id</code> values of other elements on the same page. It's
      therefore preferable to use an approach, called <span class="italic">implicit labeling</span>,<a class="indexterm" name="d5e2284"></a> where these <code class="code">id</code> references are not needed. In
      this approach, the <code class="code">input</code> element is a child element of its
      <code class="code">label</code> element, as in </p><pre class="programlisting">&lt;div&gt;
  &lt;label&gt;ISBN: &lt;input name="isbn" /&gt;&lt;/label&gt;
&lt;/div&gt;</pre><p>Having <code class="code">input</code> elements as child elements of their
      <code class="code">label</code> elements doesn't seem very logical. Rather, one would
      expect the <code class="code">label</code> to be a child of an <code class="code">input</code>
      element. But that's the way it is defined in HTML5.</p><p>A small disadvantage of using implicit labels may be the lack of
      support by certain CSS libraries. In the following parts of this
      tutorial, we will use our own CSS styling for implicitly labeled form
      fields.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e2298"></a>9.6.&nbsp;Synchronizing views with the model</h3></div></div></div><p>When an app is used by more than one user at the same time, we
      have to take care of somehow synchronizing the possibly concurrent
      read/write actions of users such that users always have current data in
      their "views" and are prevented from interfering with each other. This
      is a very difficult problem, which is attacked in different ways by
      different approaches. It has been mainly investigated for multi-user
      database management systems and large enterprise applications built on
      top of them.</p><p>The original MVC proposal included a data binding<a class="indexterm" name="d5e2302"></a> mechanism for automated one-way model-to-view
      synchronization (updating the model's views whenever a change in the
      model data occurs). We didn't take care of this in our minimal app
      because a front-end app with local storage doesn't really have multiple
      concurrent users. However, we can create a (rather artificial) situation
      that illustrates the issue:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Open the <span class="italic">Update</span> UI page of
          the minimal app twice (for instance, by opening
          <code class="filename">updateLearningUnit.html</code> twice), such that you
          get two browser tabs rendering the same page.</p></li><li class="listitem"><p>Select the same learning unit on both tabs, such that you see
          its data in the <span class="italic">Update</span>
          view.</p></li><li class="listitem"><p>Change one data item of this learning unit on one of the tabs
          and save your change.</p></li><li class="listitem"><p>When you now go to the other tab, you still see the old data
          value, while you may have expected that it would have been
          automatically updated.</p></li></ol></div><p>A mechanism for automatically updating all views of a model object
      whenever a change in its property values occurs is provided by the
      <span class="italic">observer pattern</span> that treats any view
      as an observer of its model object. Applying the observer pattern
      requires that (1) model objects can have a multi-valued reference
      property like <span class="italic">observers</span>, which holds
      a set of references to view objects; (2) a <span class="italic">notify</span> method can be invoked on view objects by
      the model object whenever one of its property values is changed; and (3)
      the <span class="italic">notify</span> method defined for view
      objects takes care of refreshing the user interface.</p><p>Notice, however, that the general model-view synchronization
      problem is not really solved by automatically updating all (other
      users') views of a model object whenever a change in its data occurs.
      Because this would only help, if the users of these views didn't make
      themselves any change of the data item concerned, meanwhile. Otherwise,
      their changed data value would be overwritten by the automated refresh,
      and they may not even notice this, which is not acceptable in terms of
      usability.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e2322"></a>9.7.&nbsp;Architectural separation of concerns</h3></div></div></div><p>From an architectural point of view, it is important to keep the
      app's model classes independent of </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>the user interface (UI) code because it should be possible
            to re-use the same model classes with different UI
            technologies;</p></li><li class="listitem"><p>the storage management code because it should be possible to
            re-use the same model classes with different storage
            technologies.</p></li></ol></div><p>In this <span class="phrase">tutorial,</span>   we have kept the model class
      <code class="code">Book</code> independent of the UI code, since it does not contain
      any references to UI elements, nor does it invoke any view method.
      However, for simplicity, we don't keep it independent of storage
      management code, since we include the method definitions for add,
      update, destroy, etc., which invoke the storage management methods of
      JavaScrpt's <code class="code">localStorage</code> API. Therefore, the separation of
      concerns is only incomplete in our apps, and a possible improvement
      would be to define abstract storage management methods in a special
      storage manager class, which is complemented by libraries of concrete
      storage management methods (called <span class="italic">storage
      adapters</span>) for specific storage technologies such as
      JavaScrpt's <code class="code">IndexedDB</code> API or remote data storage
      services.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e2336"></a>10.&nbsp;Quiz Questions</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e2338"></a>10.1.&nbsp;Question 1: Properties/methods of a model class</h3></div></div></div><p>Which of the following are properties or methods of a model class
      Book? Select one or more:</p><p>&#9744; Book.retrieveAll &#9744; Book.update &#9744; Book.destroy &#9744; Book.save</p><p>&#9744; Book.load &#9744; Book.instances &#9744; Book.add</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e2343"></a>10.2.&nbsp;Question 2: Using the <code class="code">output</code> element</h3></div></div></div><p>In which CRUD use case does the user interface include an HTML <code class="code">output</code>
        element? Select one or more:</p><p>&#9744; Retrieve/list all &#9744; Update &#9744; Delete &#9744; Create</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e2349"></a>10.3.&nbsp;Question 3: Entity tables</h3></div></div></div><p>Which of the following tables represent entity tables for a model
      class <code class="code">Book</code>? Select one or more:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>&#9744;</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="c1"><col class="c2"></colgroup><thead><tr valign="middle"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center" valign="middle"><p>Key</p></th><th style="border-bottom: 0.5pt solid ; " align="center" valign="middle"><p>Value</p></th></tr></thead><tbody><tr valign="middle"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="middle"><p>1</p></td><td style="border-bottom: 0.5pt solid ; " valign="middle"><p>[ "006251587X", "Weaving the Web", 2000
                  ]</p></td></tr><tr valign="middle"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="middle"><p>2</p></td><td style="border-bottom: 0.5pt solid ; " valign="middle"><p>[ "0465026567", "G&ouml;del, Escher, Bach", 1999
                  ]</p></td></tr><tr valign="middle"><td style="border-right: 0.5pt solid ; " valign="middle"><p>3</p></td><td style="" valign="middle"><p>[ "0465030793", "I Am A Strange Loop", 2008
                  ]</p></td></tr></tbody></table></div></li><li class="listitem"><p>&#9744;</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="c1"><col class="c2"></colgroup><thead><tr valign="middle"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center" valign="middle"><p>Key</p></th><th style="border-bottom: 0.5pt solid ; " align="center" valign="middle"><p>Value</p></th></tr></thead><tbody><tr valign="middle"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="middle"><p>1</p></td><td style="border-bottom: 0.5pt solid ; " valign="middle"><p>{ isbn:"006251587X", title:"Weaving the Web",
                  year:2000 }</p></td></tr><tr valign="middle"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="middle"><p>2</p></td><td style="border-bottom: 0.5pt solid ; " valign="middle"><p>{ isbn:"0465026567", title:"G&ouml;del, Escher,
                  Bach", year:1999 }</p></td></tr><tr valign="middle"><td style="border-right: 0.5pt solid ; " valign="middle"><p>3</p></td><td style="" valign="middle"><p>{ isbn:"0465030793", title:"I Am A Strange
                  Loop", year:2008 }</p></td></tr></tbody></table></div></li><li class="listitem"><p>&#9744;</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="c1"><col class="c2"></colgroup><thead><tr valign="middle"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center" valign="middle"><p>Key</p></th><th style="border-bottom: 0.5pt solid ; " align="center" valign="middle"><p>Value</p></th></tr></thead><tbody><tr valign="middle"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="middle"><p>006251587X</p></td><td style="border-bottom: 0.5pt solid ; " valign="middle"><p>{ isbn:"006251587X", title:"Weaving the Web",
                  year:2000 }</p></td></tr><tr valign="middle"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="middle"><p>0465026567</p></td><td style="border-bottom: 0.5pt solid ; " valign="middle"><p>{ isbn:"0465026567", title:"G&ouml;del, Escher,
                  Bach", year:1999 }</p></td></tr><tr valign="middle"><td style="border-right: 0.5pt solid ; " valign="middle"><p>0465030793</p></td><td style="" valign="middle"><p>{ isbn:"0465030793", title:"I Am A Strange
                  Loop", year:2008 }</p></td></tr></tbody></table></div></li><li class="listitem"><p>&#9744;</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; border-left: 0.5pt solid ; border-right: 0.5pt solid ; "><colgroup><col class="c1"><col class="c2"></colgroup><thead><tr valign="middle"><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="center" valign="middle"><p>Key</p></th><th style="border-bottom: 0.5pt solid ; " align="center" valign="middle"><p>Value</p></th></tr></thead><tbody><tr valign="middle"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="middle"><p>006251587X</p></td><td style="border-bottom: 0.5pt solid ; " valign="middle"><p>[ "006251587X", "Weaving the Web", 2000
                  ]</p></td></tr><tr valign="middle"><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " valign="middle"><p>0465026567</p></td><td style="border-bottom: 0.5pt solid ; " valign="middle"><p>[ "0465026567", "G&ouml;del, Escher, Bach", 1999
                  ]</p></td></tr><tr valign="middle"><td style="border-right: 0.5pt solid ; " valign="middle"><p>0465030793</p></td><td style="" valign="middle"><p>[ "0465030793", "I Am A Strange Loop", 2008
                  ]</p></td></tr></tbody></table></div></li></ol></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5e2466"></a>11.&nbsp;Practice Projects</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e2468"></a>11.1.&nbsp;Managing information about movies</h3></div></div></div><p>The purpose of the app to be developed is managing information
      about movies. Like in the book data management app discussed in the
      tutorial, you can make the simplifying assumption that all the data can
      be kept in main memory. So, on application start up, the movie data is
      read from a persistent data store. When the user quits the application,
      the data has to be saved to the persistent data store, which should be
      implemented with JavaScript's Local Storage API, as in the
      tutorial.</p><p>The app deals with just one object type: <code class="code">Movie</code>, as
      depicted in <a class="xref" href="#figMovieMinApp" title="Figure&nbsp;3.2.&nbsp;The object type Movie.">Figure&nbsp;3.2</a>
      below. In the subsequent parts of the tutorial, you will extend this
      simple app by adding integrity constraints, enumeration attributes,
      further model classes for actors and directors, and the associations
      between them.</p><p>Notice that <code class="code">releaseDate</code> is an attribute with range
      <code class="code">Date</code>, so you need to find out how to display, and support
      user input of, calendar dates.</p><div class="figure"><a name="figMovieMinApp"></a><p class="title"><b>Figure&nbsp;3.2.&nbsp;The object type <code class="code">Movie</code>.</b></p><div class="figure-contents"><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;" width="200"><tr><td><img src="../fig/Movie_MinimalDesM.svg" width="200" alt="The object type Movie."></td></tr></table></div></div></div><br class="figure-break"><p>For developing the app, simply follow the sequence of seven steps
      described in the tutorial:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Step 1 - Set up the Folder Structure</p></li><li class="listitem"><p>Step 2 - Write the Model Code</p></li><li class="listitem"><p>Step 3 - Initialize the Application</p></li><li class="listitem"><p>Step 4 - Implement the <span class="italic">List
            Objects</span> Use Case</p></li><li class="listitem"><p>Step 5 - Implement the <span class="italic">Create
            Object</span> Use Case</p></li><li class="listitem"><p>Step 6 - Implement the <span class="italic">Update
            Object</span> Use Case</p></li><li class="listitem"><p>Step 7 - Implement the <span class="italic">Delete
            Object</span> Use Case</p></li></ol></div><p>You can use the following sample data for testing: </p><div class="table"><a name="d5e2504"></a><p class="title"><b>Table&nbsp;3.2.&nbsp;Sample data</b></p><div class="table-contents"><table frame="box" rules="all"><thead><tr>
              <th>Movie ID</th>

              <th>Title</th>

              <th>Release date</th>
            </tr></thead><tbody><tr>
              <td>1</td>

              <td>Pulp Fiction</td>

              <td>1994-05-12</td>
            </tr><tr>
              <td>2</td>

              <td>Star Wars</td>

              <td>1977-05-25</td>
            </tr><tr>
              <td>3</td>

              <td>Casablanca</td>

              <td>1943-01-23</td>
            </tr><tr>
              <td>4</td>

              <td>The Godfather</td>

              <td>1972-03-15</td>
            </tr></tbody></table></div></div><p><br class="table-break"></p><p>Make sure that</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>your HTML pages comply with the XML syntax of HTML5,</p></li><li class="listitem"><p>international characters are supported by using UTF-8 encoding
          for all HTML files,</p></li><li class="listitem"><p>your JavaScript code complies with our <a class="link" href="http://oxygen.informatik.tu-cottbus.de/webeng/Coding-Guidelines.html" target="_top">Coding
          Guidelines</a> and is checked with <a class="link" href="http://jshint.com/" target="_top">JSHint</a> (for instance, instead
          of the unsafe equality test with "==", always the strict equality
          test with "===" has to be used).</p></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d5e2538"></a>11.2.&nbsp;Managing persistent data with IndexedDB</h3></div></div></div><p>Improve your app developed in project 1 by replacing the use of
      the <code class="code">localStorage</code> API for persistent data storage with using
      the more powerful <a class="link" href="https://dev.opera.com/articles/introduction-to-indexeddb/" target="_top">IndexedDB</a>
      API.</p></div></div></div><div lang="" class="glossary"><div class="titlepage"><div><div><h1 class="title"><a name="d5e2543"></a>Glossary</h1></div></div></div><div class="glossdiv"><h3 class="title">C</h3><dl><dt><a name="CRUD"></a><span class="glossterm">CRUD</span></dt><dd class="glossdef"><p>CRUD is an acronym for <span class="italic"><span class="bold"><strong>C</strong></span>reate</span>, <span class="italic"><span class="bold"><strong>R</strong></span>ead/Retrieve</span>, <span class="italic"><span class="bold"><strong>U</strong></span>pdate</span>,
        <span class="italic"><span class="bold"><strong>D</strong></span>elete</span>, which denote the four basic
        data management operations to be performed by any software
        application.</p></dd><dt><a name="css"></a><span class="glossterm">Cascading Style Sheets</span></dt><dd class="glossdef"><p>CSS is used for defining the presentation style of web pages by
        telling the browser how to render their HTML (or XML) contents: using
        which layout of content elements, which fonts and text styles, which
        colors, which backgrounds, and which animations. Normally, these
        settings are made in a separate CSS file that is associated with an
        HTML file via a special link element in the HTML's head
        element.</p></dd></dl></div><div class="glossdiv"><h3 class="title">D</h3><dl><dt><a name="DOM"></a><span class="glossterm">Document Object Model</span></dt><dd class="glossdef"><p>The DOM is an abstract API for retrieving and modifying nodes
        and elements of HTML or XML documents. All web programming languages
        have DOM bindings that realize the DOM.</p></dd><dt><a name="DNS"></a><span class="glossterm">Domain Name System</span></dt><dd class="glossdef"><p>The DNS translates user-friendly domain names to IP addresses
        that allow to locate a host computer on the Internet.</p></dd></dl></div><div class="glossdiv"><h3 class="title">E</h3><dl><dt><a name="ECMAScript"></a><span class="glossterm">ECMAScript</span></dt><dd class="glossdef"><p>A standard for JavaScript defined by the industry organization
        "Ecma International".</p></dd><dt><a name="xml"></a><span class="glossterm">Extensible Markup Language</span></dt><dd class="glossdef"><p>XML allows to mark up the structure of all kinds of documents,
        data files and messages in a machine-readable way. XML may also be
        human-readable, if the tag names used are self-explaining. XML is
        based on Unicode. SVG and MathML are based on XML, and there is an
        XML-based version of HTML.</p><p>XML provides a syntax for expressing structured information in
        the form of an <span class="italic">XML document</span> with
        <span class="italic">elements</span> and their <span class="italic">attributes</span>. The specific elements and
        attributes used in an XML document can come from any vocabulary, such
        as public standards or user-defined XML formats.</p></dd></dl></div><div class="glossdiv"><h3 class="title">H</h3><dl><dt><a name="html"></a><span class="glossterm">Hypertext Markup Language</span></dt><dd class="glossdef"><p>HTML allows marking up (or describing) the structure of a
        human-readable web document or web user interface. The XML-based
        version of HTML, which is called "XHTML5", provides a simpler and
        cleaner syntax compared to traditional HTML.</p></dd><dt><a name="http"></a><span class="glossterm">Hypertext Transfer Protocol</span></dt><dd class="glossdef"><p>HTTP is a stateless request/response protocol based on the
        Internet technologies TCP/IP and DNS, using human-readable text
        messages for the communication between web clients and web servers.
        The main purpose of HTTP has been to allow fetching web documents
        identified by URLs from a web browser, and invoking the operations of
        a back-end web application program from an HTML form executed by a web
        browser. More recently, HTTP is increasingly used for providing web
        APIs and web services.</p></dd></dl></div><div class="glossdiv"><h3 class="title">I</h3><dl><dt><a name="IANA"></a><span class="glossterm">IANA</span></dt><dd class="glossdef"><p>IANA stands for <span class="italic">Internet Assigned
        Numbers Authority</span>, which is a subsidiary of ICANN
        responsible for names and numbers used by Internet protocols.</p></dd><dt><a name="ICANN"></a><span class="glossterm">ICANN</span></dt><dd class="glossdef"><p>ICANN stands for <span class="italic">Internet Corporation of
        Assigned Names and Numbers</span>, which is an international
        nonprofit organization that maintains the domain name system.</p></dd><dt><a name="IndexedDB"></a><span class="glossterm">IndexedDB</span></dt><dd class="glossdef"><p>A JavaScript API for indexed data storage managed by browsers.
        Indexing allows high-performance searching. Like many SQL DBMS,
        IndexedDB supports database transactions.</p></dd><dt><a name="I18N"></a><span class="glossterm">I18N</span></dt><dd class="glossdef"><p>A set of best practices that help to adapt products to any
        target language and culture. It deals with multiple character sets,
        units of measure, keyboard layouts, time and date formats, and text
        directions.</p></dd></dl></div><div class="glossdiv"><h3 class="title">J</h3><dl><dt><a name="JSON"></a><span class="glossterm">JSON</span></dt><dd class="glossdef"><p>JSON stands for <span class="italic">JavaScript Object
        Notation</span>, which is a data-interchange format following the
        JavaScript syntax for object literals. Many programming languages
        support JSON as a light-weight alternative to XML.</p></dd></dl></div><div class="glossdiv"><h3 class="title">M</h3><dl><dt><a name="MathML"></a><span class="glossterm">MathML</span></dt><dd class="glossdef"><p>An open standard for representing mathematical expressions,
        either in data interchange or for rendering them within
        webpages.</p></dd><dt><a name="MIME"></a><span class="glossterm">MIME</span></dt><dd class="glossdef"><p>A MIME type (also called "media type" or "content type") is a
        keyword string sent along with a file for indicating its content type.
        For example, a sound file might be labeled <code class="code">audio/ogg</code>, or
        an image file <code class="code">image/png</code>.</p></dd><dt><a name="MVC"></a><span class="glossterm"><span class="italic"><span class="bold"><strong>M</strong></span>odel-<span class="bold"><strong>V</strong></span>iew-<span class="bold"><strong>C</strong></span>ontroller</span></span></dt><dd class="glossdef"><p>MVC is a general architecture metaphor emphasizing the principle
        of separation of concerns, mainly between the model and the view, and
        considering the model as the most fundamental part of an app. In MVC
        frameworks, "M", "V" and "C" are defined in different ways. Often the
        term &#8220;model&#8221; refers to the app&#8217;s data sources, while the &#8220;view&#8221;
        denotes the app&#8217;s code for the user interface, which is based on
        CSS-styled HTML forms and DOM events, and the &#8220;controller&#8221; typically
        denotes the (glue) code that is in charge of mediating between the
        <span class="emphasis"><em>view</em></span> and the <span class="emphasis"><em>model</em></span>.</p></dd></dl></div><div class="glossdiv"><h3 class="title">O</h3><dl><dt><a name="OCL"></a><span class="glossterm"><span class="italic">Object Constraint
      Language</span></span></dt><dd class="glossdef"><p>The OCL is a formal logic language for expressing integrity
        constraints, mainly in UML class models. It also allows defining
        derivation expressions for defining derived properties, and defining
        preconditions and postconditions for operations, in a class
        model.</p></dd><dt><a name="OOP"></a><span class="glossterm"><span class="italic">Object-Oriented
      Programming</span></span></dt><dd class="glossdef"><p>OOP is a programming paradigm based on the concepts of
        <span class="emphasis"><em>objects</em></span> and <span class="emphasis"><em>classes</em></span>
        instantiated by objects. Classes are like blueprints for objects: they
        define their <span class="emphasis"><em>properties</em></span> and the
        <span class="emphasis"><em>methods</em></span>/<span class="emphasis"><em>functions</em></span> that can
        be applied to them. A higher-level characteristic of OOP is
        <span class="emphasis"><em>inheritance</em></span> in class hierarchies: a subclass
        inherits the features (properties, methods and constraints) of its
        superclass. </p></dd><dt><a name="OWL"></a><span class="glossterm"><span class="italic">Web Ontology
      Language</span></span></dt><dd class="glossdef"><p>OWL is formal logic language for knowledge representation on the
        Web. It allows defining vocabularies (mainly classes with properties)
        and supports expressing many types of integrity constraints on them.
        OWL is the basis for performing automated inferences, such as checking
        the consistency of an OWL vocabulary. Vocabularies, or data models,
        defined in the form of UML class models can be converted to OWL
        vocabularies and then checked for consistency.</p></dd></dl></div><div class="glossdiv"><h3 class="title">P</h3><dl><dt><a name="PNG"></a><span class="glossterm"><span class="italic">Portable Network
      Graphics</span></span></dt><dd class="glossdef"><p>PNG is an open (non-proprietary) graphics file format that
        supports lossless data compression.</p></dd><dt><a name="Polyfill"></a><span class="glossterm">Polyfill</span></dt><dd class="glossdef"><p>A polyfill is a piece of JavaScript code for emulating a
        standard JavaScript method in a browser, which does not support the
        method.</p></dd></dl></div><div class="glossdiv"><h3 class="title">R</h3><dl><dt><a name="RDF"></a><span class="glossterm">Resource Description Framework</span></dt><dd class="glossdef"><p>RDF is a W3C language for representing machine-readable
        propositional information on the Web.</p></dd></dl></div><div class="glossdiv"><h3 class="title">S</h3><dl><dt><a name="SGML"></a><span class="glossterm">Standard Generalized Markup Language</span></dt><dd class="glossdef"><p>SGML is an ISO specification for defining markup languages.
        HTML4 has been defined with SGML. XML is a simplified successor of
        SGML. HTML5 is no longer SGML-based and has its own parsing
        rules.</p></dd><dt><a name="SVG"></a><span class="glossterm">Scalable Vector Graphics</span></dt><dd class="glossdef"><p>SVG is a 2D vector image format based on XML. SVG can be styled
        with CSS and made interactive using JavaScript. HTML5 allows direct
        embedding of SVG content in an HTML document.</p></dd><dt><a name="slot"></a><span class="glossterm">Slot</span></dt><dd class="glossdef"><p>A slot is a name-value pair. In an object of an object-oriented
        program (for instance, in a Java object), a slot normally is a
        property-value pair. But in a JavaScript object, a slot may also
        consist of a method name and a method body or it may be a key-value
        pair of a map.</p></dd></dl></div><div class="glossdiv"><h3 class="title">U</h3><dl><dt><a name="Unicode"></a><span class="glossterm">Unicode</span></dt><dd class="glossdef"><p>A platform-independent character set that includes almost all
        characters from most of the world's script languages including Hindi,
        Burmese and Gaelic. Each character is assigned a unique integer code
        in the range between 0 and 1,114,111. For example, the Greek letter &#960;
        has the code 960. Unicode includes legacy character sets like ASCII
        and ISO-8859-1 (Latin-1) as subsets.</p><p>XML is based on Unicode. Consequently, the Greek letter &#960; (with
        code 960) can be inserted in an XML document as &amp;#960; using the
        XML entity syntax. The default encoding of Unicode characters in an
        XML document is UTF-8, which uses only a single byte for ASCII
        characters, but three bytes for less common characters.</p></dd><dt><a name="URI"></a><span class="glossterm">Uniform Resource Identifier</span></dt><dd class="glossdef"><p>A URI is either a <span class="emphasis"><em>Uniform Resource Locator
        (URL)</em></span> or a <span class="emphasis"><em>Uniform Resource Name
        (URN)</em></span>.</p></dd><dt><a name="URL"></a><span class="glossterm">Uniform Resource Locator</span></dt><dd class="glossdef"><p>A URL is a resource name that contains a web address for
        locating the resource on the Web.</p></dd><dt><a name="UML"></a><span class="glossterm"><span class="italic">Unified Modeling
      Language</span></span></dt><dd class="glossdef"><p>The UML is an industry standard that defines a set of modeling
        languages for making various kinds of models and diagrams in support
        of object-oriented problem analysis and software design. Its core
        languages are <span class="italic">Class Diagrams</span> for
        information/data modeling, and <span class="italic">Sequence
        Diagrams</span>, <span class="italic">Activity
        Diagrams</span> and <span class="italic">State
        Diagrams</span> (or <span class="italic">State
        Charts</span>) for process/behavior modeling.</p></dd><dt><a name="URN"></a><span class="glossterm"><span class="italic">Uniform Resource
      Name</span></span></dt><dd class="glossdef"><p>A URN refers to a resource without specifying its
        location.</p></dd><dt><a name="UserAgent"></a><span class="glossterm">User Agent</span></dt><dd class="glossdef"><p>A user agent is a front-end web client program such as a web
        browser.</p></dd></dl></div><div class="glossdiv"><h3 class="title">W</h3><dl><dt><a name="WebM"></a><span class="glossterm">WebM</span></dt><dd class="glossdef"><p>WebM is an open (royalty-free) web video format supported by
        Google Chrome and Mozilla Firefox, but not by Microsoft Internet
        Explorer and Apple Safari.</p></dd><dt><a name="WHATWG"></a><span class="glossterm">Web Hypertext Application Technology Working
      Group</span></dt><dd class="glossdef"><p>The <span class="italic">WHATWG</span> was established in
        2004 by former employees of Apple, Mozilla, and Opera who have been
        unhappy with the slow progress of web technology standardization due
        to W3C's choice to focus on the standardization of XHTML2. Led by Ian
        Hickson, they developed HTML5 and related JavaScript APIs in
        competition and collaboration with the W3C.</p></dd><dt><a name="www"></a><span class="glossterm">World Wide Web</span></dt><dd class="glossdef"><p>The WWW (or, simply, "the Web") is a huge client-server network
        based on HTTP, HTML and XML, where web browsers (and other 'user
        agents'), acting as HTTP clients, access web server programs, acting
        as HTTP servers.</p></dd><dt><a name="W3C"></a><span class="glossterm">World Wide Web Consortium</span></dt><dd class="glossdef"><p>The <span class="emphasis"><em>W3C</em></span> is an international organization in
        charge of developing and maintaining web standards.</p></dd></dl></div><div class="glossdiv"><h3 class="title">X</h3><dl><dt><a name="XHR"></a><span class="glossterm">XML HTTP Request</span></dt><dd class="glossdef"><p>The XML HTTP Request (XHR) API allows a JavaScript program to
        exchange HTTP messages with back-end programs. It can be used for
        retrieveing/submitting information from/to a back-end program without
        submitting HTML forms. XHR-based approaches have been subsumed under
        the acronym "AJAX" in the past.</p></dd></dl></div></div></div><script data-cfasync="false" src="../../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script></body>
<!-- Mirrored from web-engineering.info/tech/JsFrontendApp/minimal-tutorial.html by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 21 Jul 2023 10:44:51 GMT -->
</html>